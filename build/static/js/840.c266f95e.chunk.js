"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[840],{9840:(e,t,s)=>{s.r(t),s.d(t,{AttendanceRegister:()=>l,default:()=>g});var n=s(5043),a=s(7638),o=s(5407),r=s(5323),c=s(749),i=s(6273),d=s(579);function l(){let e=(0,r.g)();const[t,s]=(0,n.useState)(""),[l,g,h]=(0,o.lT)(["user"]),[p,m]=(0,n.useState)(""),[x,u]=(0,n.useState)(""),[y,f]=(0,n.useState)("");const[j,v]=(0,n.useState)(""),[S,A]=(0,n.useState)(""),[I,b]=(0,n.useState)([]),[w,C]=(0,n.useState)(""),[E,B]=(0,n.useState)(""),[T,k]=(0,n.useState)("10000"),[R,_]=(0,n.useState)("10000"),[F,P]=(0,n.useState)("100"),[D,L]=(0,n.useState)(""),[z,N]=(0,n.useState)(""),[M,J]=(0,n.useState)(""),[O,W]=(0,n.useState)("Please wait......"),[G,H]=(0,n.useState)("Caltulating......"),[K,Y]=(0,n.useState)(""),[Q,U]=(0,n.useState)(""),[V,Z]=(0,n.useState)(""),[q,X]=(0,n.useState)("caltulating....."),[$,ee]=(0,n.useState)(""),[te,se]=(0,n.useState)("");let ne=0;const[ae,oe]=(0,n.useState)(1);let re="whatsapp://send?text=*".concat(O,"*%0A%0ATap link below to register:%0A").concat(i.J_,"/pages/attendanceregs/").concat(e.registrar,"/").concat(e.id,"%0A%0A*Thank you.*");return(0,n.useEffect)((()=>{fetch("/attendanceregs/".concat(e.registrar,"/").concat(e.id)).then((e=>e.json())).then((e=>{0===e.presence?(W("This Register does not exist. Please try another or create your own register too for free"),v("Kayas 0703852178-WhatsApp")):(v(e.name),J(e.institution),W(e.registerTitle),N(e.contact))})),fetch("/attendees/".concat(e.registrar,"/").concat(e.id)).then((e=>e.json())).then((e=>{A(e.registerDoc.attendees.length),b(e.registerDoc.attendees)})),fetch("/getTradingDetails/".concat(e.registrar)).then((e=>e.json())).then((e=>{H(e[0].accBal),u(e[0].permissionTokensObj.sendSmsTokens)}))}),[]),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{padding:"5px"},children:(0,d.jsxs)("div",{class:"row",children:[(0,d.jsx)("div",{class:"col-md-3"}),(0,d.jsxs)("div",{class:"col-md-6",children:[(0,d.jsxs)("div",{style:{fontSize:"18px",color:"orange",padding:"5px",background:"black"},children:[O,(0,d.jsxs)("div",{style:{fontSize:"11px",color:"white"},children:[(0,d.jsx)("span",{children:S})," contacts | Register ",e.id]})]}),(0,d.jsx)(c.s,{}),(0,d.jsxs)("div",{style:{paddingTop:"15px"},children:[(0,d.jsx)("div",{class:"label1",children:"Save contact"}),(0,d.jsx)("div",{class:"label2",children:"Add a contact to the register"}),(0,d.jsxs)("form",{id:"messengingForm",children:[(0,d.jsx)("div",{style:{paddingBottom:"8px"},children:(0,d.jsx)("div",{class:"formLabel",children:"Save contact"})}),(0,d.jsxs)("div",{class:"mb-3",children:[(0,d.jsx)("div",{class:"formInputLabel",children:"Name (optional)"}),(0,d.jsx)("textarea",{row:"2",type:"text",class:"form-control",autoComplete:"off",name:"name"}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{class:"formInputLabel",children:"Contact"}),(0,d.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contact"})]}),(0,d.jsx)("div",{class:"row",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{padding:"5px",fontSize:"20px"},dangerouslySetInnerHTML:{__html:t}}),(0,d.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsxs)("div",{onClick:()=>{let t;Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10?((0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value=""):(t=Array.from(document.getElementById("messengingForm").name.value).length<2?"":document.getElementById("messengingForm").name.value.trim(),(0,a.yd)("toastAlert1","Saving......",3e3),fetch("/getTradingDetails/".concat(z)).then((e=>e.json())).then((s=>{s[0];fetch("/addToAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:t,contact:parseInt(document.getElementById("messengingForm").contact.value.trim()),registrarContact:z,registerId:parseInt(e.id)})}).then((e=>e.json())).then((e=>{0===e.registerPresent?(0,a.yd)("toastAlert2","Register does not exist",3e3):1===e.success?((0,a.yd)("toastAlert1","Successful, save another",3e3),document.getElementById("messengingForm").contact.value="",document.getElementById("messengingForm").name.value="",A(e.attendees.length)):"memberPresent"===e.success?((0,a.yd)("toastAlert2","Contact already exists",3e3),document.getElementById("messengingForm").contact.value="",document.getElementById("messengingForm").name.value=""):(0,a.yd)("toastAlert2","Error occured, try again",3e3)}))})))},type:"text",class:"button1",children:[(0,d.jsx)("span",{class:"fa fa-user-circle"})," Save contact"]})}),(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsxs)("div",{onClick:()=>{!0===(0,a.Qb)(l)&&((0,a.yd)("toastAlert1","Please wait......",3e3),setTimeout((()=>{0===ne&&(0,a.yd)("toastAlert1","Gaining network, please wait......",8e3)}),11500),(0,a.yd)("toastAlert1","Getting contacts, please wait.......",3e3),fetch("/attendeesMessage/".concat(e.registrar,"/").concat(e.id)).then((e=>e.json())).then((t=>{t.message;fetch("/attendees/".concat(e.registrar,"/").concat(e.id)).then((e=>e.json())).then((e=>{let t=e,s=1,n=t.registerDoc;ne=1,A(t.registerDoc.attendees.length);!0===t.closed?(0,a.yd)("toastAlert2","Register closed. Contact Kayas",3e3):(n.attendees.forEach((e=>{e.position=s,s++})),L(n.attendees.map((e=>(0,d.jsx)("div",{style:{padding:"5px"},children:(0,d.jsxs)("div",{class:"row",style:{background:"white",borderRadius:"20px"},children:[(0,d.jsxs)("div",{class:"col-6",children:[e.position,". ",e.name]}),(0,d.jsxs)("div",{class:"col-6",style:{textAlign:"right"},children:[(0,d.jsx)("a",{onClick:()=>{window.location.href="tel:0".concat(e.contact)},children:(0,d.jsxs)("span",{class:"hovereffect",children:[" ",(0,d.jsx)("span",{class:"fa fa-phone "})]})})," 0",e.contact," ",(0,d.jsxs)("a",{onClick:()=>{window.location.href="https://wa.me/256".concat(e.contact,"?text=Hello ").concat(e.name,", I would like to speak to you briefly. Is it okay?%0A%0AI am *").concat(n.name.trim(),"*%0A%0A____________________%0A").concat(e.position)},children:[(0,d.jsxs)("span",{class:"hovereffect",children:[" ",(0,d.jsx)("span",{class:"fa fa-whatsapp "})]})," "]}),"   "]}),"  "]})})))),(0,a.yd)("toastAlert1","Successful. Scroll to see",3e3))}))})))},type:"text",class:"button1",children:[(0,d.jsx)("span",{class:"fa fa-eye"})," Display contacts"]})}),(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsxs)("div",{onClick:()=>{window.location.href="/pages/sendsmsattendanceregs/".concat(e.registrar,"/").concat(e.id)},type:"text",class:"button1",children:[(0,d.jsx)("span",{class:"fa fa-envelope"})," Send SMS"]})}),(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsxs)("div",{onClick:()=>{Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10?((0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value=""):((0,a.yd)("toastAlert1","Deleting.....",2e3),fetch("/removeFromAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(document.getElementById("messengingForm").contact.value.trim()),registrarContact:z,registerId:parseInt(e.id)})}).then((e=>e.json())).then((e=>{0===e.registerPresent?m("<div style='color:red;'>You can not proceed with the action because the Regsiter is not present</div>"):((0,a.yd)("toastAlert1","Deleting.......",2e3),0===e.attendeeInList?(0,a.yd)("toastAlert2","not in the list",3e3):1===e.success?((0,a.yd)("toastAlert1","Successful",2e3),document.getElementById("messengingForm").contact.value="",A(S-1)):((0,a.yd)("toastAlert1","Error occured, try again",3e3),document.getElementById("messengingForm").contact.value=""))})))},type:"text",class:"button1",children:[(0,d.jsx)("span",{class:"fa fa-trash"})," Delete contact"]})}),(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsx)("div",{onClick:()=>{if(Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10)(0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value="";else if(0===I.length)(0,a.yd)("toastAlert2","Register not ready, try again",3e3);else{let e,t,s=0,n=parseInt(document.getElementById("messengingForm").contact.value);I.forEach((a=>{a.contact===n&&(e=s+1,t=a),s++})),void 0===e?(0,a.yd)("toastAlert2","Not in the list",3e3):(0,a.yd)("toastAlert1","".concat(t.name," at position ").concat(e," in the list"),4e3)}},type:"text",class:"button1",children:" Get details"})})]})]})})]})]}),(0,d.jsx)("div",{style:{background:"#e9e8e8",padding:"10px"},children:D})]}),(0,d.jsx)("div",{class:"col-md-3"}),(0,d.jsx)("div",{style:{padding:"30px"},children:(0,d.jsx)("div",{style:{color:"red",fontSize:"20px",textAlign:"center",paddingTop:"20px",borderBottom:"1px solid red"},children:"Below here is only for the Admin"})}),(0,d.jsxs)("div",{class:"col-md-6",style:{padding:"15px"},children:[(0,d.jsx)("div",{class:"label1",children:"Transfer/share contact"}),(0,d.jsx)("div",{class:"label2",children:"Send a copy of a contact to your other register. Enter the register ID to identify the register to send to."}),(0,d.jsxs)("form",{id:"sendContactToRegister",children:[(0,d.jsx)("div",{style:{paddingBottom:"8px"},children:(0,d.jsx)("div",{class:"formLabel",children:"Send contact to a register"})}),(0,d.jsxs)("div",{style:{paddingBottom:"5px"},children:["This section is for the Register Admin, ",j," "]}),(0,d.jsxs)("div",{style:{paddingTop:"5px"},children:["Sending to: ",(0,d.jsx)("span",{style:{padding:"5px"},dangerouslySetInnerHTML:{__html:E}})," "]}),(0,d.jsxs)("div",{class:"mb-3",children:[(0,d.jsx)("input",{type:"hidden",class:"form-control",autoComplete:"off",name:"registrarContact",defaultValue:z}),(0,d.jsx)("div",{class:"formInputLabel",children:"Enter the ID of the register to send to"}),(0,d.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"registerId",onChange:()=>{B("Searching for register........."),fetch("/getAttendanceRegDetails",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({registrarContact:z,registerId:parseInt(document.getElementById("sendContactToRegister").registerId.value)})}).then((e=>e.json())).then((e=>{0===e.length?(0,a.yd)("toastAlert2","You have no register with that ID",3e3):(B("".concat(e[0].registerTitle)),(0,a.yd)("toastAlert1","Sending to ".concat(e[0].registerTitle," "),4e3))}))}})," ",(0,d.jsx)("br",{}),(0,d.jsx)("div",{class:"formInputLabel",children:"Enter a position corresponding to the contact e.g. 1,2,3..."}),(0,d.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contactPosition"})]}),(0,d.jsx)("div",{style:{padding:"5px",fontSize:"15px"},dangerouslySetInnerHTML:{__html:w}}),(0,d.jsx)("div",{onClick:()=>{if("NaN"===parseInt(document.getElementById("sendContactToRegister").contactPosition.value))(0,a.yd)("toastAlert2","Enter a position corresponding to a contact e.g 1,2,3,....",3e3);else{let e=parseInt(document.getElementById("sendContactToRegister").contactPosition.value);if(e<1)(0,a.yd)("toastAlert2","Position can not be less than 1",3e3);else{let t=I[e-1];void 0===t?(0,a.yd)("toastAlert2","Refresh the page to update OR position ".concat(document.getElementById("sendContactToRegister").contactPosition.value," does not exist in this register"),7e3):fetch("/addToAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:t.name,contact:t.contact,registrarContact:z,registerId:parseInt(document.getElementById("sendContactToRegister").registerId.value)})}).then((e=>e.json())).then((e=>{1===e.success?((0,a.yd)("toastAlert1","Successful",3e3),document.getElementById("sendContactToRegister").contactPosition.value=""):"memberPresent"===e.success?((0,a.yd)("toastAlert2","Contact is already in the register you are sending to",4e3),document.getElementById("sendContactToRegister").contactPosition.value=""):0===e.registerPresent&&((0,a.yd)("toastAlert2","Register does not exist",3e3),document.getElementById("sendContactToRegister").contactPosition.value="")}))}}},type:"text",class:"button1",children:"Send"})]})]})]})}),(0,d.jsx)("p",{}),(0,d.jsxs)("div",{class:"row",style:{textAlign:"center",padding:"20px",fontSize:"15px"},children:[(0,d.jsx)("div",{class:"col-md-3"}),(0,d.jsxs)("div",{class:"col-md-6",children:[(0,d.jsxs)("div",{style:{borderRadius:"40px",border:"1px solid green",padding:"5px"},children:[(0,d.jsxs)("a",{style:{color:"green",fontSize:""},href:"/pages/brocode",children:[(0,d.jsx)("span",{class:"hovereffect",children:"Get to know Kayas "})," "]}),(0,d.jsx)("br",{}),(0,d.jsxs)("a",{style:{color:"green",fontSize:""},href:"https://twitter.com/isaacopiokayas",children:[(0,d.jsxs)("span",{class:"hovereffect",children:["Follow Kayas on Twitter, tap here ",(0,d.jsx)("span",{class:"fa fa-twitter"})]})," "]}),(0,d.jsx)("br",{}),(0,d.jsxs)("a",{style:{color:"green",fontSize:""},href:"https://chat.whatsapp.com/BU6aMsNR6jL5x11rcWc9HZ",children:[(0,d.jsxs)("span",{class:"hovereffect",children:["Join Kayas WhatsApp group, tap here ",(0,d.jsx)("span",{class:"fa fa-whatsapp"})]})," "]}),(0,d.jsx)("br",{})]}),(0,d.jsxs)("div",{style:{padding:"10px"},children:["Share to WhatsApp friends or Groups ",(0,d.jsx)("br",{})," ",(0,d.jsx)("a",{style:{color:"green"},href:re,children:(0,d.jsxs)("span",{class:"btn btn-warning hovereffect",children:[(0,d.jsx)("span",{class:"fa fa-whatsapp"})," Share this Register"]})})]})]}),(0,d.jsx)("div",{class:"col-md-3"})]})]})}const g=l},749:(e,t,s)=>{s.d(t,{s:()=>a});s(5043);var n=s(579);function a(){let e={padding:"3px"};return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{style:{paddingTop:"8px",display:"flex",flexWrap:"wrap"},children:[(0,n.jsx)("div",{style:e,children:(0,n.jsx)("div",{class:"button1",onClick:()=>{window.location.href="/pages/attendanceregs/createattendanceregister"},children:(0,n.jsxs)("span",{class:"hovereffect",children:[(0,n.jsx)("span",{class:"fa fa-plus"})," Create register"]})})}),(0,n.jsx)("div",{style:e,children:(0,n.jsx)("div",{class:"button1",onClick:()=>{window.location.href="/pages/attendanceregs/myregisters"},children:(0,n.jsx)("span",{class:"hovereffect",children:"My registers"})})})]})})}}}]);
//# sourceMappingURL=840.c266f95e.chunk.js.map