"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[250,604,551],{8604:(e,t,s)=>{s.r(t),s.d(t,{AllArticles:()=>l,default:()=>n});s(7890),s(9978);var a=s(5043),r=s(7638),i=s(579);function l(e){const[t,s]=(0,a.useState)((0,i.jsx)(r.aq,{}));return(0,a.useEffect)((async()=>{await fetch("/getAllArticles").then((e=>e.json())).then((async e=>{let t=await(0,r.Ee)(e);s(t)}))}),[]),(0,i.jsx)("div",{children:(0,i.jsx)("div",{class:"row",children:t})})}const n=l},4250:(e,t,s)=>{s.r(t),s.d(t,{CreateArticle:()=>m,default:()=>h});var a=s(7638),r=s(8289),i=s(9978),l=s(5407),n=(s(2551),s(8604),s(7890),s(5043)),c=s(7977),o=s(8345),d=s.n(o),p=s(579);r.A.initializeApp({apiKey:"AIzaSyCf0LC-eL1pJ2Rpvh59ukbg5OUFm6IcrEA",authDomain:"kayas-42321.firebaseapp.com",projectId:"kayas-42321",storageBucket:"kayas-42321.appspot.com"});const u=r.A.storage().ref();function m(){const[e,t,s]=(0,l.lT)(["user"]),[r,o]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[f,y]=(0,n.useState)(0),[g,x]=(0,n.useState)("Image appears here");function j(){o("<div style='color:green;'>Creating please wait ......</div>"),fetch("/getTradingDetails/".concat(parseInt(e.user.contact))).then((e=>e.json())).then((e=>{let t=e[0];t.permissionTokensObj.createPubArticleTokens<1||t.permissionTokensObj.createPubArticleTokens>1?fetch("/createArticle",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({headline1:document.getElementById("articleCreateForm")[0].value.trim(),institution:t.institution.trim(),author:t.name.trim(),contact:parseInt(t.contact),body:m.trim()})}).then((e=>e.json())).then((e=>{let t=e;if(1===e.limitReached)(0,a.yd)("toastAlert2","Maximum number of articles reached. Delete some",5e3);else{let s=document.querySelector("#pubArticleImageInputElement").files[0];if(document.getElementById("articleCreateForm").articleHeadline1.value="",void 0===s)window.location.href="/pages/pubarticles/article/".concat(e.id),(0,a.yd)("toastAlert1","Successful. Please wait....",3e3);else{let r=0;setInterval((()=>{94!==r&&(r+=1,y(r))}),400),o("<div style='color:green;'>Saving image.......</div>");let i="pubArticleImage_".concat(t.id),l=u.child("pubArticleImages/".concat(i));l.put(s).then((s=>{l.getDownloadURL({orderBy:"generation",limitTo:1}).then((s=>{let r=s;fetch("/addPubArticleImageUrlToArticle",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(t.contact),articleId:t.id,imageDownLoadUrl:r})}).then((t=>{o("<div style='color:green;'>Image saved</div>"),window.location.href="/pages/pubarticles/article/".concat(e.id),(0,a.yd)("toastAlert1","Successful. Please wait....",6e3)}))}))}))}}})):0===t.permissionTokensObj.createPubArticleTokens?(0,a.yd)("toastAlert2","Maximum number of articles reached. Delete some",4e3):(0,a.yd)("toastAlert2","Error, try again",3e3)}))}return(0,n.useEffect)((()=>{(0,a.Qb)(e)}),[]),(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{class:"col-md-3"}),(0,p.jsxs)("div",{class:"col-md-6",children:[(0,p.jsx)(i.dV,{}),(0,p.jsx)("div",{style:{padding:"8px"},children:(0,p.jsxs)("form",{method:"post",id:"articleCreateForm",action:"#",children:[(0,p.jsx)("div",{style:{paddingBottom:"8px"},children:(0,p.jsx)("div",{class:"formLabel",children:"Create article."})}),(0,p.jsxs)("div",{class:"mb-3",children:[(0,p.jsx)("div",{class:"formInputLabel",children:"Type headline"}),(0,p.jsx)("textarea",{rows:"3",type:"text",class:"form-control",autoComplete:"off",name:"articleHeadline1"}),(0,p.jsx)("br",{}),(0,p.jsxs)("div",{class:"formInputLabel",children:["Add photo ",(0,p.jsxs)("span",{style:{fontSize:"12px"},children:[" ",(0,p.jsx)("input",{type:"file",id:"pubArticleImageInputElement",name:"file",onChange:e=>{let t=document.querySelector("#pubArticleImageInputElement").files[0],s=Array.from(t.type);"i"===s[0]&&"m"===s[1]&&"a"===s[2]&&"g"===s[3]&&"e"===s[4]?x(URL.createObjectURL(t)):((0,a.yd)("toastAlert2","Image format ".concat(t.type," not supported. Change image"),5e3),setTimeout((()=>{window.location.href="/pages/pubarticles/createarticle"}),5e3))}})]})]}),(0,p.jsx)("div",{style:{paddingTop:"4px"},children:(0,p.jsx)("img",{src:g,class:" d-block w-100",alt:""})}),(0,p.jsx)("br",{}),(0,p.jsx)("div",{class:"formInputLabel",children:"Type/Paste your message here:"}),(0,p.jsx)(c.CKEditor,{config:{toolbar:["Bold","Italic","Link","NumberedList","BulletedList"]},editor:d(),onChange:(e,t)=>{const s=t.getData();h(s)}})]}),(0,p.jsx)("div",{style:{fontSize:"15px"},dangerouslySetInnerHTML:{__html:r}}),(0,p.jsx)("progress",{value:f,max:"100",style:{width:"100%",color:"red"}}),(0,p.jsx)("div",{onClick:()=>{if(Array.from(document.getElementById("articleCreateForm").articleHeadline1.value.trim()).length<1)(0,a.yd)("toastAlert2","Enter a headline",3e3);else if(Array.from(m).length<1){void 0===document.querySelector("#pubArticleImageInputElement").files[0]?(0,a.yd)("toastAlert2","Type or paste some information in the body section",3e3):j()}else j()},class:"form-submit-btn backgroundColorHovereffect",children:"Create Article"}),(0,p.jsx)("p",{})]})})]}),(0,p.jsx)("div",{class:"col-md-3"})]})})}const h=m},2551:(e,t,s)=>{s.r(t),s.d(t,{MyArticles:()=>c,default:()=>o});s(7890);var a=s(5407),r=s(5043),i=s(7638),l=s(6273),n=s(579);function c(){const[e,t]=(0,r.useState)(""),[s]=(0,a.lT)(["user"]),[c,o]=(0,r.useState)((0,n.jsx)(i.aq,{}));return(0,r.useEffect)((()=>{!0===(0,i.Qb)(s)&&fetch("/getMyArticles",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(s.user.contact)})}).then((e=>e.json())).then((e=>{0===e.length?(0,i.yd)("toastAlert2","You have no articles",4e3):(e.reverse(),o((0,i.Ee)(e)))}))}),[]),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{}),(0,n.jsxs)("div",{class:"row",children:[(0,n.jsx)("div",{class:"col-md-3"}),(0,n.jsx)("div",{class:"col-md-6",children:(0,n.jsx)("div",{class:"blackBgOrangeColor",children:"Your articles"})}),(0,n.jsx)("div",{class:"col-md-3"})]}),(0,n.jsx)("div",{style:{display:"flex",flexWrap:"wrap",padding:"5px"},children:(0,n.jsxs)("div",{class:"button1",onClick:()=>{window.location.href="whatsapp://send?text=*Trending stories*%0A%0ATap the link below for details:%0A%0A".concat(l.J_,"/pages/pubarticles/sharemyarticles/").concat(s.user.contact)},children:[(0,n.jsx)("span",{class:"fa fa-whatsapp"})," Share all articles through WhatsApp"]})}),(0,n.jsx)("div",{class:"row",children:c})]})}const o=c}}]);
//# sourceMappingURL=250.b9e9a5ad.chunk.js.map