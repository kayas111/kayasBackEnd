"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[9840],{749:(e,t,s)=>{s.d(t,{s:()=>c});s(65043);var n=s(62582),a=s(70579);function c(){let e={padding:"3px"};return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{style:{paddingTop:"8px",display:"flex",flexWrap:"wrap"},children:[(0,a.jsx)("div",{style:e,children:(0,a.jsxs)(n.N_,{to:"/pages/attendanceregs/myregisters",children:["  ",(0,a.jsxs)("div",{class:"button1",children:[(0,a.jsx)("span",{class:"fa fa-list"})," My registers"]})]})}),(0,a.jsx)("div",{style:e,children:(0,a.jsx)(n.N_,{to:"/pages/attendanceregs/createattendanceregister",children:(0,a.jsx)("div",{class:"button1",children:(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{class:"fa fa-plus"})," New register"]})})})})]})})}},79840:(e,t,s)=>{s.r(t),s.d(t,{AttendanceRegister:()=>g,default:()=>h});var n=s(65043),a=s(66756),c=s(35407),r=s(35323),o=s(749),i=s(76273),l=s(62582),d=s(70579);function g(){let e=(0,r.g)();const[t,s]=(0,n.useState)(""),[g,h,m]=(0,c.lT)(["user"]),[p,u]=(0,n.useState)(""),[x,y]=(0,n.useState)(""),[j,f]=(0,n.useState)("");const[v,S]=(0,n.useState)(""),[A,I]=(0,n.useState)(""),[b,E]=(0,n.useState)(""),[w,C]=(0,n.useState)([]),[F,B]=(0,n.useState)(""),[k,T]=(0,n.useState)(""),[D,R]=(0,n.useState)("10000"),[N,L]=(0,n.useState)("10000"),[W,O]=(0,n.useState)("100"),[P,_]=(0,n.useState)(""),[J,M]=(0,n.useState)(""),[z,K]=(0,n.useState)(""),[Y,G]=(0,n.useState)("Please wait......"),[H,Q]=(0,n.useState)("Caltulating......"),[q,U]=(0,n.useState)(""),[V,X]=(0,n.useState)(""),[Z,$]=(0,n.useState)(""),[ee,te]=(0,n.useState)("caltulating....."),[se,ne]=(0,n.useState)(""),[ae,ce]=(0,n.useState)("");let re=0;const[oe,ie]=(0,n.useState)(1);let le="whatsapp://send?text=*".concat(Y,"*%0A%0ATap link below to register:%0A").concat(i.J_,"/pages/attendanceregs/").concat(e.registrar,"/").concat(e.id,"%0A%0A*Thank you.*");function de(e){!0===(0,a.Qb)(g)&&(parseInt(g.user.contact)==parseInt(e.registrar)?(s("Fetching contacts, please wait......"),fetch("/attendeesMessage/".concat(e.registrar,"/").concat(e.id)).then(e=>e.json()).then(t=>{fetch("/attendees/".concat(e.registrar,"/").concat(e.id)).then(e=>e.json()).then(t=>{let n=t,c=1,r=n.registerDoc;re=1,I(n.registerDoc.attendees.length);!0===n.closed?(0,a.yd)("toastAlert2","Register closed. Contact Kayas",3e3):(r.attendees.forEach(e=>{e.position=c,c++}),_(r.attendees.map(t=>(0,d.jsx)("div",{style:{padding:"0px"},children:(0,d.jsx)("div",{class:"contactsRegisterContactRecordContainer",children:(0,d.jsxs)("div",{class:"row ",children:[(0,d.jsxs)("div",{class:"col-6",children:[t.position,". ",t.name]}),(0,d.jsx)("div",{class:"col-5",style:{textAlign:"right"},children:(0,d.jsx)("a",{onClick:()=>{window.location.href="tel:0".concat(t.contact)},children:(0,d.jsxs)("span",{class:"hovereffect",children:[(0,d.jsx)("span",{class:"fa fa-phone"})," Call: 0",t.contact]})})}),(0,d.jsx)("div",{class:"col-1",style:{textAlign:"center"},children:(0,d.jsx)("a",{onClick:()=>{1==window.confirm('Select "OK" to delete 0'.concat(t.contact))&&((0,a.yd)("toastAlert1","Deleting 0".concat(t.contact,", wait for confirmation message....."),3e3),fetch("/removeFromAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(t.contact),registrarContact:J,registerId:parseInt(e.id)})}).then(e=>e.json()).then(t=>{0===t.registerPresent?(0,a.yd)("toastAlert1","You can not proceed with the action because the Regsiter is not present",2e3):0===t.attendeeInList?(0,a.yd)("toastAlert2","Contact is not in the list",3e3):1===t.success?((0,a.yd)("toastAlert1","Deleted Successfully",3e3),I(A-1),de(e)):(0,a.yd)("toastAlert1","Error occured, try again",3e3)}))},children:(0,d.jsx)("span",{class:"hovereffect",children:(0,d.jsx)("span",{class:"fa fa-trash"})})})})]})})}))),E("".concat(r.attendees.length," contacts")),s("Successful. Scroll to see"))})})):(0,a.yd)("toastAlert2","Not allowed. You are not the owner",4e3))}return(0,n.useEffect)(()=>{window.location.href="#",fetch("/attendanceregs/".concat(e.registrar,"/").concat(e.id)).then(e=>e.json()).then(e=>{0===e.presence?(G("This Register does not exist. Please try another or create your own register too for free"),S("Kayas 0703852178-WhatsApp")):(S(e.name),K(e.institution),G(e.registerTitle),M(e.contact))}),fetch("/attendees/".concat(e.registrar,"/").concat(e.id)).then(e=>e.json()).then(e=>{I(e.registerDoc.attendees.length),C(e.registerDoc.attendees)}),fetch("/getTradingDetails/".concat(e.registrar)).then(e=>e.json()).then(e=>{Q(e[0].accBal),y(e[0].permissionTokensObj.sendSmsTokens)})},[]),(0,d.jsxs)("div",{style:{padding:"3px"},children:[(0,d.jsx)("div",{style:{padding:"5px"},children:(0,d.jsxs)("div",{class:"row",children:[(0,d.jsx)("div",{class:"col-md-3"}),(0,d.jsxs)("div",{class:"col-md-6",children:[(0,d.jsx)(o.s,{}),(0,d.jsx)("p",{}),(0,d.jsxs)("div",{class:"pageLabel",children:[A," contacts ",(0,d.jsxs)("span",{style:{paddingLeft:"10px"},children:["ID: ",e.id]})]}),(0,d.jsx)("div",{style:{fontSize:"15px"},children:Y}),(0,d.jsxs)("div",{style:{paddingTop:"20px"},children:[(0,d.jsxs)("form",{id:"messengingForm",children:[(0,d.jsx)("div",{class:"bold",children:"Save your contact"}),(0,d.jsx)("div",{class:"light",children:"Enter your name (optional) and contact then save."}),(0,d.jsx)("p",{}),(0,d.jsxs)("div",{class:"mb-3",children:[(0,d.jsx)("div",{class:"formInputLabel",children:"Name (optional)"}),(0,d.jsx)("textarea",{row:"2",type:"text",class:"form-control",autoComplete:"off",name:"name"}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{class:"formInputLabel",children:"Contact"}),(0,d.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contact"})]}),(0,d.jsx)("div",{class:"row",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{class:"status",children:t}),(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsxs)("div",{onClick:()=>{let t;Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10?((0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value=""):(t=Array.from(document.getElementById("messengingForm").name.value).length<2?"":document.getElementById("messengingForm").name.value.trim(),s("Saving......."),fetch("/getTradingDetails/".concat(J)).then(e=>e.json()).then(n=>{n[0];fetch("/addToAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:t,contact:parseInt(document.getElementById("messengingForm").contact.value.trim()),registrarContact:J,registerId:parseInt(e.id)})}).then(e=>e.json()).then(e=>{0===e.registerPresent?(0,a.yd)("toastAlert2","Register does not exist",3e3):1===e.success?((0,a.yd)("toastAlert1","Successful, save another",3e3),s("Saved"),document.getElementById("messengingForm").contact.value="",document.getElementById("messengingForm").name.value="",I(e.attendees.length)):"memberPresent"===e.success?((0,a.yd)("toastAlert2","Contact already exists",3e3),document.getElementById("messengingForm").contact.value="",document.getElementById("messengingForm").name.value=""):(0,a.yd)("toastAlert2","Error occured, try again",3e3)})}))},type:"text",class:"btn btn-success fullButtonWidth",children:[(0,d.jsx)("span",{class:"fa fa-save"})," Save"]})}),(0,d.jsx)("div",{style:{padding:"3px",textAlign:"center"},children:"Or"}),(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsx)(l.N_,{to:"/pages/sendsmsattendanceregs/".concat(e.registrar,"/").concat(e.id),children:(0,d.jsxs)("div",{class:"btn btn-success fullButtonWidth",children:[(0,d.jsx)("span",{class:"fa fa-envelope"})," Send SMS"]})})}),(0,d.jsx)("p",{}),(0,d.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsxs)("div",{onClick:()=>{de(e)},type:"text",class:"button1",children:[(0,d.jsx)("span",{class:"fa fa-eye"})," Display contacts"]})}),(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsxs)("div",{onClick:()=>{Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10?((0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value=""):((0,a.yd)("toastAlert1","Deleting.....",2e3),fetch("/removeFromAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(document.getElementById("messengingForm").contact.value.trim()),registrarContact:J,registerId:parseInt(e.id)})}).then(e=>e.json()).then(e=>{0===e.registerPresent?u("<div style='color:red;'>You can not proceed with the action because the Regsiter is not present</div>"):((0,a.yd)("toastAlert1","Deleting.......",2e3),0===e.attendeeInList?(0,a.yd)("toastAlert2","not in the list",3e3):1===e.success?((0,a.yd)("toastAlert1","Successful",2e3),document.getElementById("messengingForm").contact.value="",I(A-1)):((0,a.yd)("toastAlert1","Error occured, try again",3e3),document.getElementById("messengingForm").contact.value=""))}))},type:"text",class:"button1",children:[(0,d.jsx)("span",{class:"fa fa-trash"})," Delete contact"]})}),(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsx)("div",{onClick:()=>{if(Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10)(0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value="";else if(0===w.length)(0,a.yd)("toastAlert2","Register not ready, try again",3e3);else{let e,t,s=0,n=parseInt(document.getElementById("messengingForm").contact.value);w.forEach(a=>{a.contact===n&&(e=s+1,t=a),s++}),void 0===e?(0,a.yd)("toastAlert2","Not in the list",3e3):(0,a.yd)("toastAlert1","".concat(t.name," at position ").concat(e," in the list"),4e3)}},type:"text",class:"button1",children:" Get details"})})]})]})})]}),(0,d.jsxs)("div",{style:{background:"#e9e8e8",paddingTop:"5px"},children:[(0,d.jsx)("div",{style:{fontSize:"17px",textAlign:"center",color:"black",fontWeight:"600",background:"white"},dangerouslySetInnerHTML:{__html:b}}),(0,d.jsx)("div",{children:P})]})]})]}),(0,d.jsx)("div",{class:"col-md-3"}),(0,d.jsx)("div",{class:"col-md-3"}),(0,d.jsx)("div",{class:"col-md-3"})]})}),(0,d.jsx)("p",{}),(0,d.jsxs)("div",{class:"row",style:{textAlign:"center",padding:"20px",fontSize:"15px"},children:[(0,d.jsx)("div",{class:"col-md-3"}),(0,d.jsx)("div",{class:"col-md-6",children:(0,d.jsxs)("div",{style:{padding:"3px"},children:["Share to WhatsApp friends or Groups ",(0,d.jsx)("br",{})," ",(0,d.jsx)("a",{style:{color:"green"},href:le,children:(0,d.jsxs)("span",{class:"button1",children:[(0,d.jsx)("span",{class:"fa fa-whatsapp"})," Share this Register"]})})]})}),(0,d.jsx)("div",{class:"col-md-3"})]})]})}const h=g}}]);
//# sourceMappingURL=9840.00dd6b51.chunk.js.map