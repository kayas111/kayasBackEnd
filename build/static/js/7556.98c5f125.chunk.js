"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[7556],{57556:(e,s,t)=>{t.r(s),t.d(s,{FoodDeliveryRequests:()=>l,default:()=>d});var n=t(65043),i=t(66756),o=t(70579);function l(){const[e,s]=(0,n.useState)(""),[t,l]=(0,n.useState)("Loading requests......");let d=0,r=0;async function c(){await fetch("/fooddeliveryrequests").then((e=>e.json())).then((async e=>{if(r=e.length,r>d&&((0,i.yd)("toastAlert1","New deliveries available",1e4),d=r),0===e.length)l("No requests yet."),(0,i.yd)("toastAlert2","No requests yet",4e3);else{e.reverse();let s=e.length;l(e.map((e=>(s--,(0,o.jsx)("div",{style:{padding:"5px"},children:(0,o.jsxs)("div",{style:{border:"1px solid orange",padding:"5px"},children:[(0,o.jsxs)("div",{style:{fontWeight:"600",fontSize:"17px",borderBottom:"1px solid grey"},children:[s+1,". ",e.origin]}),(0,o.jsxs)("div",{children:["Description: ",e.desc]}),(0,o.jsxs)("div",{children:["Deliver to: ",e.location]}),(0,o.jsxs)("div",{children:["Room: ",e.room]}),(0,o.jsxs)("div",{children:["Name: ",e.name]}),(0,o.jsxs)("div",{children:["Contact: 0",e.contact]})]})}))))),setInterval((()=>{c()}),5e4)}}))}return(0,n.useEffect)((()=>{c()}),[]),(0,o.jsxs)("div",{style:{padding:"5px"},class:"row",children:[(0,o.jsx)("div",{class:"col-md-3"}),(0,o.jsxs)("div",{class:"col-md-6",children:[(0,o.jsx)("div",{class:"pageLabel",children:"Delivery requests"}),(0,o.jsx)("p",{}),(0,o.jsxs)("form",{method:"post",id:"turnOnFoodDeliveryForm",children:[(0,o.jsxs)("div",{class:"mb-3",children:[(0,o.jsx)("div",{class:"formInputLabel",children:"Response message if service is off"}),(0,o.jsx)("textarea",{rows:3,type:"text",class:"form-control",autoComplete:"off",name:"notice"})]}),(0,o.jsx)("div",{style:{padding:"3px",color:"orange",fontWeight:"600"},children:e}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,o.jsx)("div",{style:{padding:"5px"},children:(0,o.jsx)("div",{class:"button1",onClick:()=>{let e={task:"turnFoodDeliveryServiceOnOff"};fetch("/getControls").then((e=>e.json())).then((t=>{!0===t[0].foodDeliveryControls.deliveryServiceIsOn?s("Turning off....."):s("Turning on....."),fetch("/updateControls",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{s(e.msg)}))}))},children:"Turn food delivery service on/off"})}),(0,o.jsx)("div",{style:{padding:"5px"},children:(0,o.jsxs)("div",{onClick:()=>{if(Array.from(document.getElementById("turnOnFoodDeliveryForm").notice.value.trim()).length<2)(0,i.yd)("toastAlert2","Type a comment",4e3);else{let e={task:"updateFoodDeliveryServiceNotice",notice:document.getElementById("turnOnFoodDeliveryForm").notice.value.trim()};s("Setting new notice....."),fetch("/updateControls",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{s(e.msg)}))}},class:"button1",children:[(0,o.jsx)("span",{class:"fa fa-save"})," Set message"]})})]}),(0,o.jsx)("p",{})]}),(0,o.jsx)("p",{}),(0,o.jsx)("div",{style:{fontSize:"20px",padding:"8px",textAlign:"center",fontWeight:"600"},children:"Delivery requests"}),(0,o.jsx)("div",{children:t})]}),(0,o.jsx)("div",{class:"col-md-3"})]})}const d=l}}]);
//# sourceMappingURL=7556.98c5f125.chunk.js.map