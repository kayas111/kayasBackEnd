"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[406],{9406:(e,t,s)=>{s.r(t),s.d(t,{SendFreeSms:()=>d,default:()=>l});var n=s(5043),r=s(5323),o=s(579);function d(e){let t=(0,r.g)(),[s,d]=(0,n.useState)(130),[l,a]=(0,n.useState)(""),[i,c]=(0,n.useState)(0),[m,p]=(0,n.useState)(0),[u,g]=(0,n.useState)(""),[y,h]=(0,n.useState)(""),[v,S]=(0,n.useState)(""),[x,f]=(0,n.useState)("0"),[j,F]=(0,n.useState)("");return(0,n.useEffect)((()=>{NaN===parseInt(t.sponsor)?a("<div style='color:red;font-size:25px'>This account does not exist</div>"):fetch("/verifyUser",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(t.sponsor),pin:"11111"})}).then((e=>e.json())).then((e=>{!1===e.registered?a("<div style='color:red;font-size:25px'>This account does not exist</div>"):!0===e.registered&&fetch("/getTradingDetails/".concat(parseInt(t.sponsor))).then((e=>e.json())).then((e=>{let t=e[0];a(t.freeSmsObj.freeSmsNotice),p(t.accBal/50),h(t.contact),g(t.freeSmsObj.freeSmsUsers.length),1===t.freeSmsObj.allowFreeSmsSending?S("Yes"):S("No")}))}))}),[]),(0,n.useEffect)((()=>{fetch("/getTradingDetails/".concat(parseInt(t.sponsor))).then((e=>e.json())).then((e=>{let t=e[0];p(t.accBal/50)}))}),[i]),(0,o.jsxs)("div",{style:{padding:"5px"},children:[(0,o.jsxs)("div",{class:"row",children:[(0,o.jsx)("div",{class:"col-md-3"}),(0,o.jsx)("div",{class:"col-md-6",children:(0,o.jsx)("div",{style:{padding:"10px"},children:(0,o.jsxs)("form",{id:"sendFreeSmsForm",children:[(0,o.jsx)("div",{style:{paddingBottom:"8px"},children:(0,o.jsxs)("div",{class:"formLabel",children:["Send Free SMS",(0,o.jsxs)("div",{style:{paddingTop:"0px",fontSize:"10px"},children:[" ",(0,o.jsx)("span",{style:{fontSize:"15px"},children:u})," people have sent SMS through this, you too can send. "]})]})}),(0,o.jsx)("div",{style:{color:"red",padding:"5px",fontSize:"17px"},dangerouslySetInnerHTML:{__html:l}}),(0,o.jsxs)("div",{style:{padding:"5px",paddingTop:"15px"},children:["No. of SMS left: ",(0,o.jsx)("span",{style:{color:"red"},children:m})]}),(0,o.jsxs)("div",{class:"mb-3",children:[(0,o.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"receipient",placeholder:"To: Enter contact to send to (10 digits)"})," ",(0,o.jsx)("br",{}),(0,o.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"sender",placeholder:"From: Enter your contact (10 digits)"}),(0,o.jsx)("br",{}),(0,o.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"name",placeholder:"Enter your first name e.g Charles",onChange:()=>{d(130-Array.from(document.getElementById("sendFreeSmsForm").name.value.trim()).length)}}),(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"right"},class:"col-12",children:(0,o.jsx)("div",{class:"btn btn-warning btn-sm",onClick:()=>{document.getElementById("sendFreeSmsForm").smsMessage.value=""},children:"Clear message"})}),(0,o.jsxs)("div",{style:{padding:"3px"},children:[(0,o.jsx)("span",{style:{color:"red"},children:x})," out of ",s," characters maximum"]}),(0,o.jsx)("textArea",{rows:"5",type:"text",class:"form-control",autoComplete:"off",name:"smsMessage",placeholder:"Type SMS here. Your name and contact will automatically be added to the message",onChange:()=>{f(Array.from(document.getElementById("sendFreeSmsForm").smsMessage.value.trim()).length)}})]}),(0,o.jsx)("div",{style:{fontSize:"12px"}}),(0,o.jsx)("div",{style:{padding:"10px",fontSize:"15px",textAlign:"center"},dangerouslySetInnerHTML:{__html:j}}),(0,o.jsx)("div",{class:"row",children:(0,o.jsxs)("div",{class:"row col-12",children:[(0,o.jsxs)("div",{class:"col-6",children:[(0,o.jsx)("div",{style:{textAlign:"center"},children:"Allowed to send SMS?"}),(0,o.jsx)("div",{style:{color:"red",textAlign:"center",fontSize:"18px"},dangerouslySetInnerHTML:{__html:v}})]}),(0,o.jsxs)("div",{class:"col-6",children:[" ",(0,o.jsx)("div",{style:{borderRadius:"18px"},onClick:()=>{Array.from(document.getElementById("sendFreeSmsForm").receipient.value.trim()).length<10||Array.from(document.getElementById("sendFreeSmsForm").receipient.value.trim()).length>10?F("<div style='color:red;'>Enter 10 digits for receipient's contact ......</div>"):Array.from(document.getElementById("sendFreeSmsForm").sender.value.trim()).length<10||Array.from(document.getElementById("sendFreeSmsForm").sender.value.trim()).length>10?F("<div style='color:red;'>Enter 10 digits for sender's contact......</div>"):Array.from(document.getElementById("sendFreeSmsForm").name.value.trim()).length<2?F("<div style='color:red;'>Please enter your name......</div>"):Array.from(document.getElementById("sendFreeSmsForm").smsMessage.value.trim()).length<1?F("<div style='color:red;'>Enter a message..........</div>"):Array.from(document.getElementById("sendFreeSmsForm").smsMessage.value.trim()).length>s?F("<div style='color:red;'>Your message is longer than ".concat(s," characters, please reduce ......</div>")):m<0?F("<div style='color:red;'>No SMS left. Contact 0".concat(parseInt(t.sponsor)," to top up more SMS</div>")):"No"===v?F("<div style='color:red;'>Not allowed to send free SMS. Contact 0".concat(parseInt(t.sponsor)," to permit you</div>")):(F("<div style='color:green;'>Sending........</div>"),fetch("/verifyUser",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:y,pin:"11111"})}).then((e=>e.json())).then((e=>{if(!1===e.registered)F("<div style='color:red;'>This account does not exist.</div>");else{let e={method:"sendFreeSmsMessage",argsObj:{sponsor:y,number:"256"+parseInt(document.getElementById("sendFreeSmsForm").receipient.value.trim()),senderName:document.getElementById("sendFreeSmsForm").name.value.trim(),senderContact:parseInt(document.getElementById("sendFreeSmsForm").sender.value.trim()),senderid:"0"+parseInt(document.getElementById("sendFreeSmsForm").sender.value.trim()),message:document.getElementById("sendFreeSmsForm").smsMessage.value.trim()+" (".concat(document.getElementById("sendFreeSmsForm").name.value.trim()," 0").concat(parseInt(document.getElementById("sendFreeSmsForm").sender.value.trim()),") #SMS by Kayas")}};fetch("/sendSmsMessage",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{1===e.success?(F("<div style='color:green;'>Message sent <span class='fa fa-check'></span> to ".concat(document.getElementById("sendFreeSmsForm").receipient.value," </div>")),c(i+=1),document.getElementById("sendFreeSmsForm").receipient.value=""):F("<div style='color:red;'>Error must have occured!</div>")}))}})))},type:"text",class:"btn btn-sm btn-success hovereffect",children:"Send SMS"})]})]})})]})})}),(0,o.jsx)("div",{class:"col-md-3"})]}),(0,o.jsx)("div",{style:{paddingTop:"40px"}})]})}const l=d}}]);
//# sourceMappingURL=406.d43ca9bc.chunk.js.map