"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[9519],{9519:(e,s,t)=>{t.r(s),t.d(s,{AudienceComp:()=>l,default:()=>r});var n=t(35323),a=t(65043),o=t(35407),c=t(66756),d=t(76273),i=t(70579);function l(){const[e]=(0,o.lT)(["user"]);let s=(0,n.g)();s.audienceName=(0,c.WH)(s.audienceName);let[t,l]=(0,a.useState)({}),{contact:r,categoryId:u}=(0,n.g)(),[m,h]=(parseInt(r),parseInt(u),(0,a.useState)("")),[g,p]=(0,a.useState)({}),[x,f]=(0,a.useState)(""),[j,v]=(0,a.useState)("");const[y,b]=(0,a.useState)("0"),[S,A]=(0,a.useState)(""),[w,N]=(0,a.useState)(0),[P,C]=(0,a.useState)("");return(0,a.useEffect)(()=>{let e={method:"getAudience",args:{audienceName:s.audienceName}};(0,c.L4)("/AudiencePostRequest",e).then(e=>{if(0==e.length)t.audiencePresent=!1,l(t);else{let n=e[0];A(n),t.audiencePresent=!0,h(s.audienceName),f("".concat(n.followers.length," followers"))}})},[w]),(0,i.jsxs)("div",{class:"row",children:[(0,i.jsx)("div",{class:"col-md-3"}),(0,i.jsxs)("div",{class:"col-md-6",children:[" ",(0,i.jsx)("div",{class:"componentPadding",children:1==t.audiencePresent?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{class:"pageLabel",children:m}),(0,i.jsx)("div",{class:"light",style:{paddingTop:"3px"},children:(0,i.jsx)("span",{class:"btn hoverEffect1",style:{padding:"3px",fontSize:"12px",color:"orange",background:"black",borderRadius:"4px"},children:x})}),void 0!==e.user&&parseInt(e.user.contact)==parseInt(S.contact)?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{}),(0,i.jsxs)("form",{id:"audiencePostMessageForm",method:"post",children:[(0,i.jsx)("div",{style:{paddingBottom:"5px"},children:(0,i.jsx)("div",{class:"bold",children:"Send message"})}),(0,i.jsxs)("div",{class:"mb-3",children:[(0,i.jsxs)("div",{style:{fontSize:"12px",paddingTop:"5px",paddingBottom:"5px"},children:["Maximum message length = ",(0,i.jsx)("span",{style:{color:"red",fontSize:"15px"},children:150})," characters.",(0,i.jsx)("br",{}),(0,i.jsx)("span",{style:{color:"red",fontSize:"15px"},children:y})," characters typed."]}),(0,i.jsx)("p",{})," ",(0,i.jsx)("textarea",{type:"text",class:"form-control",autoComplete:"off",name:"msg",required:!0,rows:"6",placeholder:"Type message",onChange:()=>{b(Array.from(document.getElementById("audiencePostMessageForm").msg.value.trim()).length)}})]}),(0,i.jsx)("div",{class:"status",children:P}),(0,i.jsx)("div",{class:"btn btn-success fullButtonWidth",onClick:()=>{let e=document.getElementById("audiencePostMessageForm"),t=(0,c.WH)(e.msg.value);if(Array.from(t).length<1)(0,c.yd)("toastAlert2","Type a message",3e3);else if(Array.from(t).length>150)(0,c.yd)("toastAlert2","Message is longer than ".concat(150," characters"),3e3);else if(1==window.confirm("Select 'OK' to confirm and send the message")){(0,c.yd)("toastAlert1","Please wait for confirmation message......",6e3);let e={method:"sendMessageToAudience",args:{message:t+" #KayasSMS",audienceName:s.audienceName,audienceSmsCost:d.vL}};(0,c.L4)("/AudiencePostRequest",e).then(e=>{1==e.NoEligibleReceipients?((0,c.yd)("toastAlert2","No follower has enough credit on their account to receive an SMS message.",7e3),C("")):1==e.success?((0,c.yd)("toastAlert1","Message sent to ".concat(e.NoOfReceipients," receipient(s)"),6e3),C("")):((0,c.yd)("toastAlert2","Not sent. Try again or contact Kayas 0703852178",6e3),C(""))})}},children:"Send"})]}),(0,i.jsx)("p",{}),(0,i.jsx)("div",{class:"btn btn-danger fullButtonWidth",children:"Delete audience"})]}):(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{paddingTop:"30px"}}),(0,i.jsx)("div",{class:"light",children:"Follow and make sure you have some credit on your Kayas account to be able to receive SMS updates on your number. Tap menu to deposit to your account."}),(0,i.jsx)("p",{}),void 0==e.user?(0,i.jsx)(c.t7,{message:"Log in to be able to follow this audience"}):void 0==S.followers.find(s=>s.contact==e.user.contact)?(0,i.jsx)("div",{class:"btn btn-success fullButtonWidth",onClick:()=>{let{name:t,contact:n}=e.user;(0,c.L4)("/AudiencePostRequest",{method:"followAnAudience",args:{audienceName:s.audienceName,name:t,contact:n}}).then(e=>{1==e.modifiedCount&&N(e=>e+1)})},children:"Follow"}):(0,i.jsx)("div",{class:"btn btn-danger fullButtonWidth",onClick:()=>{let{name:t,contact:n}=e.user;(0,c.L4)("/AudiencePostRequest",{method:"unfollowAnAudience",args:{audienceName:s.audienceName,name:t,contact:n}}).then(e=>{1==e.modifiedCount&&N(e=>e+1)})},children:"Unfollow"}),(0,i.jsx)("p",{}),(0,i.jsx)(c.t7,{message:"Advise more friends of similar interests to follow this audience too"})]})]}):0==t.audiencePresent?(0,i.jsx)("div",{children:(0,i.jsx)(c.t7,{message:"Audience does not exists"})}):void 0})]}),(0,i.jsx)("div",{class:"col-md-3"})]})}const r=l}}]);
//# sourceMappingURL=9519.50feb15a.chunk.js.map