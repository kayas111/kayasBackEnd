{"version":3,"file":"static/js/4470.4bf4b01b.chunk.js","mappings":"6RAYAA,EAAAA,EAASC,cAAc,CACrBC,OAAQ,0CACRC,WAAY,8BACZC,UAAW,cACXC,cAAe,4BAGHL,EAAAA,EAASM,UACFC,MAGd,SAASC,EAA4BC,EAAUC,GACpDC,MAAM,gCAADC,OAAiCH,EAAS,KAAAG,OAAIF,IAAcG,KAAKC,GAAKA,EAAIC,QAAQF,KAAKG,MAI9F,CAEO,SAASC,IACZ,IAAIC,GAAcC,EAAAA,EAAAA,KAElB,MAAOC,EAAQC,EAAUC,IAAcC,EAAAA,EAAAA,IAAW,CAAC,SAC/B,8BAADX,OAA+BM,EAAcM,IAC9D,MAAMC,EAAOC,IAAWC,EAAAA,EAAAA,UAAS,KAC3BC,EAASC,IAAaF,EAAAA,EAAAA,UAAS,KAC/BG,EAAiBC,IAAqBJ,EAAAA,EAAAA,UAAS,KAC/CK,EAAcC,IAAkBN,EAAAA,EAAAA,UAAS,KACzCO,EAAqBC,IAAyBR,EAAAA,EAAAA,UAAS,KACvDS,EAAYC,IAAgBV,EAAAA,EAAAA,UAAS,iIACrCW,EAAeC,IAAmBZ,EAAAA,EAAAA,UAAS,KAC3Ca,EAAiBC,IAAqBd,EAAAA,EAAAA,UAAS,KAC/Ce,EAAaC,IAAiBhB,EAAAA,EAAAA,UAAS,KACvCiB,EAAmBC,IAAuBlB,EAAAA,EAAAA,UAAS,KACnDmB,EAAWC,IAAepB,EAAAA,EAAAA,UAAS,KAClCqB,EAAQC,IAAYtB,EAAAA,EAAAA,aACpBuB,EAAQC,IAAYxB,EAAAA,EAAAA,aACpByB,EAAOC,IAAW1B,EAAAA,EAAAA,aAClB2B,EAAOC,IAAW5B,EAAAA,EAAAA,aAEnB6B,EAAeC,IAAmB9B,EAAAA,EAAAA,UAAS+B,EAAAA,KAEjDC,EAAcC,IAAkBjC,EAAAA,EAAAA,UAAS,KACnCkC,EAAiBC,IAAqBnC,EAAAA,EAAAA,UAAS,KAChDoC,EAAiBC,IAAqBrC,EAAAA,EAAAA,UAAS,IAEpD,IAAIsC,EAAqB,EAAkC,yBAADrD,OAA0BkB,EAAiBoC,OAAM,8CAAAtD,OAA6CuD,OAAOC,SAASC,OAAM,+BAAAzD,OAA8BM,EAAcM,GAAE,UAAAZ,OAASoB,GACtM,wBAADpB,OAAyB0D,mBAAmB,IAAD1D,OAAKkB,EAAiBoC,OAAM,8CAAAtD,OAA6CuD,OAAOC,SAASC,OAAM,+BAAAzD,OAA8BM,EAAcM,GAAE,UAAAZ,OAASoB,KAKpO,KACCuC,EAAAA,EAAAA,WAAUC,gBAGD7D,MAAM,eAADC,OAAgBM,EAAcM,KAAMX,KAAKC,GAAKA,EAAIC,QAAQF,KAAK4D,IAChEpB,EAAUoB,GAGjB,GAA6B,IAA1BA,EAAiBC,OAClB3C,EAAoB,qDACpB4C,EAAAA,EAAAA,IAAW,cAAc,oCAAoC,KAC7DtC,EAAe,4GACZ,CAGJ1B,MAAM,eAADC,OAAgBM,EAAcM,KAAMX,KAAKC,GAAKA,EAAIC,QAAQF,KAAK2D,UAEtC,IAA1BC,EAAiBC,cAEX/D,MAAM,mBAAmBE,KAAKG,GAE5BA,EAAKD,QAASF,KAAK2D,UACxBxD,EAAK4D,UACY,IAAd5D,EAAK0D,OACNjB,EAAkB,gFAKlBN,QACI0B,EAAAA,EAAAA,IAAwB7D,EAAKE,EAAcM,SAmBvD,IAAIsD,EAAgBL,EAAiB,GACrC1B,EAAc0B,EAAiB,IAE/B9B,EAAgB8B,EAAiB,GAAGM,mBAAmBL,QAEvDT,EAAqB,EACrBpB,EAAsB4B,EAAiB,GAAGO,aAC1CjD,EAAoB0C,EAAiB,GAAGQ,WAC1ChD,EAAiB,cAADrB,OAAe6D,EAAiB,GAAGS,SACnD/C,EAAwB,IAADvB,OAAK6D,EAAiB,GAAGU,UAChD9C,EAAeoC,EAAiB,GAAGW,MACC,SAA/BX,EAAiB,GAAGY,UACrBvB,EAAoB,0CAKUwB,IAA7Bb,EAAiB,GAAGhD,OACrBC,EAAU,GAEtBA,EAAU+C,EAAiB,GAAGhD,aAIkB6D,IAAnCR,EAAgBf,kBACjBC,EAAoBc,EAAgBf,mBAOhDwB,EAAAA,EAAAA,IAAkBT,EAAgBK,SAAStE,KAAKG,IAGS,GAF9CA,EAEDwE,oBAAoBC,0BAC5BjF,EAA4BsE,EAAgBtD,GAAG,GAG7CJ,EAAQsE,MAEZH,EAAAA,EAAAA,IAAkBnE,EAAQsE,KAAKP,SAAStE,KAAKG,IAC7C,IAAI0E,EAAK1E,EACN0E,EAAKC,OAAOC,EAAAA,GAEoI,GAA9IzB,OAAO0B,QAAQ,mEAADjF,OAAoEgF,EAAAA,GAAe,6CACpGzB,OAAOC,SAAS0B,KAAK,iBAEpB3B,OAAOC,SAAS0B,KAAK,iCAKnBJ,EAAKP,SAASL,EAAgBK,WAG/BY,EAAAA,EAAAA,IAA0BL,EAAKP,QAAQS,EAAAA,IACvCpF,EAA4BsE,EAAgBtD,GAAG,MAQzCwE,WAAW,KACsE,GAA7E7B,OAAO0B,QAAQ,8DAChBI,EAAAA,EAAAA,IAAM7E,EAAQC,GAEf8C,OAAOC,SAAS0B,KAAK,kCAErB,MAUJ,KA2CA,CAAC5E,EAAcM,IAEtB,CAAC,MAAM0E,GAEP,CAEQ,OAEGC,EAAAA,EAAAA,MAAA,OAAKC,MAAM,mBAAkBC,SAAA,CAEDnD,GAC5BiD,EAAAA,EAAAA,MAAA,OAAKC,MAAM,MAAKC,SAAA,EACVC,EAAAA,EAAAA,KAAA,OAAKF,MAAM,cAEXE,EAAAA,EAAAA,KAAA,OAAMF,MAAM,cAkEZE,EAAAA,EAAAA,KAAA,OAAKF,MAAM,iBAKVE,EAAAA,EAAAA,KAAA,OAAKF,MAAM,MAAKC,SAEd7C,MAuBf,CAED,S","sources":["pages/pubarticles/PubArticleComp.js"],"sourcesContent":["import { VerifyRegistrationAndPin,ToastAlert,ListArticles,ListOtherAuthorArticles,ListOtherArticles, IsLoggedIn, LogIn, GetTradingDetails, DebitTraderAccountBalance, SuspenseComponent} from '../Functions';\r\nimport firebase from 'firebase/compat/app';\r\nimport { useCookies } from 'react-cookie';\r\nimport 'firebase/compat/storage';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nimport { useParams } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport React, {useEffect,useState} from 'react';\r\nimport { ArticlesNav} from './PubArticleHome';\r\n\r\nimport {kayasDomainUrl,articleViewCost} from '../../Variables'\r\n\r\nfirebase.initializeApp({\r\n  apiKey: \"AIzaSyCf0LC-eL1pJ2Rpvh59ukbg5OUFm6IcrEA\",\r\n  authDomain: \"kayas-42321.firebaseapp.com\",\r\n  projectId: \"kayas-42321\",\r\n  storageBucket: \"kayas-42321.appspot.com\"\r\n\r\n})\r\nconst storage=firebase.storage()\r\nconst bucket=storage.ref()\r\n\r\n\r\nexport function UpdateNumberOfArticleVisits(articleId,valueToAdd){\r\n  fetch(`/updateNumberOfArticleVisits/${articleId}/${valueToAdd}`).then(res=>res.json()).then(resp=>{\r\n    ;\r\n  }) \r\n\r\n}\r\n\r\nexport function PubArticleComp(){//clientcomponent\r\n    let articleParams=useParams()\r\n    \r\n    const [cookies,setCookie,removeCookie]=useCookies(['user'])\r\n      let formActionUrl=`/pages/pubarticles/article/${articleParams.id}`\r\n      const[visits,setVisits]=useState('')\r\n      const[opinions,setOpinions]=useState('')\r\n      const[articleHeadline1,setArticleHeadline1]=useState('')\r\n      const[articleAuthor,setArticleAuthor]=useState('')\r\n      const[articleAuthorContact,setArticleAuthorContact]=useState('')\r\n      const[articleBody,setArticleBody]=useState('<div style=\"font-size:18px;color:black;background:orange;padding:30px;text-align:center;\">Please wait..........<p></p></div>')\r\n      const[opinionsStatus,setOpinionsStatus]=useState('')\r\n      const[submissionStatus,setSubmissionStatus]=useState('')\r\n      const[opinionsNumb,setOpinionsNumb]=useState('')\r\n      const[articleInstitution,setArticleInstitution]=useState('')\r\n      const[articleDoc,setArticleDoc]=useState('')\r\n      const [details,setDetails]=useState()\r\n      const [article,setArticle]=useState()\r\n      const [array1,setArray1]=useState()\r\n      const [array2,setArray2]=useState()\r\n\r\n      const[authorArticles,setAuthorArticles]=useState(SuspenseComponent)\r\n\r\nconst[otherArticles,setOtherArticles]=useState('')\r\n      const[verificationTick,setVerificationTick]=useState('')\r\n     const[imageDownLoadUrl,setImageDownLoadUrl]=useState('')\r\n      \r\n      let opinionsReceivedFlag=0,whatsappPublicArticleShareLink2=`whatsapp://send?text=*${articleHeadline1.trim()}*%0ASee details below. Tap the link:%0A%0A${window.location.origin}/pages/pubarticles/article/${articleParams.id}%0A%0A${articleAuthor}`,style={padding:\"5px\"},\r\n      whatsappPublicArticleShareLink=`whatsapp://send?text=${encodeURIComponent(`*${articleHeadline1.trim()}*%0ASee details below. Tap the link:%0A%0A${window.location.origin}/pages/pubarticles/article/${articleParams.id}%0A%0A${articleAuthor}`)}`\r\n      \r\n     \r\n      \r\n      //return statement\r\n try{\r\n  useEffect(async ()=>{\r\n    \r\n        \r\n    await  fetch(`/pubarticle/${articleParams.id}`).then(res=>res.json()).then(articleDataArray=>{\r\n               setArray1(articleDataArray)\r\n               let array5=articleDataArray\r\n\r\n        if(articleDataArray.length===0){\r\n          setArticleHeadline1(\"This article does not exist or has been deleted.\")\r\n          ToastAlert('toastAlert2','Does not exit or has been deleted',3000)\r\n          setArticleBody('<div style=\"font-size:20px;color:red;\">This article does not exist or has been deleted.<p></p></div>')\r\n        }else{\r\n         \r\n\r\n         fetch(`/pubarticle/${articleParams.id}`).then(res=>res.json()).then(async (articleDataArray)=>{\r\n               \r\n          if(articleDataArray.length===0){\r\n           }else{\r\n            await  fetch('/getAllArticles').then(resp=>{\r\n          \r\n              return resp.json()}).then(async (resp)=>{\r\n                resp.reverse()\r\n                if(resp.length===0){\r\n                  setAuthorArticles(`<div style='color:red;text-align:center;'>These Articles do not exist.</div>`) \r\n                \r\n                }else{\r\n                  \r\n                \r\n                  setArticle(\r\n                await ListOtherAuthorArticles(resp,articleParams.id)\r\n                )\r\n    \r\n                }\r\n    \r\n                \r\n    \r\n    \r\n                \r\n              })  \r\n    \r\n           }})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n          let articleDocument=articleDataArray[0]\r\n          setArticleDoc(articleDataArray[0])\r\n          \r\n          setOpinionsNumb(articleDataArray[0].pubArticleOpinions.length)\r\n          \r\n          opinionsReceivedFlag=1\r\n          setArticleInstitution(articleDataArray[0].institution)\r\n          setArticleHeadline1(articleDataArray[0].headline1)\r\n        setArticleAuthor(`Created by ${articleDataArray[0].author}`)\r\n        setArticleAuthorContact(`0${articleDataArray[0].contact}`)\r\n        setArticleBody(articleDataArray[0].body)\r\n          if(articleDataArray[0].verified==='true'){ \r\n            setVerificationTick('<span class=\"fa fa-check\"></span>')\r\n          }else{\r\n            ;\r\n          }\r\n\r\n          if(articleDataArray[0].visits===undefined){\r\n            setVisits(0)\r\n          }else{\r\nsetVisits(articleDataArray[0].visits)\r\n\r\n          }\r\n\r\n          if(articleDocument.imageDownLoadUrl===undefined){;}else{\r\n            setImageDownLoadUrl(articleDocument.imageDownLoadUrl)\r\n          }\r\n          \r\n         \r\n//            UpdateNumberOfArticleVisits(articleDocument.id,1) \r\n\r\n          \r\nGetTradingDetails(articleDocument.contact).then(resp=>{\r\nlet trader=resp\r\n\r\nif(trader.permissionTokensObj.displayArticlesAtFreeCost==true){\r\n  UpdateNumberOfArticleVisits(articleDocument.id,1)\r\n  ;\r\n}else{\r\n if(cookies.user){\r\n  \r\nGetTradingDetails(cookies.user.contact).then(resp=>{\r\nlet user=resp\r\nif(user.accBal<articleViewCost){\r\n\r\n  if(window.confirm(`Your Kayas account balance is low. Click \"OK\" to top up atleast ${articleViewCost}/= and be able to read this information.`)==true){\r\n  window.location.href=`/pages/deposit`\r\n }else{\r\n   window.location.href='/pages/pubarticles/allarticles'\r\n   \r\n }\r\n }else{\r\n   \r\n  if(user.contact==articleDocument.contact){;\r\n  //Dont add article visits when article author views own article\r\n  }else{\r\n    DebitTraderAccountBalance(user.contact,articleViewCost)\r\n    UpdateNumberOfArticleVisits(articleDocument.id,1)\r\n  }\r\n  \r\n }\r\n})\r\n\r\n\r\n          }else{\r\n          setTimeout(()=>{\r\n           if(window.confirm(`Click 'OK' to login and be able to read this information.`)==true){\r\n             LogIn(cookies,setCookie)\r\n           }else{\r\n            window.location.href='/pages/pubarticles/allarticles'\r\n           }\r\n          },1000)\r\n          }\r\n\r\n\r\n\r\n}\r\n})\r\n\r\n\r\n      \r\n        }\r\n       \r\n        \r\n      })\r\n       \r\n    \r\n\r\n  // await  fetch(`/pubarticle/${articleParams.id}`).then(res=>res.json()).then(async (articleDataArray)=>{\r\n               \r\n  //       if(articleDataArray.length===0){\r\n  //        }else{\r\n  //         await  fetch('/getAllArticles').then(resp=>{\r\n        \r\n  //           return resp.json()}).then(async (resp)=>{\r\n  //             resp.reverse()\r\n  //             if(resp.length===0){\r\n  //               setAuthorArticles(`<div style='color:red;text-align:center;'>These Articles do not exist.</div>`) \r\n              \r\n  //             }else{\r\n                \r\n              \r\n  //          setAuthorArticles(\r\n  //             await ListOtherAuthorArticles(resp,articleParams.id)\r\n  //             )\r\n  \r\n  //             }\r\n  \r\n              \r\n  \r\n  \r\n              \r\n  //           })  \r\n  \r\n  //        }})\r\n\r\n\r\n  \r\n\r\n     \r\n\r\n\r\n\r\n      \r\n      },[articleParams.id])\r\n    \r\n }catch(error){\r\n  \r\n }\r\n     \r\n         return(\r\n             \r\n            <div class=\"componentPadding\">\r\n                                       \r\n                                       {article}\r\n            <div class=\"row\">\r\n                  <div class=\"col-md-3\"></div>\r\n                  \r\n                  <div  class=\"col-md-6\">\r\n                  \r\n\r\n                 {/* <div class=\"articleContainer\">\r\n                  <div class=\"articleContainer2\">\r\n                  <div  style={{paddingBottom:\"0px\",textAlign:\"left\"}}>\r\n            <span style={{color:\"grey\",fontSize:\"11px\"}}>Article {articleParams.id}/{visits}</span>  \r\n          </div>  \r\n          \r\n             <ArticlesNav articleAuthorContact={articleAuthorContact} articleId={articleParams.id}/>\r\n                 \r\n          \r\n          <div class=\"articleHeadline\">{articleHeadline1}</div>\r\n                           <div style={{paddingBottom:\"3px\"}}>\r\n                           <div style={{display:\"flex\",flexWrap:\"wrap\"}}>\r\n                           <div style={style}>\r\n                             <div class=\"button1\"  onClick={\r\n                           ()=>{\r\n                            \r\n                             window.location.href=whatsappPublicArticleShareLink\r\n                            \r\n                           }}><span class=\"fa fa-whatsapp\"></span> Share article</div>\r\n                                        \r\n                             </div>\r\n                                 <div  style={style}>\r\n                               <div> \r\n                             </div> \r\n                             \r\n                             </div>\r\n             \r\n                             \r\n                  \r\n             \r\n             \r\n                             </div> \r\n                             \r\n                             <div style={{padding:\"5px\"}}>\r\n        <div class=\"light\">  {articleAuthor}  {articleAuthorContact} <span dangerouslySetInnerHTML={{__html:verificationTick}}/>\r\n        <div >{articleInstitution}</div>\r\n        </div>\r\n    \r\n    \r\n    </div>\r\n                             </div>     \r\n                                                    \r\n                       \r\n                         \r\n             <div style={{paddingTop:\"2px\"}}><img src={imageDownLoadUrl} class=\" d-block w-100\" /></div>\r\n                       <div style={{paddingTop:\"5px\",fontSize:\"14px\"}}>\r\n                        <div  dangerouslySetInnerHTML={{__html:articleBody}}/>\r\n                        <div>Always keep it Kayas.\r\n                         </div><p></p>\r\n                          \r\n                        </div>\r\n                        \r\n      \r\n             \r\n                  </div>\r\n                 </div> */}\r\n      \r\n\r\n\r\n\r\n                  \r\n                  \r\n                  </div>\r\n                  <div class=\"col-md-3\"></div>\r\n                  \r\n\r\n                  </div>  \r\n                 \r\n                   <div class=\"row\">\r\n                   \r\n                    {authorArticles}\r\n                    \r\n                    \r\n                    </div>\r\n          \r\n                      \r\n          \r\n      \r\n            </div>\r\n              \r\n             \r\n            );\r\n            \r\n            \r\n            \r\n            \r\n           \r\n          \r\n        \r\n      \r\n       //return statement\r\n      \r\n      \r\n      }\r\n    \r\n     export default PubArticleComp"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","storage","ref","UpdateNumberOfArticleVisits","articleId","valueToAdd","fetch","concat","then","res","json","resp","PubArticleComp","articleParams","useParams","cookies","setCookie","removeCookie","useCookies","id","visits","setVisits","useState","opinions","setOpinions","articleHeadline1","setArticleHeadline1","articleAuthor","setArticleAuthor","articleAuthorContact","setArticleAuthorContact","articleBody","setArticleBody","opinionsStatus","setOpinionsStatus","submissionStatus","setSubmissionStatus","opinionsNumb","setOpinionsNumb","articleInstitution","setArticleInstitution","articleDoc","setArticleDoc","details","setDetails","article","setArticle","array1","setArray1","array2","setArray2","authorArticles","setAuthorArticles","SuspenseComponent","otherArticles","setOtherArticles","verificationTick","setVerificationTick","imageDownLoadUrl","setImageDownLoadUrl","opinionsReceivedFlag","trim","window","location","origin","encodeURIComponent","useEffect","async","articleDataArray","length","ToastAlert","reverse","ListOtherAuthorArticles","articleDocument","pubArticleOpinions","institution","headline1","author","contact","body","verified","undefined","GetTradingDetails","permissionTokensObj","displayArticlesAtFreeCost","user","accBal","articleViewCost","confirm","href","DebitTraderAccountBalance","setTimeout","LogIn","error","_jsxs","class","children","_jsx"],"sourceRoot":""}