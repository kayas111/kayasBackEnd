"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[9519],{9519:(e,s,t)=>{t.r(s),t.d(s,{AudienceComp:()=>d,default:()=>r});var n=t(35323),a=t(65043),o=t(35407),c=t(66756),i=t(76273),l=t(70579);function d(){const[e]=(0,o.lT)(["user"]);let s=(0,n.g)();s.audienceName=(0,c.WH)(s.audienceName);let[t,d]=(0,a.useState)({}),{contact:r,categoryId:u}=(0,n.g)(),[m,h]=(parseInt(r),parseInt(u),(0,a.useState)("")),[g,f]=(0,a.useState)({}),[x,p]=(0,a.useState)(""),[y,v]=(0,a.useState)("");const[j,w]=(0,a.useState)("0"),[S,A]=(0,a.useState)(""),[b,N]=(0,a.useState)(0),[P,M]=(0,a.useState)("");return(0,a.useEffect)(()=>{let e={method:"getAudience",args:{audienceName:s.audienceName}};(0,c.L4)("/AudiencePostRequest",e).then(e=>{if(0==e.length)t.audiencePresent=!1,d(t);else{let n=e[0];A(n),t.audiencePresent=!0,h(s.audienceName),p("".concat(n.followers.length," followers"))}})},[b]),(0,l.jsxs)("div",{class:"row",children:[(0,l.jsx)("div",{class:"col-md-3"}),(0,l.jsxs)("div",{class:"col-md-6",children:[" ",(0,l.jsx)("div",{class:"componentPadding",children:1==t.audiencePresent?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{class:"pageLabel",children:m}),(0,l.jsx)("div",{class:"light",style:{paddingTop:"3px"},children:(0,l.jsx)("span",{class:"btn hoverEffect1",style:{padding:"3px",fontSize:"12px",color:"white",background:"black",borderRadius:"2px"},children:x})}),void 0!==e.user&&parseInt(e.user.contact)==parseInt(S.contact)?(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{}),(0,l.jsxs)("form",{id:"audiencePostMessageForm",method:"post",children:[(0,l.jsx)("div",{style:{paddingBottom:"5px"},children:(0,l.jsx)("div",{class:"bold",children:"Send message"})}),(0,l.jsxs)("div",{class:"mb-3",children:[(0,l.jsxs)("div",{style:{fontSize:"12px",paddingTop:"5px",paddingBottom:"5px"},children:["Maximum message length = ",(0,l.jsx)("span",{style:{color:"red",fontSize:"15px"},children:150})," characters.",(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{color:"red",fontSize:"15px"},children:j})," characters typed."]}),(0,l.jsx)("p",{})," ",(0,l.jsx)("textarea",{type:"text",class:"form-control",autoComplete:"off",name:"msg",required:!0,rows:"6",placeholder:"Type message",onChange:()=>{w(Array.from(document.getElementById("audiencePostMessageForm").msg.value.trim()).length)}})]}),(0,l.jsx)("div",{class:"status",children:P}),(0,l.jsx)("div",{class:"btn btn-success fullButtonWidth",onClick:()=>{let e=document.getElementById("audiencePostMessageForm"),t=(0,c.WH)(e.msg.value);if(Array.from(t).length<1)(0,c.yd)("toastAlert2","Type a message",3e3);else if(Array.from(t).length>150)(0,c.yd)("toastAlert2","Message is longer than ".concat(150," characters"),3e3);else if(1==window.confirm("Select 'OK' to confirm and send the message")){(0,c.yd)("toastAlert1","Please wait for confirmation message......",6e3);let e={method:"sendMessageToAudience",args:{message:t+" #KayasSMS",audienceName:s.audienceName,audienceSmsCost:i.vL}};(0,c.L4)("/AudiencePostRequest",e).then(e=>{1==e.NoEligibleReceipients?((0,c.yd)("toastAlert2","No follower has enough credit on their account to receive an SMS message.",7e3),M("")):1==e.NoFollowers?((0,c.yd)("toastAlert2","Audience has no followers. First attain followers then try again",6e3),M("")):1==e.success?((0,c.yd)("toastAlert1","Message sent to ".concat(e.NoOfReceipients," receipient(s)"),6e3),M("")):((0,c.yd)("toastAlert2","Not sent. Try again or contact Kayas 0703852178",6e3),M(""))})}},children:"Send"})]}),(0,l.jsx)("p",{}),(0,l.jsx)("div",{class:"btn btn-danger fullButtonWidth",children:"Delete audience"})]}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{paddingTop:"15px"},class:"light",children:["Follow to receive SMS messages from this audience to your phone number. Each time an SMS reaches your number, ",i.vL,"/= will automatically be deducted from your Kayas account. If your account balance is less than ",i.vL,"/=, you won't receive any SMS message sent to any audience that you follow. Tap menu to deposit to your account if necessary."]}),(0,l.jsx)("p",{}),void 0==e.user?(0,l.jsx)(c.Vx,{message:"Log in to be able to follow this audience"}):void 0==S.followers.find(s=>s.contact==e.user.contact)?(0,l.jsx)("div",{class:"btn btn-success fullButtonWidth",onClick:()=>{(0,c.yd)("toastAlert1","Following......",2e3);let{name:t,contact:n}=e.user;(0,c.L4)("/AudiencePostRequest",{method:"followAnAudience",args:{audienceName:s.audienceName,name:t,contact:n}}).then(e=>{1==e.modifiedCount&&N(e=>e+1)})},children:"Follow"}):(0,l.jsx)("div",{class:"btn btn-danger fullButtonWidth",onClick:()=>{(0,c.yd)("toastAlert2","Unfollowing......",2e3);let{name:t,contact:n}=e.user;(0,c.L4)("/AudiencePostRequest",{method:"unfollowAnAudience",args:{audienceName:s.audienceName,name:t,contact:n}}).then(e=>{1==e.modifiedCount&&N(e=>e+1)})},children:"Unfollow"}),(0,l.jsx)("p",{}),(0,l.jsx)(c.Vx,{message:"Advise more friends of similar interests to follow this audience too"})]})]}):0==t.audiencePresent?(0,l.jsx)("div",{children:(0,l.jsx)(c.Vx,{message:"Audience does not exists"})}):void 0})]}),(0,l.jsx)("div",{class:"col-md-3"})]})}const r=d}}]);
//# sourceMappingURL=9519.38f3b83a.chunk.js.map