"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[250,604,551],{8604:(e,t,s)=>{s.r(t),s.d(t,{AllArticles:()=>l,default:()=>c});s(7890),s(9978);var a=s(5043),r=s(7638),i=s(579);function l(e){const[t,s]=(0,a.useState)((0,i.jsx)(r.aq,{}));return(0,a.useEffect)((async()=>{await fetch("/getAllArticles").then((e=>e.json())).then((async e=>{let t=await(0,r.Ee)(e);s(t)}))}),[]),(0,i.jsx)("div",{children:(0,i.jsx)("div",{class:"row",children:t})})}const c=l},4250:(e,t,s)=>{s.r(t),s.d(t,{CreateArticle:()=>h,default:()=>f});var a=s(7638),r=s(8289),i=s(9978),l=s(5407),c=s(2551),n=(s(8604),s(7890),s(5043)),o=s(7977),d=s(8345),p=s.n(d),m=s(579);r.A.initializeApp({apiKey:"AIzaSyCf0LC-eL1pJ2Rpvh59ukbg5OUFm6IcrEA",authDomain:"kayas-42321.firebaseapp.com",projectId:"kayas-42321",storageBucket:"kayas-42321.appspot.com"});const u=r.A.storage().ref();function h(){const[e,t,s]=(0,l.lT)(["user"]),[r,d]=(0,n.useState)(""),[h,f]=(0,n.useState)(""),[y,g]=(0,n.useState)(0),[x,j]=(0,n.useState)("Image appears here");function v(){d("<div style='color:green;'>Creating please wait ......</div>"),fetch("/getTradingDetails/".concat(parseInt(e.user.contact))).then((e=>e.json())).then((e=>{let t=e[0];t.permissionTokensObj.createPubArticleTokens<1||t.permissionTokensObj.createPubArticleTokens>1?fetch("/createArticle",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({headline1:document.getElementById("articleCreateForm")[0].value.trim(),institution:t.institution.trim(),author:t.name.trim(),contact:parseInt(t.contact),body:h.trim()})}).then((e=>e.json())).then((e=>{let t=e;if(1===e.limitReached)(0,a.yd)("toastAlert2","Maximum number of articles reached. Delete some",5e3);else{let s=document.querySelector("#pubArticleImageInputElement").files[0];if(document.getElementById("articleCreateForm").articleHeadline1.value="",void 0===s)window.location.href="/pages/pubarticles/article/".concat(e.id),(0,a.yd)("toastAlert1","Successful. Please wait....",3e3);else{let r=0;setInterval((()=>{94!==r&&(r+=1,g(r))}),400),d("<div style='color:green;'>Saving image.......</div>");let i="pubArticleImage_".concat(t.id),l=u.child("pubArticleImages/".concat(i));l.put(s).then((s=>{l.getDownloadURL({orderBy:"generation",limitTo:1}).then((s=>{let r=s;fetch("/addPubArticleImageUrlToArticle",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(t.contact),articleId:t.id,imageDownLoadUrl:r})}).then((t=>{d("<div style='color:green;'>Image saved</div>"),window.location.href="/pages/pubarticles/article/".concat(e.id),(0,a.yd)("toastAlert1","Successful. Please wait....",3e3)}))}))}))}}})):0===t.permissionTokensObj.createPubArticleTokens?(0,a.yd)("toastAlert2","Maximum number of articles reached. Delete some",4e3):(0,a.yd)("toastAlert2","Error, try again",3e3)}))}return(0,n.useEffect)((()=>{(0,a.Qb)(e)}),[]),(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{class:"col-md-3"}),(0,m.jsxs)("div",{class:"col-md-6",children:[(0,m.jsx)(i.dV,{}),(0,m.jsx)("div",{style:{padding:"8px"},children:(0,m.jsxs)("form",{method:"post",id:"articleCreateForm",action:"#",children:[(0,m.jsx)("div",{style:{paddingBottom:"8px"},children:(0,m.jsx)("div",{class:"formLabel",children:"Create article."})}),(0,m.jsxs)("div",{class:"mb-3",children:[(0,m.jsx)("div",{class:"formInputLabel",children:"Type headline"}),(0,m.jsx)("textarea",{rows:"3",type:"text",class:"form-control",autoComplete:"off",name:"articleHeadline1"}),(0,m.jsx)("br",{}),(0,m.jsxs)("div",{class:"formInputLabel",children:["Add photo ",(0,m.jsxs)("span",{style:{fontSize:"12px"},children:[" ",(0,m.jsx)("input",{type:"file",id:"pubArticleImageInputElement",name:"file",onChange:e=>{let t=document.querySelector("#pubArticleImageInputElement").files[0],s=Array.from(t.type);"i"===s[0]&&"m"===s[1]&&"a"===s[2]&&"g"===s[3]&&"e"===s[4]?j(URL.createObjectURL(t)):((0,a.yd)("toastAlert2","Image format ".concat(t.type," not supported. Change image"),5e3),setTimeout((()=>{window.location.href="/pages/pubarticles/createarticle"}),5e3))}})]})]}),(0,m.jsx)("div",{style:{paddingTop:"4px"},children:(0,m.jsx)("img",{src:x,class:" d-block w-100",alt:""})}),(0,m.jsx)("br",{}),(0,m.jsx)("div",{class:"formInputLabel",children:"Type/Paste your message here:"}),(0,m.jsx)(o.CKEditor,{config:{toolbar:["Bold","Italic","Link","NumberedList","BulletedList"]},editor:p(),onChange:(e,t)=>{const s=t.getData();f(s)}})]}),(0,m.jsx)("div",{style:{fontSize:"15px"},dangerouslySetInnerHTML:{__html:r}}),(0,m.jsx)("progress",{value:y,max:"100",style:{width:"100%",color:"red"}}),(0,m.jsx)("div",{onClick:()=>{if(Array.from(document.getElementById("articleCreateForm").articleHeadline1.value.trim()).length<1)(0,a.yd)("toastAlert2","Enter a headline",3e3);else if(Array.from(h).length<1){void 0===document.querySelector("#pubArticleImageInputElement").files[0]?(0,a.yd)("toastAlert2","Type or paste some information in the body section",3e3):v()}else v()},class:"form-submit-btn backgroundColorHovereffect",children:"Create Article"}),(0,m.jsx)("p",{})]})})]}),(0,m.jsx)("div",{class:"col-md-3"}),(0,m.jsx)("div",{class:"col-md-3"}),(0,m.jsx)("div",{class:"col-md-6",children:(0,m.jsx)(c.default,{})}),(0,m.jsx)("div",{class:"col-md-3"})]})})}const f=h},2551:(e,t,s)=>{s.r(t),s.d(t,{MyArticles:()=>n,default:()=>o});s(7890);var a=s(5407),r=s(5043),i=s(7638),l=s(6273),c=s(579);function n(){const[e,t]=(0,r.useState)(""),[s]=(0,a.lT)(["user"]),[n,o]=(0,r.useState)((0,c.jsx)(i.aq,{}));return(0,r.useEffect)((()=>{!0===(0,i.Qb)(s)&&fetch("/getMyArticles",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(s.user.contact)})}).then((e=>e.json())).then((e=>{0===e.length?(0,i.yd)("toastAlert2","You have no articles",4e3):(e.reverse(),o((0,i.Ee)(e)))}))}),[]),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{}),(0,c.jsxs)("div",{class:"row",children:[(0,c.jsx)("div",{class:"col-md-3"}),(0,c.jsx)("div",{class:"col-md-6",children:(0,c.jsx)("div",{class:"blackBgOrangeColor",children:"Your articles"})}),(0,c.jsx)("div",{class:"col-md-3"})]}),(0,c.jsx)("div",{style:{display:"flex",flexWrap:"wrap",padding:"5px"},children:(0,c.jsxs)("div",{class:"button1",onClick:()=>{window.location.href="whatsapp://send?text=*Trending stories*%0A%0ATap the link below for details:%0A%0A".concat(l.J_,"/pages/pubarticles/sharemyarticles/").concat(s.user.contact)},children:[(0,c.jsx)("span",{class:"fa fa-whatsapp"})," Share all articles through WhatsApp"]})}),(0,c.jsx)("div",{class:"row",children:n})]})}const o=n}}]);
//# sourceMappingURL=250.aee11ccc.chunk.js.map