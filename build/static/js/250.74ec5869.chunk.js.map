{"version":3,"file":"static/js/250.74ec5869.chunk.js","mappings":"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","sources":["pages/pubarticles/CreateArticle.js"],"sourcesContent":["import {ToastAlert,IsLoggedIn } from '../Functions';\r\nimport firebase from 'firebase/compat/app';\r\nimport { ArticlesNav} from './PubArticleHome';\r\nimport {useCookies} from 'react-cookie'\r\n\r\nimport 'firebase/compat/storage';\r\n\r\nimport React, {useState,useEffect} from 'react';\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\r\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\nfirebase.initializeApp({\r\n  apiKey: \"AIzaSyCf0LC-eL1pJ2Rpvh59ukbg5OUFm6IcrEA\",\r\n  authDomain: \"kayas-42321.firebaseapp.com\",\r\n  projectId: \"kayas-42321\",\r\n  storageBucket: \"kayas-42321.appspot.com\"\r\n\r\n})\r\nconst storage=firebase.storage()\r\nconst bucket=storage.ref()\r\n\r\nexport function CreateArticle(){\r\n  const [cookies,setCookie,removeCookie]=useCookies(['user'])\r\n    const[status,setStatus]=useState('')\r\n    const[body,setBody]=useState('')\r\n    const[progressBarValue,setProgressBarValue]=useState(0)\r\n    const[imagePreview,setImagePreview]=useState('Image appears here')\r\n    \r\nuseEffect(()=>{\r\n if(IsLoggedIn(cookies)===true){;}else{;}\r\n\r\n},[])\r\n   \r\nasync function  CreateArticle(){   \r\n  \r\n  setStatus(\"<div style='color:orange;'>Initializing.........</div>\")\r\n  setTimeout(()=>{\r\n    setStatus(\"<div style='color:orange;'>Gathering requirements.................</div>\")\r\n    setTimeout(()=>{\r\n      setStatus(\"<div style='color:orange;'>Creating...........................</div>\")\r\n  \r\n    },5000)\r\n  },5000)\r\n  \r\n  \r\n   \r\n  let traderDetailsObj=await fetch(`/getTradingDetails/${parseInt(cookies.user.contact)}`).then(res=>res.json()).then(resp=>{\r\n  return resp[0]\r\n            })\r\n \r\nif(traderDetailsObj.permissionTokensObj.createPubArticleTokens<1 || \r\n              traderDetailsObj.permissionTokensObj.createPubArticleTokens>1){\r\n                        let payLoad={\r\n                          headline1:document.getElementById(\"articleCreateForm\")[0].value.trim(),\r\n                          institution:traderDetailsObj.institution.trim(),\r\n                          author:traderDetailsObj.name.trim(),\r\n                          contact:parseInt(traderDetailsObj.contact),\r\n                          body:body.trim()\r\n                          \r\n                                }  \r\n   \r\n  let responseObject= await fetch('/createArticle',{\r\n          method:\"post\",\r\n          headers:{'Content-type':'application/json'},\r\n          body:JSON.stringify(payLoad)\r\n      }).then(resp=>{\r\n          \r\n          return resp.json()}).then(res=>{\r\n            return res\r\n              })\r\n\r\n    \r\n              \r\n            \r\n  if(responseObject.limitReached===1){\r\n    \r\n    ToastAlert('toastAlert2','Maximum number of articles reached. Delete some',5000)\r\n    }else{\r\n                               \r\n    let imageFile= await document.querySelector('#pubArticleImageInputElement').files[0]  \r\n    document.getElementById(\"articleCreateForm\").articleHeadline1.value=\"\"\r\n        \r\n    if(imageFile===undefined){\r\n      window.location.href=`/pages/pubarticles/article/${responseObject.id}`\r\n      ToastAlert('toastAlert1','Finalizing......',5000)\r\n      }else{\r\n\r\n        setStatus(`<div style='color:orange;'>Uploading image..........</div>`) \r\n\r\n\r\n        let value=0;\r\n        setInterval(()=>{\r\n          if(value!==94){\r\n            value+=1\r\n            setProgressBarValue(value)\r\n        \r\n          }else{;}\r\n         \r\n        },450)\r\n        \r\n    \r\n      let imageName=`pubArticleImage_${responseObject.id}`\r\n       let imageRef= bucket.child(`pubArticleImages/${imageName}`)\r\n     await  imageRef.put(imageFile).then(async (resp)=>{\r\n\r\n      setStatus(`<div style='color:orange;'>Getting image URL ..........</div>`)      \r\nlet imageDownLoadUrl=await imageRef.getDownloadURL({\r\n        orderBy:'generation',limitTo:1\r\n       }).then(resp=>{\r\n       return resp;\r\n        })\r\n\r\nfetch('/addPubArticleImageUrlToArticle',{\r\n        method:\"post\",\r\n        headers:{'Content-type':'application/json'},\r\n        body:JSON.stringify({contact:parseInt(responseObject.contact),articleId:responseObject.id,imageDownLoadUrl:imageDownLoadUrl})\r\n    }).then(resp=>{\r\n        setStatus(`<div style='color:orange;'>Image saved</div>`) \r\n        window.location.href=`/pages/pubarticles/article/${responseObject.id}`\r\n        ToastAlert('toastAlert1','Finalizing......',5000)\r\n     })\r\n\r\n\r\n\r\n\r\n       })\r\n       \r\n      }\r\n       \r\n         \r\n    }\r\n            \r\n        \r\n              \r\n              \r\n          \r\n\r\n\r\n\r\n\r\n\r\n             }\r\n            else if(traderDetailsObj.permissionTokensObj.createPubArticleTokens===0) {\r\n              ToastAlert('toastAlert2','Maximum number of articles reached. Delete some',4000)\r\n            }\r\n            else{\r\n              ToastAlert('toastAlert2','Error, try again',3000)\r\n            }            \r\n\r\n\r\n\r\n\r\n          \r\n          }\r\n\r\n    return (<div>\r\n           \r\n\r\n      <div className =\"row\">\r\n<div class='col-md-3'></div>\r\n<div class='col-md-6'>\r\n<ArticlesNav/>\r\n  <div style={{padding:\"8px\"}}>\r\n    <form method=\"post\" id=\"articleCreateForm\" action=\"#\">\r\n\r\n    <div style={{paddingBottom:\"8px\"}}><div class=\"formLabel\">Create article.</div></div>\r\n       <div class=\"mb-3\">\r\n     <div class=\"formInputLabel\">Type headline</div>\r\n     <textarea rows=\"3\" type=\"text\" class=\"form-control\" autoComplete=\"off\" name=\"articleHeadline1\"></textarea>\r\n   \r\n   <br></br>\r\n   <div class=\"formInputLabel\">Add photo <span style={{fontSize:\"12px\"}}> <input type=\"file\" id=\"pubArticleImageInputElement\" name=\"file\" onChange={(event)=>{\r\n  let file=document.querySelector('#pubArticleImageInputElement').files[0]\r\n  let fileTypeCharacterArray=Array.from(file.type)\r\n  if(fileTypeCharacterArray[0]==='i'&&fileTypeCharacterArray[1]==='m'&&fileTypeCharacterArray[2]==='a'&&fileTypeCharacterArray[3]==='g'&&fileTypeCharacterArray[4]==='e'){\r\n    setImagePreview(URL.createObjectURL(file))\r\n  }else{\r\n        \r\n    ToastAlert('toastAlert2',`Image format ${file.type} not supported. Change image`,5000)\r\n    setTimeout(()=>{\r\n      window.location.href='/pages/pubarticles/createarticle'\r\n    },5000)\r\n  }\r\n  \r\n \r\n}}></input></span></div>\r\n\r\n   <div style={{paddingTop:\"4px\"}}><img src={imagePreview} class=\" d-block w-100\" alt=\"\"/></div>\r\n  <br></br>\r\n  <div class=\"formInputLabel\">Type/Paste your message here:</div>\r\n  \r\n  <CKEditor config={{toolbar:['Bold','Italic','Link','NumberedList','BulletedList']}}\r\n        editor={ ClassicEditor }\r\n        onChange={ ( event, editor ) => {\r\n        \r\n          const data = editor.getData();\r\n          setBody(data);\r\n          \r\n\r\n\r\n        } }\r\n      />\r\n   \r\n   \r\n    </div>\r\n     \r\n     <div style={{fontSize:\"15px\",fontWeight:\"600\"}} dangerouslySetInnerHTML={{__html:status}}/>\r\n     <progress value={progressBarValue} max=\"100\"  style={{width:\"100%\"}}/>\r\n     <div   onClick={\r\n     \r\n       ()=>{\r\n      \r\n                 \r\n          \r\n         if(Array.from(document.getElementById(\"articleCreateForm\").articleHeadline1.value.trim()).length<1){\r\n          ToastAlert('toastAlert2','Enter a headline',3000)\r\n\r\n}else {\r\n  if(Array.from(body).length<1){\r\n    \r\n          let imageFile=document.querySelector('#pubArticleImageInputElement').files[0] \r\n          if(imageFile===undefined) {\r\n            ToastAlert('toastAlert2','Type or paste some information in the body section',3000)\r\n            \r\n          }else{\r\n            CreateArticle()\r\n          }\r\n            \r\n         } else{\r\n        \r\n          CreateArticle()\r\n          \r\n          \r\n        }\r\n        }\r\n\r\n       }\r\n     } class=\"form-submit-btn backgroundColorHovereffect\">Create Article</div><p></p>\r\n    \r\n     </form>\r\n     </div>\r\n     \r\n     \r\n     \r\n     \r\n     \r\n     \r\n     </div>\r\n<div class='col-md-3'></div>\r\n\r\n\r\n      </div>\r\n         \r\n\r\n    \r\n  \r\n     </div>)\r\n}\r\n\r\nexport default CreateArticle"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","bucket","storage","ref","CreateArticle","cookies","setCookie","removeCookie","useCookies","status","setStatus","useState","body","setBody","progressBarValue","setProgressBarValue","imagePreview","setImagePreview","async","setTimeout","traderDetailsObj","fetch","concat","parseInt","user","contact","then","res","json","resp","permissionTokensObj","createPubArticleTokens","payLoad","headline1","document","getElementById","value","trim","institution","author","name","responseObject","method","headers","JSON","stringify","limitReached","ToastAlert","imageFile","querySelector","files","articleHeadline1","undefined","window","location","href","id","setInterval","imageName","imageRef","child","put","imageDownLoadUrl","getDownloadURL","orderBy","limitTo","articleId","useEffect","IsLoggedIn","_jsx","children","_jsxs","className","class","ArticlesNav","style","padding","action","paddingBottom","rows","type","autoComplete","fontSize","onChange","event","file","fileTypeCharacterArray","Array","from","URL","createObjectURL","paddingTop","src","alt","CKEditor","config","toolbar","editor","ClassicEditor","data","getData","fontWeight","dangerouslySetInnerHTML","__html","max","width","onClick","length"],"sourceRoot":""}