{"version":3,"file":"static/js/556.07cf80f8.chunk.js","mappings":"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","sources":["pages/fooddelivery/FoodDeliveryRequests.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport { ToastAlert } from \"../Functions\"\r\n\r\nexport function FoodDeliveryRequests(){\r\n    const [status,setStatus]=useState('')\r\n    const [deliveryRequests,setDeliveryRequests]=useState('Loading requests......')\r\n    let initialTotalDeliveries=0,newtotalDeliveries=0\r\n    async function FetchDeliveries(){\r\n    \r\n    await  fetch('/fooddeliveryrequests').then(resp=>resp.json()).then(async (arrayOfDeliveryRequests)=>{\r\n        newtotalDeliveries=arrayOfDeliveryRequests.length\r\n                      \r\n                if(newtotalDeliveries>initialTotalDeliveries){\r\n                    ToastAlert('toastAlert1','New deliveries available',10000)\r\n                    initialTotalDeliveries=newtotalDeliveries\r\n                     \r\n                    \r\n                }else{;}\r\n                    \r\n                if(arrayOfDeliveryRequests.length===0){\r\n                    setDeliveryRequests('No requests yet.')\r\n                    ToastAlert('toastAlert2','No requests yet',4000)\r\n                }else{\r\n                    arrayOfDeliveryRequests.reverse()\r\n                    let counter=arrayOfDeliveryRequests.length\r\n                setDeliveryRequests(arrayOfDeliveryRequests.map(deliveryRequest=>{\r\n                    counter--\r\n                    return(\r\n                        <div style={{padding:\"5px\"}}>\r\n                <div style={{border:\"1px solid orange\",padding:\"5px\"}}>\r\n                <div style={{fontWeight:\"600\",fontSize:\"17px\",borderBottom:\"1px solid grey\"}}>{counter+1}. {deliveryRequest.name} - 0{deliveryRequest.contact}</div>\r\n                <div>Location: {deliveryRequest.location}</div>\r\n                <div>Room: {deliveryRequest.room}</div>\r\n                <div>Description: {deliveryRequest.desc}</div>\r\n                \r\n                \r\n                </div>\r\n                        </div>\r\n                    )\r\n                }))\r\n               \r\n\r\n\r\n                setInterval(()=>{\r\nFetchDeliveries()\r\n                },50000)\r\n                }\r\n\r\n\r\n                })\r\n    }\r\n    useEffect(()=>{\r\n\r\n            FetchDeliveries()\r\n         \r\n\r\n    },[])\r\n    return(<div style={{padding:\"5px\"}} class=\"row\">\r\n        <div class=\"col-md-3\"></div>\r\n        <div class=\"col-md-6\">\r\n            <div class=\"pageLabel\">Delivery requests</div><p></p>\r\n            <form method=\"post\" id=\"turnOnFoodDeliveryForm\">\r\n    <div class=\"mb-3\">\r\n    <div class=\"formInputLabel\">Response message if service is off</div>\r\n    <textarea rows={3} type=\"text\" class=\"form-control\" autoComplete=\"off\" name=\"notice\"  ></textarea>\r\n \r\n       </div>\r\n    <div style={{padding:\"3px\",color:\"orange\",fontWeight:\"600\"}}>{status}</div>\r\n    \r\n   <div style={{display:\"flex\",flexWrap:\"wrap\"}}>\r\n   <div style={{padding:\"5px\"}}><div class=\"button1\"\r\n    onClick={()=>{\r\n        let payLoad={task:'turnFoodDeliveryServiceOnOff'}\r\n        fetch('/getControls').then(res=>res.json()).then(resp=>{\r\n           let controlsDoc=resp[0]\r\n           if(controlsDoc.foodDeliveryControls.deliveryServiceIsOn===true){\r\nsetStatus('Turning off.....')\r\n           }else{\r\n            setStatus('Turning on.....')\r\n           }\r\n    fetch('/updateControls',{\r\n            method:\"post\",\r\n            headers:{'Content-type':'application/json'},\r\n            body:JSON.stringify(payLoad) \r\n        }).then(res=>res.json()).then(resp=>{\r\n            setStatus(resp.msg)\r\n        })\r\n\r\n\r\n        })\r\n    }}\r\n    >Turn food delivery service on/off</div>\r\n   </div>\r\n   <div style={{padding:\"5px\"}}>\r\n    <div onClick={\r\n     ()=>{\r\n if(Array.from(document.getElementById(\"turnOnFoodDeliveryForm\").notice.value.trim()).length<2){\r\nToastAlert('toastAlert2','Type a comment',4000)\r\n} \r\nelse{\r\n    \r\n    let form=document.getElementById(\"turnOnFoodDeliveryForm\"), payLoad={task:'updateFoodDeliveryServiceNotice',notice:form.notice.value.trim()}\r\n   \r\n\r\nsetStatus('Setting new notice.....')\r\n    fetch('/updateControls',{\r\n        method:\"post\",\r\n        headers:{'Content-type':'application/json'},\r\n        body:JSON.stringify(payLoad) \r\n    }).then(res=>res.json()).then(resp=>{\r\n        \r\nsetStatus(resp.msg)\r\n    })\r\n\r\n\r\n\r\n}\r\n     } \r\n\r\n    } class=\"button1\"><span class=\"fa fa-save\"></span> Set message</div>\r\n    </div>\r\n    </div>\r\n    \r\n    <p></p>\r\n   \r\n    </form><p></p>\r\n\r\n\r\n<div style={{fontSize:\"20px\",padding:\"8px\",textAlign:\"center\",fontWeight:\"600\"}}>Delivery requests</div>\r\n\r\n<div>{deliveryRequests}</div>\r\n\r\n        </div>\r\n        <div class=\"col-md-3\"></div>\r\n    </div>)\r\n}\r\n\r\nexport default FoodDeliveryRequests"],"names":["FoodDeliveryRequests","status","setStatus","useState","deliveryRequests","setDeliveryRequests","initialTotalDeliveries","newtotalDeliveries","async","FetchDeliveries","fetch","then","resp","json","arrayOfDeliveryRequests","length","ToastAlert","reverse","counter","map","deliveryRequest","_jsx","style","padding","children","_jsxs","border","fontWeight","fontSize","borderBottom","name","contact","location","room","desc","setInterval","useEffect","class","method","id","rows","type","autoComplete","color","display","flexWrap","onClick","payLoad","task","res","foodDeliveryControls","deliveryServiceIsOn","headers","body","JSON","stringify","msg","Array","from","document","getElementById","notice","value","trim","textAlign"],"sourceRoot":""}