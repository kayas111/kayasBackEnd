{"version":3,"file":"static/js/7251.c61a231b.chunk.js","mappings":"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","sources":["pages/payments/MakePayment.js","pages/payments/PaymentsNav.js"],"sourcesContent":["\r\nimport React, {useEffect,useState} from 'react'\r\nimport { ToastAlert,IsLoggedIn, Post, GetTradingDetails } from '../Functions';\r\nimport {LoginPage} from '../LoginPage'\r\nimport {useCookies} from 'react-cookie'\r\nimport { PaymentsNav } from './PaymentsNav';\r\n\r\nexport function MakePayment(){\r\n    const [cookies]=useCookies(['user'])\r\n    let [ticket,setTicket]=useState('')\r\n    let [ticketDetails,setTicketDetails]=useState('')\r\n    let [searchStatus,setSearchStatus]=useState('')\r\n    let [payStatus,setPayStatus]=useState('')\r\n    let [searchSuccessful,setSearchSuccessful]=useState(false)\r\n    let paymentDetails={}\r\n  \r\n\r\n if(IsLoggedIn(cookies)==true){\r\n\r\n        return(\r\n        \r\n        <div style={{padding:\"5px\"}}>\r\n    <div class=\"row\">\r\n        <div class=\"col-md-3\"></div>\r\n        <div class=\"col-md-6\">\r\n            <div class=\"label\">Make payment</div>\r\n            <div class=\"description\">Pay for a service or ticket. Enter the ID, search and pay</div>  \r\n          \r\n        <PaymentsNav/>\r\n          <p></p>\r\n    \r\n            <form  method=\"post\" id=\"makePaymentForm\" action=\"#\">\r\n          \r\n            <div class=\"formInputLabel\">Search for ticket/service ID (name of ticket) before paying</div>\r\n          <input type=\"text\" name='ticketId' class=\"form-control\" placeholder='Enter ticket ID or name and search' autoComplete=\"off\" /><p></p>\r\n          \r\n          \r\n          \r\n    \r\n    \r\n    <div class=\"status\">{searchStatus}</div>\r\n    \r\n          <div  class=\"button1\"\r\n          \r\n          onClick={()=>{\r\n            let form=document.getElementById('makePaymentForm'),ticketId=form.ticketId.value.trim()\r\n            \r\n            if(Array.from(ticketId).length<1){\r\n    \r\n        \r\n                ToastAlert('toastAlert2','Enter a ticket Id',3000)\r\n            } else{\r\n                setSearchStatus('Please wait...')\r\n            Post('/getTicketDetails',{ticketId:ticketId}).then(resp=>{\r\n                \r\n                if(resp.length==0){\r\n                    setSearchStatus('Ticket/service ID does not exist')\r\n                }else{\r\n                    setSearchStatus('')\r\n    let ticketDetails=resp\r\n    setTicketDetails(resp[0])\r\n    setTicket(ticketDetails.map((ticket)=>(\r\n    <div>\r\n    \r\n    <div>\r\n    <div style={{fontSize:\"20px\",fontWeight:\"600\"}}>{ticket.ticketId}</div>\r\n    <div style={{fontSize:\"14px\"}}>Amount: {ticket.amount +' shs'}</div>\r\n    <div style={{fontSize:\"14px\"}}>Tickets left: {ticket.noOfTickets - ticket.payments.length}</div>\r\n    <div style={{fontSize:\"14px\"}}>Contact: 0{ticket.ticketOwner}</div>\r\n    </div>\r\n    \r\n    </div>\r\n    )))\r\n    setSearchSuccessful(true)\r\n    \r\n                }\r\n    \r\n    \r\n            })\r\n            }\r\n            \r\n           \r\n    \r\n    \r\n    \r\n          }}\r\n          >Search</div>\r\n                            \r\n                 <div style={{paddingTop:\"10px\",paddingBottom:\"3px\"}}> {ticket} </div>\r\n    <p></p>\r\n    <div class=\"formInputLabel\">Create your payment secret code or word (You will be asked for this secret to confirm your payment)</div>\r\n                 <input type=\"text\" name='paymentSecretCode' class=\"form-control\" autoComplete=\"off\" /><p></p>\r\n    <div class=\"status\">{payStatus}</div>\r\n           <div   class=\"button1\"\r\n           onClick={()=>{\r\n         \r\n                \r\n            let form=document.getElementById('makePaymentForm'),paymentSecretCode=form.paymentSecretCode.value.trim()\r\n            if(searchSuccessful===false){\r\n                ToastAlert('toastAlert2','Search before making a payment',3000)\r\n            }else{\r\n    \r\n    paymentDetails.ticketId=ticketDetails.ticketId\r\n    paymentDetails.amount=ticketDetails.amount\r\n    paymentDetails.name=cookies.user.name\r\n    paymentDetails.paymentApproved=false\r\n    paymentDetails.paymentSettled=false\r\n    paymentDetails.contact=cookies.user.contact\r\n    if(Array.from(paymentSecretCode).length<3){\r\n        ToastAlert('toastAlert2','Create a payment secret code of atleast 3 characters',4000)\r\n    }else{\r\n        setPayStatus('Please wait......')\r\n        paymentDetails.paymentSecretCode=paymentSecretCode\r\n        \r\n        GetTradingDetails(cookies.user.contact).then(traderDetails=>{\r\n            \r\n            if(traderDetails.accBal<paymentDetails.amount){\r\n    \r\n                setPayStatus('Tap menu and select deposit to your Kayas account because your account balance is low.')\r\n            }else{\r\n    \r\n                setPayStatus('Paying........')\r\n                Post('/payForTicket',paymentDetails).then(resp=>{\r\n                    setPayStatus(resp.msg)\r\n                })\r\n    \r\n            }\r\n           \r\n\r\n\r\n        })\r\n    }\r\n            }\r\n           \r\n            \r\n           }}\r\n           \r\n           >Pay now</div><p></p>\r\n          \r\n           </form>\r\n    \r\n         \r\n    \r\n        </div>\r\n        <div class=\"col-md-3\"></div>\r\n    </div>\r\n        </div>)\r\n\r\n }else{\r\nreturn (\r\n    <div>\r\n        <LoginPage/>\r\n    </div>\r\n)\r\n }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport default MakePayment","export function PaymentsNav(){\r\n    let style={padding:\"2px\"}\r\n    return(<div style={{display:\"flex\",flexWrap:\"wrap\",paddingTop:\"10px\"}}>\r\n  \r\n  <div style={style}><a href=\"/pages/payments/createticket\"><div class=\"button1\"><span class=\"fa fa-plus\"></span>  Create tickets/services</div></a></div>\r\n <div style={style}><a href=\"/pages/payments/mytickets\"><div class=\"button1\"><span class=\"fa fa-user\"></span>  My tickets/services</div></a></div>\r\n<div style={style}><a href=\"/pages/payments/makepayment\"><div class=\"button1\"><span class=\"fa fa-money\"></span> Pay for ticket/service</div></a></div>\r\n<div style={style}><a href=\"/pages/payments/mypayments\"><div class=\"button1\"><span class=\"fa fa-list\"></span> My payments</div></a></div>\r\n<div style={style}><a href=\"/pages/payments/mytickets\"><div class=\"button1\"><span class=\"fa fa-check\"></span>  Approve a payment</div></a></div>\r\n\r\n\r\n    </div>)\r\n}"],"names":["MakePayment","cookies","useCookies","ticket","setTicket","useState","ticketDetails","setTicketDetails","searchStatus","setSearchStatus","payStatus","setPayStatus","searchSuccessful","setSearchSuccessful","paymentDetails","IsLoggedIn","_jsx","style","padding","children","_jsxs","class","PaymentsNav","method","id","action","type","name","placeholder","autoComplete","onClick","ticketId","document","getElementById","value","trim","Array","from","length","ToastAlert","Post","then","resp","map","fontSize","fontWeight","amount","noOfTickets","payments","ticketOwner","paddingTop","paddingBottom","paymentSecretCode","user","paymentApproved","paymentSettled","contact","GetTradingDetails","traderDetails","accBal","msg","LoginPage","display","flexWrap","href"],"sourceRoot":""}