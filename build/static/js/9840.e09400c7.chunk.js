"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[9840],{749:(e,t,s)=>{s.d(t,{s:()=>c});s(65043);var n=s(62582),a=s(70579);function c(){let e={padding:"3px"};return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{style:{paddingTop:"8px",display:"flex",flexWrap:"wrap"},children:[(0,a.jsx)("div",{style:e,children:(0,a.jsxs)(n.N_,{to:"/pages/attendanceregs/myregisters",children:["  ",(0,a.jsxs)("div",{class:"button1",children:[(0,a.jsx)("span",{class:"fa fa-list"})," My registers"]})]})}),(0,a.jsx)("div",{style:e,children:(0,a.jsx)(n.N_,{to:"/pages/attendanceregs/createattendanceregister",children:(0,a.jsx)("div",{class:"button1",children:(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{class:"fa fa-plus"})," New register"]})})})})]})})}},79840:(e,t,s)=>{s.r(t),s.d(t,{AttendanceRegister:()=>d,default:()=>g});var n=s(65043),a=s(78407),c=s(35407),r=s(35323),o=s(749),i=(s(76273),s(62582)),l=s(70579);function d(){let e=(0,r.g)();const[t,s]=(0,n.useState)(""),[d,g,m]=(0,c.lT)(["user"]),[h,p]=(0,n.useState)(""),[u,x]=(0,n.useState)(""),[y,j]=(0,n.useState)("");const[f,v]=(0,n.useState)(""),[S,A]=(0,n.useState)(""),[I,b]=(0,n.useState)(""),[w,E]=(0,n.useState)([]),[C,F]=(0,n.useState)(""),[B,k]=(0,n.useState)(""),[R,T]=(0,n.useState)("10000"),[D,N]=(0,n.useState)("10000"),[L,W]=(0,n.useState)("100"),[O,P]=(0,n.useState)(""),[_,M]=(0,n.useState)(""),[z,J]=(0,n.useState)(""),[K,Y]=(0,n.useState)("Please wait......"),[G,H]=(0,n.useState)("Caltulating......"),[Q,U]=(0,n.useState)(""),[q,V]=(0,n.useState)(""),[X,Z]=(0,n.useState)(""),[$,ee]=(0,n.useState)("caltulating....."),[te,se]=(0,n.useState)(""),[ne,ae]=(0,n.useState)("");let ce=0;const[re,oe]=(0,n.useState)(1);let ie="whatsapp://send?text=".concat(encodeURIComponent("*".concat(K,"*%0A%0ATap link below to register:%0A").concat(window.location.origin,"/pages/attendanceregs/").concat(e.registrar,"/").concat(e.id,"%0A%0A*Thank you.*")));function le(e){!0===(0,a.Qb)(d)&&(parseInt(d.user.contact)==parseInt(e.registrar)?(s("Fetching contacts, please wait......"),fetch("/attendeesMessage/".concat(e.registrar,"/").concat(e.id)).then(e=>e.json()).then(t=>{fetch("/attendees/".concat(e.registrar,"/").concat(e.id)).then(e=>e.json()).then(t=>{let n=t,c=1,r=n.registerDoc;ce=1,A(n.registerDoc.attendees.length);!0===n.closed?(0,a.yd)("toastAlert2","Register closed. Contact Kayas",3e3):(r.attendees.forEach(e=>{e.position=c,c++}),P(r.attendees.map(t=>(0,l.jsx)("div",{style:{padding:"0px"},children:(0,l.jsx)("div",{class:"contactsRegisterContactRecordContainer",children:(0,l.jsxs)("div",{class:"row ",children:[(0,l.jsxs)("div",{class:"col-6",children:[t.position,". ",t.name]}),(0,l.jsx)("div",{class:"col-5",style:{textAlign:"right"},children:(0,l.jsx)("a",{onClick:()=>{window.location.href="tel:0".concat(t.contact)},children:(0,l.jsxs)("span",{class:"hovereffect",children:[(0,l.jsx)("span",{class:"fa fa-phone"})," Call: 0",t.contact]})})}),(0,l.jsx)("div",{class:"col-1",style:{textAlign:"center"},children:(0,l.jsx)("a",{onClick:()=>{1==window.confirm('Select "OK" to delete 0'.concat(t.contact))&&((0,a.yd)("toastAlert1","Deleting 0".concat(t.contact,", wait for confirmation message....."),3e3),fetch("/removeFromAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(t.contact),registrarContact:_,registerId:parseInt(e.id)})}).then(e=>e.json()).then(t=>{0===t.registerPresent?(0,a.yd)("toastAlert1","You can not proceed with the action because the Regsiter is not present",2e3):0===t.attendeeInList?(0,a.yd)("toastAlert2","Contact is not in the list",3e3):1===t.success?((0,a.yd)("toastAlert1","Deleted Successfully",3e3),A(S-1),le(e)):(0,a.yd)("toastAlert1","Error occured, try again",3e3)}))},children:(0,l.jsx)("span",{class:"hovereffect",children:(0,l.jsx)("span",{class:"fa fa-trash"})})})})]})})}))),b("".concat(r.attendees.length," contacts")),s("Successful. Scroll to see"))})})):(0,a.yd)("toastAlert2","Not allowed. You are not the owner",4e3))}return(0,n.useEffect)(()=>{window.location.href="#",fetch("/attendanceregs/".concat(e.registrar,"/").concat(e.id)).then(e=>e.json()).then(e=>{0===e.presence?(Y("This Register does not exist. Please try another or create your own register too for free"),v("Kayas 0703852178-WhatsApp")):(v(e.name),J(e.institution),Y(e.registerTitle),M(e.contact))}),fetch("/attendees/".concat(e.registrar,"/").concat(e.id)).then(e=>e.json()).then(e=>{A(e.registerDoc.attendees.length),E(e.registerDoc.attendees)}),fetch("/getTradingDetails/".concat(e.registrar)).then(e=>e.json()).then(e=>{H(e[0].accBal),x(e[0].permissionTokensObj.sendSmsTokens)})},[]),(0,l.jsxs)("div",{style:{padding:"3px"},children:[(0,l.jsx)("div",{style:{padding:"5px"},children:(0,l.jsxs)("div",{class:"row",children:[(0,l.jsx)("div",{class:"col-md-3"}),(0,l.jsxs)("div",{class:"col-md-6",children:[(0,l.jsx)(o.s,{}),(0,l.jsx)("p",{}),(0,l.jsx)("div",{class:"pageLabel",children:K}),(0,l.jsxs)("div",{style:{fontSize:"15px"},children:[S," contacts ",(0,l.jsxs)("span",{style:{paddingLeft:"10px"},children:["ID: ",e.id]})]}),(0,l.jsxs)("div",{style:{paddingTop:"20px"},children:[(0,l.jsxs)("form",{id:"messengingForm",children:[(0,l.jsx)("div",{class:"bold",children:"Save your contact"}),(0,l.jsx)("div",{class:"light",children:"Enter your name (optional) and contact then save."}),(0,l.jsx)("p",{}),(0,l.jsxs)("div",{class:"mb-3",children:[(0,l.jsx)("div",{class:"formInputLabel",children:"Name (optional)"}),(0,l.jsx)("textarea",{row:"2",type:"text",class:"form-control",autoComplete:"off",name:"name"}),(0,l.jsx)("br",{}),(0,l.jsx)("div",{class:"formInputLabel",children:"Contact"}),(0,l.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contact"})]}),(0,l.jsx)("div",{class:"row",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{class:"status",children:t}),(0,l.jsx)("div",{style:{padding:"3px"},children:(0,l.jsxs)("div",{onClick:()=>{let t;Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10?((0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value=""):(t=Array.from(document.getElementById("messengingForm").name.value).length<2?"":document.getElementById("messengingForm").name.value.trim(),s("Saving......."),fetch("/getTradingDetails/".concat(_)).then(e=>e.json()).then(n=>{n[0];fetch("/addToAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:t,contact:parseInt(document.getElementById("messengingForm").contact.value.trim()),registrarContact:_,registerId:parseInt(e.id)})}).then(e=>e.json()).then(e=>{0===e.registerPresent?(0,a.yd)("toastAlert2","Register does not exist",3e3):1===e.success?((0,a.yd)("toastAlert1","Saved",1200),s(""),document.getElementById("messengingForm").contact.value="",document.getElementById("messengingForm").name.value="",A(e.attendees.length)):"memberPresent"===e.success?((0,a.yd)("toastAlert2","Contact already exists",3e3),document.getElementById("messengingForm").contact.value="",document.getElementById("messengingForm").name.value=""):(0,a.yd)("toastAlert2","Error occured, try again",3e3)})}))},type:"text",class:"btn btn-success fullButtonWidth",children:[(0,l.jsx)("span",{class:"fa fa-save"})," Save"]})}),(0,l.jsx)("div",{style:{padding:"3px",textAlign:"center"},children:"Or"}),(0,l.jsx)("div",{style:{padding:"3px"},children:(0,l.jsx)(i.N_,{to:"/pages/sendsmsattendanceregs/".concat(e.registrar,"/").concat(e.id),children:(0,l.jsxs)("div",{class:"btn btn-success fullButtonWidth",children:[(0,l.jsx)("span",{class:"fa fa-envelope"})," Send SMS"]})})}),(0,l.jsx)("p",{}),(0,l.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,l.jsx)("div",{style:{padding:"3px"},children:(0,l.jsxs)("div",{onClick:()=>{le(e)},type:"text",class:"button1",children:[(0,l.jsx)("span",{class:"fa fa-eye"})," Display contacts"]})}),(0,l.jsx)("div",{style:{padding:"3px"},children:(0,l.jsxs)("div",{onClick:()=>{Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10?((0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value=""):(s("Deleting..........."),fetch("/removeFromAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(document.getElementById("messengingForm").contact.value.trim()),registrarContact:_,registerId:parseInt(e.id)})}).then(e=>e.json()).then(e=>{0===e.registerPresent?p("<div style='color:red;'>You can not proceed with the action because the Regsiter is not present</div>"):0===e.attendeeInList?(0,a.yd)("toastAlert2","not in the list",3e3):1===e.success?((0,a.yd)("toastAlert1","Deleted",1200),s(""),document.getElementById("messengingForm").contact.value="",A(S-1)):((0,a.yd)("toastAlert1","Error occured, try again",3e3),document.getElementById("messengingForm").contact.value="")}))},type:"text",class:"button1",children:[(0,l.jsx)("span",{class:"fa fa-trash"})," Delete contact"]})}),(0,l.jsx)("div",{style:{padding:"3px"},children:(0,l.jsx)("div",{onClick:()=>{if(Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10)(0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value="";else if(0===w.length)(0,a.yd)("toastAlert2","Register not ready, try again",3e3);else{let e,t,s=0,n=parseInt(document.getElementById("messengingForm").contact.value);w.forEach(a=>{a.contact===n&&(e=s+1,t=a),s++}),void 0===e?(0,a.yd)("toastAlert2","Not in the list",3e3):(0,a.yd)("toastAlert1","".concat(t.name," at position ").concat(e," in the list"),4e3)}},type:"text",class:"button1",children:" Get details"})})]})]})})]}),(0,l.jsxs)("div",{style:{background:"#e9e8e8",paddingTop:"5px"},children:[(0,l.jsx)("div",{style:{fontSize:"17px",textAlign:"center",color:"black",fontWeight:"600",background:"white"},dangerouslySetInnerHTML:{__html:I}}),(0,l.jsx)("div",{children:O})]})]})]}),(0,l.jsx)("div",{class:"col-md-3"}),(0,l.jsx)("div",{class:"col-md-3"}),(0,l.jsx)("div",{class:"col-md-3"})]})}),(0,l.jsx)("p",{}),(0,l.jsxs)("div",{class:"row",style:{textAlign:"center",padding:"20px",fontSize:"15px"},children:[(0,l.jsx)("div",{class:"col-md-3"}),(0,l.jsx)("div",{class:"col-md-6",children:(0,l.jsxs)("div",{style:{padding:"3px"},children:["Share to WhatsApp friends or Groups ",(0,l.jsx)("br",{})," ",(0,l.jsx)("a",{style:{color:"green"},href:ie,children:(0,l.jsxs)("span",{class:"button1",children:[(0,l.jsx)("span",{class:"fa fa-whatsapp"})," Share this Register"]})})]})}),(0,l.jsx)("div",{class:"col-md-3"})]})]})}const g=d}}]);
//# sourceMappingURL=9840.e09400c7.chunk.js.map