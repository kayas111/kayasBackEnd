{"version":3,"file":"static/js/9519.e8b2342e.chunk.js","mappings":"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","sources":["pages/audience/AudienceComp.jsx"],"sourcesContent":["\r\nimport { useParams } from \"react-router-dom/cjs/react-router-dom.min\"\r\nimport { useState, useEffect } from \"react\"\r\n\r\n    import {useCookies} from 'react-cookie'\r\nimport { Post, TrimExtraSpaces, ComponentMessage, ToastAlert } from \"../Functions\"\r\nimport { audienceSmsCost } from \"../../Variables\"\r\nexport function AudienceComp(){\r\n  const [cookies]=useCookies(['user'])\r\n  let Params=useParams()\r\n  Params.audienceName=TrimExtraSpaces(Params.audienceName)\r\n  let [viewFactors,setViewFactors]=useState({})\r\n    let {contact,categoryId}=useParams(),payLoad={contact:parseInt(contact),categoryId:parseInt(categoryId)}\r\n  let [audienceName,setAudienceName]=useState(''),[followerDoc,setFollowersDoc]=useState({}),\r\n  [noOfFollowers,setNoOfFollowers]=useState(''),[updateFollowersStatus,setUpdateFollowersStatus]=useState('')\r\n  const[charLength,setCharLength]=useState('0'),maxCharLength=150\r\n  const [audience,setAudience]=useState('')\r\n  const [refresh,setRefresh]=useState(0)\r\n  const [status,setStatus]=useState('')\r\n  \r\n  \r\nuseEffect(()=>{\r\n   \r\n    let payLoad={method:'getAudience',args:{audienceName:Params.audienceName}}\r\n    \r\n  Post('/AudiencePostRequest',payLoad).then(resp=>{\r\n    if(resp.length==0){\r\n      viewFactors.audiencePresent=false\r\n      setViewFactors(viewFactors)\r\n\r\n    }else{\r\n      let audience=resp[0]\r\n      \r\n      setAudience(audience)\r\n      \r\n      viewFactors.audiencePresent=true\r\n\r\nsetAudienceName(Params.audienceName)\r\nsetNoOfFollowers(`${audience.followers.length} followers`)\r\n\r\n\r\n   \r\n    }\r\n  })\r\n  \r\n  \r\n  \r\n  },[refresh])\r\n\r\n\r\n  return(\r\n \r\n<div class=\"row\">\r\n  <div class=\"col-md-3\"></div>\r\n  <div class=\"col-md-6\"> <div class=\"componentPadding\">\r\n    {\r\n       (()=>{\r\n        if(viewFactors.audiencePresent==true){\r\n         return(<div>\r\n <div class=\"pageLabel\">{audienceName}</div>\r\n <div class=\"light\" style={{paddingTop:\"3px\"}}><span class=\"btn hoverEffect1\" style={{padding:\"3px\",fontSize:\"12px\",color:\"orange\",background:\"black\",borderRadius:\"4px\"}}>{noOfFollowers}</span></div>\r\n\r\n{(()=>{\r\n if(cookies.user!==undefined && parseInt(cookies.user.contact)==parseInt(audience.contact)){\r\n  \r\n  return(<div>\r\n        <p></p>\r\n         <form id=\"audiencePostMessageForm\" method=\"post\">\r\n         <div style={{paddingBottom:\"5px\"}}><div class=\"bold\">Send message</div></div>\r\n         \r\n         <div class=\"mb-3\">\r\n         <div style={{fontSize:\"12px\",paddingTop:\"5px\",paddingBottom:\"5px\"}}>Maximum message length = <span style={{color:\"red\",fontSize:\"15px\"}}>{maxCharLength}</span> characters.<br></br><span style={{color:\"red\",fontSize:\"15px\"}}>{charLength}</span> characters typed.</div>\r\n        <p></p> <textarea type=\"text\" class=\"form-control\" autoComplete=\"off\" name=\"msg\" required rows=\"6\" placeholder='Type message' onChange={()=>{\r\n    setCharLength(Array.from(document.getElementById(\"audiencePostMessageForm\").msg.value.trim()).length)\r\n  }}></textarea>\r\n          </div>\r\n         <div class=\"status\">{status}</div>\r\n         <div  class=\"btn btn-success fullButtonWidth\" onClick={()=>{\r\nlet form=document.getElementById('audiencePostMessageForm'), message=TrimExtraSpaces(form.msg.value)\r\n\r\nif(Array.from(message).length<1){\r\n  ToastAlert('toastAlert2','Type a message',3000)\r\n}else if(Array.from(message).length>maxCharLength){\r\n  ToastAlert('toastAlert2',`Message is longer than ${maxCharLength} characters`,3000)\r\n}else{\r\n  \r\n  if(window.confirm(\"Select 'OK' to confirm and send the message\")==true){\r\n    ToastAlert('toastAlert1','Please wait for confirmation message......',6000)\r\nlet payLoad={method:'sendMessageToAudience',args:{message:message+' #KayasSMS',audienceName:Params.audienceName,audienceSmsCost:audienceSmsCost}}\r\n\r\nPost('/AudiencePostRequest',payLoad).then(resp=>{\r\n  if(resp.NoEligibleReceipients==true){\r\n    ToastAlert('toastAlert2','No follower has enough credit on their account to receive an SMS message.',7000)\r\n    setStatus('')\r\n  } else\r\n\r\n  if(resp.NoFollowers==true){\r\n    ToastAlert('toastAlert2',`Audience has no followers. First attain followers then try again`,6000)\r\n    setStatus('')\r\n  \r\n  }\r\n  \r\n  \r\n  else\r\n\r\nif(resp.success==1){\r\n  ToastAlert('toastAlert1',`Message sent to ${resp.NoOfReceipients} receipient(s)`,6000)\r\n  setStatus('')\r\n\r\n}else{\r\n  ToastAlert('toastAlert2','Not sent. Try again or contact Kayas 0703852178',6000)\r\n  setStatus('')\r\n}\r\n})\r\n  }else{;}\r\n\r\n\r\n}\r\n\r\n         }}>Send</div>\r\n         \r\n         </form>\r\n         <p></p>\r\n         <div    class=\"btn btn-danger fullButtonWidth\">Delete audience</div>\r\n         \r\n        \r\n \r\n  \r\n  \r\n  \r\n  \r\n  \r\n    </div>)\r\n}else{\r\n  \r\nreturn(<div>\r\n\r\n<div style={{paddingTop:\"30px\"}}></div>\r\n<div class=\"light\">Follow and make sure you have some credit on your Kayas account to be able to receive SMS updates on your number. Tap menu to deposit to your account.</div>\r\n <p></p>\r\n  {(()=>{\r\n    \r\n    if(cookies.user==undefined){return (<ComponentMessage message=\"Log in to be able to follow this audience\"/>)}\r\n    else {\r\n      if(audience.followers.find(follower=>follower.contact==cookies.user.contact)==undefined){\r\n        \r\nreturn(<div class=\"btn btn-success fullButtonWidth\" onClick={()=>{\r\n  let {name,contact}=cookies.user\r\n  Post('/AudiencePostRequest',{method:\"followAnAudience\",args:{audienceName:Params.audienceName,name:name,contact:contact}}).then(resp=>{\r\nif(resp.modifiedCount==1){\r\nsetRefresh(prev=>prev+1)\r\n\r\n}else{;}\r\n  })\r\n}}>Follow</div>)\r\n      }else{\r\n        \r\n        return(<div class=\"btn btn-danger fullButtonWidth\" onClick={()=>{\r\n          let {name,contact}=cookies.user\r\n          Post('/AudiencePostRequest',{method:\"unfollowAnAudience\",args:{audienceName:Params.audienceName,name:name,contact:contact}}).then(resp=>{\r\n        if(resp.modifiedCount==1){\r\n        setRefresh(prev=>prev+1)\r\n        \r\n        }else{;}\r\n          })\r\n        }}>Unfollow</div>)\r\n      }\r\n\r\n\r\n    }\r\n    \r\n  })()}\r\n\r\n<p></p>\r\n<ComponentMessage message=\"Advise more friends of similar interests to follow this audience too\"/>\r\n\r\n\r\n\r\n\r\n</div>)\r\n}\r\n})()}\r\n          \r\n\r\n         </div>)\r\n          \r\n        \r\n         }\r\n      \r\n         if(viewFactors.audiencePresent==false){\r\n      return(\r\n        <div><ComponentMessage message=\"Audience does not exists\"/></div>\r\n      )\r\n         }\r\n\r\n         \r\n       })()\r\n    }\r\n  </div></div>\r\n  <div class=\"col-md-3\"></div>\r\n</div>\r\n\r\n  )\r\n\r\n\r\n}\r\n  \r\n\r\n  export default AudienceComp"],"names":["AudienceComp","cookies","useCookies","Params","useParams","audienceName","TrimExtraSpaces","viewFactors","setViewFactors","useState","contact","categoryId","setAudienceName","parseInt","followerDoc","setFollowersDoc","noOfFollowers","setNoOfFollowers","updateFollowersStatus","setUpdateFollowersStatus","charLength","setCharLength","audience","setAudience","refresh","setRefresh","status","setStatus","useEffect","payLoad","method","args","Post","then","resp","length","audiencePresent","concat","followers","_jsxs","class","children","_jsx","style","paddingTop","padding","fontSize","color","background","borderRadius","undefined","user","id","paddingBottom","type","autoComplete","name","required","rows","placeholder","onChange","Array","from","document","getElementById","msg","value","trim","onClick","form","message","ToastAlert","window","confirm","audienceSmsCost","NoEligibleReceipients","NoFollowers","success","NoOfReceipients","ComponentMessage","find","follower","modifiedCount","prev"],"sourceRoot":""}