"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[423],{90423:(e,s,i)=>{i.r(s),i.d(s,{DeliveryServiceHome:()=>l,default:()=>r});var t=i(65043),c=i(78407),n=i(35407),a=i(70579);function l(){const[e]=(0,n.lT)(["user"]),[s,i]=(0,t.useState)(""),[l,r]=(0,t.useState)(""),[d,o]=(0,t.useState)([]),[h,u]=(0,t.useState)("");let v="Select your choice here";return(0,t.useEffect)(()=>{fetch("/getDeliveryAgents").then(e=>e.json()).then(e=>{0==e.length?d=[{description:"".concat(v)}]:(e.forEach(e=>{d.push(e)}),d.push({description:"".concat(v)}),d.reverse())})},[]),(0,a.jsx)("div",{style:{padding:"3px"},children:(0,a.jsxs)("div",{class:"row",children:[(0,a.jsx)("div",{class:"col-md-3"}),(0,a.jsxs)("div",{class:"col-md-6",children:[(0,a.jsx)("div",{class:"pageLabel",children:"Initiate an order"}),(0,a.jsx)("div",{children:"Initiate an order, you will be called in less than 10 minutes and your order will be delivered."}),(0,a.jsxs)("div",{style:{textAlign:"center",paddingTop:"30px"},children:[(0,a.jsx)("select",{id:"selectTag",value:s,onChange:e=>{i(e.target.value)},children:d.map(e=>(0,a.jsx)("option",{value:e.description,children:e.description}))}),(0,a.jsx)("p",{}),(0,a.jsx)("div",{style:{padding:"3px"},children:(0,a.jsxs)("div",{style:{border:"1px solid orange",padding:"3px"},children:[(0,a.jsx)("div",{style:{fontSize:"18px"},children:(0,a.jsx)("p",{children:s})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:"Inititing an order costs 50/= from your Kayas account. Deposit if your balance is low "}),(0,a.jsx)("p",{}),(0,a.jsx)("div",{class:"status",children:l}),(0,a.jsx)("div",{class:"button1",onClick:()=>{if(1==(0,c.Qb)(e))if(s==v||""==s)r("Make a selection first");else{let i=50;r("Initiating....."),(0,c.ck)(e.user.contact).then(t=>{if(t.accBal<i)r("Low account balance, deposit to your Kayas account atleast 500/=");else{let t=d.find(e=>e.description===s);t.client=e.user.contact,(0,c.ck)(t.contact).then(s=>{0==s.deliveryService.isDeliveryAgent?r("Not allowed, select another delivery agent/order"):0==s.deliveryService.isAvailable?r("Not available, try again in 15 minutess or select another delivery agent/order"):(0,c.L4)("/initiateDelivery",t).then(s=>{1==s.success?((0,c.Ub)(e.user.contact,i),r(s.msg)):r("Error must have occured, contact Kayas 0703852178")})})}})}},children:"Initiate order"})]})]})})]}),(0,a.jsx)("p",{}),(0,a.jsx)("a",{href:"/pages/deposit",children:(0,a.jsx)("div",{class:"button1",children:"Deposit to Kayas account"})})]}),(0,a.jsx)("div",{class:"col-md-3"})]})})}const r=l}}]);
//# sourceMappingURL=423.13feb20e.chunk.js.map