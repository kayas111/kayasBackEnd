"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[250,604,551],{8604:(e,t,r)=>{r.r(t),r.d(t,{AllArticles:()=>a,default:()=>l});r(7890);var s=r(5043),i=r(579);function a(){const[e,t]=(0,s.useState)((0,i.jsx)("div",{style:{padding:"40px",fontSize:"15px",color:"green",textAlign:"center"},children:"More stories loading......."}));return(0,s.useEffect)((()=>{fetch("/getAllArticles").then((e=>e.json())).then((e=>{t(e.map((e=>(0,i.jsx)("div",{class:"col-md-4",onClick:()=>{window.location.href="/pages/pubarticles/article/".concat(e.id)},children:(0,i.jsx)("div",{class:"pubArticleListItemContainer",children:(0,i.jsxs)("div",{class:"pubArticleListItemContainer2 backgroundColorHoverEffect3",children:[(0,i.jsx)("div",{class:"pubArticleListItemInstitution",children:e.institution}),(0,i.jsx)("div",{class:"pubArticleListItemHeadline",children:e.headline1}),(0,i.jsxs)("div",{class:"pubArticleListItemViewsAndVisits",children:[(0,i.jsxs)("div",{children:[e.visits," views, ",e.pubArticleOpinions.length," comments, Article ",e.id]}),(0,i.jsxs)("div",{children:["Created by ",e.author," 0",e.contact]})]})]})})}))))}))}),[]),(0,i.jsx)("div",{children:(0,i.jsx)("div",{class:"row",children:e})})}const l=a},4250:(e,t,r)=>{r.r(t),r.d(t,{CreateArticle:()=>u,default:()=>y});var s=r(7638),i=r(8289),a=r(9978),l=r(2551),n=(r(8604),r(7890),r(5043)),o=r(7977),c=r(8345),d=r.n(c),m=r(579);i.A.initializeApp({apiKey:"AIzaSyCf0LC-eL1pJ2Rpvh59ukbg5OUFm6IcrEA",authDomain:"kayas-42321.firebaseapp.com",projectId:"kayas-42321",storageBucket:"kayas-42321.appspot.com"});const p=i.A.storage().ref();function u(){const[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[c,u]=(0,n.useState)(0),[y,h]=(0,n.useState)("Image appears here");return(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{class:"col-md-3"}),(0,m.jsxs)("div",{class:"col-md-6",children:[(0,m.jsx)(a.dV,{}),(0,m.jsx)("div",{style:{padding:"8px"},children:(0,m.jsxs)("form",{method:"post",id:"articleCreateForm",action:"#",children:[(0,m.jsx)("div",{style:{paddingBottom:"8px"},children:(0,m.jsx)("div",{class:"formLabel",children:"Create article."})}),(0,m.jsxs)("div",{class:"mb-3",children:[(0,m.jsx)("div",{class:"formInputLabel",children:"Create headline"}),(0,m.jsx)("textarea",{rows:"3",type:"text",class:"form-control",autoComplete:"off",name:"articleHeadline1"}),(0,m.jsx)("br",{}),(0,m.jsxs)("div",{class:"formInputLabel",children:["Add photo ",(0,m.jsxs)("span",{style:{fontSize:"12px"},children:[" ",(0,m.jsx)("input",{type:"file",id:"pubArticleImageInputElement",name:"file",onChange:e=>{let t=document.querySelector("#pubArticleImageInputElement").files[0];"image/png"===t.type||"image/jpg"===t.type||"image/jpeg"===t.type||"image/gif"===t.type||"image/webp"===t.type||"image/avif"===t.type?h(URL.createObjectURL(t)):(window.location.href="/pages/pubarticles/createarticle",(0,s.yd)("toastAlert2","Image type not supported. Change image",3e3))}})]})]}),(0,m.jsx)("div",{style:{paddingTop:"4px"},children:(0,m.jsx)("img",{src:y,class:" d-block w-100",alt:""})}),(0,m.jsx)("br",{}),(0,m.jsx)("div",{class:"formInputLabel",children:"Paste your message below:"}),(0,m.jsx)(o.CKEditor,{config:{toolbar:["Bold","Italic","Link","NumberedList","BulletedList"]},editor:d(),onChange:(e,t)=>{const r=t.getData();i(r)}}),(0,m.jsx)("br",{}),(0,m.jsx)("div",{class:"formInputLabel",children:"Contact"}),(0,m.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contact"}),(0,m.jsx)("br",{}),(0,m.jsx)("div",{class:"formInputLabel",children:"PIN"}),(0,m.jsx)("input",{type:"password",class:"form-control",autoComplete:"off",name:"pin"})]}),(0,m.jsx)("div",{style:{fontSize:"12px",paddingTop:"10px"},dangerouslySetInnerHTML:{__html:e}}),(0,m.jsx)("progress",{value:c,max:"100",style:{width:"100%",color:"red"}}),(0,m.jsx)("div",{onClick:()=>{Array.from(document.getElementById("articleCreateForm").articleHeadline1.value.trim()).length<2?(0,s.yd)("toastAlert2","Enter a headline",3e3):Array.from(r).length<8?(0,s.yd)("toastAlert2","Type some information in the body section",3e3):Array.from(document.getElementById("articleCreateForm").contact.value.trim()).length<10||Array.from(document.getElementById("articleCreateForm")[2].value.trim()).length>10?(0,s.yd)("toastAlert2","Enter correct contact format e.g. 0703852178",3e3):Array.from(document.getElementById("articleCreateForm").pin.value.trim()).length<5||Array.from(document.getElementById("articleCreateForm")[3].value.trim()).length>5?(0,s.yd)("toastAlert2","Enter your PIN",3e3):(t("<div style='color:green;'>Creating please wait ......</div>"),fetch("/verifyUser",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:document.getElementById("articleCreateForm").contact.value,pin:document.getElementById("articleCreateForm").pin.value})}).then((e=>e.json())).then((e=>{!1===e.registered?window.alert("Visit menu and register with Kayas"):!0===e.registered&&!1===e.pin?(0,s.yd)("toastAlert2","Incorrect PIN. Try again",3e3):fetch("/getTradingDetails/".concat(parseInt(document.getElementById("articleCreateForm").contact.value))).then((e=>e.json())).then((e=>{let i=e[0];i.permissionTokensObj.createPubArticleTokens<1||i.permissionTokensObj.createPubArticleTokens>1?fetch("/createArticle",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({headline1:document.getElementById("articleCreateForm")[0].value.trim(),institution:i.institution.trim(),author:i.name.trim(),contact:parseInt(document.getElementById("articleCreateForm").contact.value.trim()),body:r.trim()})}).then((e=>e.json())).then((e=>{let r=e;if(1===e.limitReached)t("<div style='color:red;'>Maximum limit reached. Delete some articles to create space.</div>"),(0,s.yd)("toastAlert2","Maximum number of articles reached. Delete some",5e3);else{let i=document.querySelector("#pubArticleImageInputElement").files[0];if(t("<div style='color:green;'>Creating, please wait.....</div>"),document.getElementById("articleCreateForm").articleHeadline1.value="",document.getElementById("articleCreateForm").contact.value="",document.getElementById("articleCreateForm").pin.value="",void 0===i)window.location.href="/pages/pubarticles/article/".concat(e.id),(0,s.yd)("toastAlert1","Successful. Please wait....",3e3);else{let a=0;setInterval((()=>{94!==a&&(a+=1,u(a))}),400),t("<div style='color:green;'>Saving image.......</div>");let l="pubArticleImage_".concat(r.id),n=p.child("pubArticleImages/".concat(l));n.put(i).then((i=>{n.getDownloadURL({orderBy:"generation",limitTo:1}).then((i=>{let a=i;fetch("/addPubArticleImageUrlToArticle",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(r.contact),articleId:r.id,imageDownLoadUrl:a})}).then((r=>{t("<div style='color:green;'>Image saved</div>"),window.location.href="/pages/pubarticles/article/".concat(e.id),(0,s.yd)("toastAlert1","Successful. Please wait....",3e3)}))}))}))}}})):0===i.permissionTokensObj.createPubArticleTokens?t("<div style='color:red;'>".concat(i.name,', please whatsapp Kayas on 0703852178 to renew your tokens in order to be able to create more articles. <br></br><span style="color:green;">You can instead edit your already existing Articles to come up with a new Article. Go and see your Articles <span style="color:red;">and click the edit button</span> to edit one of your Articles. Thank you for keeping it Kayas.</span></div>')):t("<div style='color:green;'><span style='color:red;'>".concat(i.name,",</span> an error must have occured, please try again.</div>"))}))})))},class:"form-submit-btn backgroundColorHovereffect",children:"Create Article"}),(0,m.jsx)("p",{})]})})]}),(0,m.jsx)("div",{class:"col-md-3"}),(0,m.jsx)("div",{class:"col-md-3"}),(0,m.jsx)("div",{class:"col-md-6",children:(0,m.jsx)(l.default,{})}),(0,m.jsx)("div",{class:"col-md-3"})]})})}const y=u},2551:(e,t,r)=>{r.r(t),r.d(t,{MyArticles:()=>a,default:()=>l});r(7890);var s=r(5043),i=r(579);function a(){const[e,t]=(0,s.useState)("");const[r,a]=(0,s.useState)("");return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{style:{padding:"10px"},children:[(0,i.jsxs)("form",{method:"post",id:"myArticlesForm",action:"#",children:[(0,i.jsx)("div",{style:{paddingBottom:"8px"},children:(0,i.jsx)("div",{class:"formLabel",children:"See/share your Articles"})}),(0,i.jsxs)("div",{class:"mb-3",children:[(0,i.jsx)("div",{class:"formInputLabel",children:"Contact"}),(0,i.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contact"}),(0,i.jsx)("br",{}),(0,i.jsx)("div",{class:"formInputLabel",children:"PIN"}),(0,i.jsx)("input",{type:"password",class:"form-control",autoComplete:"off",name:"pin"})]}),(0,i.jsx)("div",{style:{fontSize:"17px",paddingBottom:"10px"},dangerouslySetInnerHTML:{__html:e}}),(0,i.jsx)("div",{onClick:()=>{Array.from(document.getElementById("myArticlesForm")[0].value).length<10||Array.from(document.getElementById("myArticlesForm")[0].value).length>10?t("<div style='color:red'>Please enter a correct number......</div>"):Array.from(document.getElementById("myArticlesForm")[1].value).length<5||Array.from(document.getElementById("myArticlesForm")[1].value).length>5?t("<div style='color:red;'>Please enter a PIN of 5 digits ......</div>"):(t("<div style='color:green;'>Getting your Articles, <span style='color:red;'>please wait ......</span></div>"),fetch("/verifyUser",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:document.getElementById("myArticlesForm")[0].value,pin:document.getElementById("myArticlesForm")[1].value})}).then((e=>e.json())).then((e=>{!1===e.registered?t("<div style='color:red;'>You are not registered with Kayas, please register with Kayas then begin writing articles</div>"):!0===e.registered&&!1===e.pin?t("<div style='color:green;'><span style='color:red;'>".concat(e.details.name,",</span> your <span style='color:red;'>PIN is incorrect,</span> please try again......</div>")):(t("<div style='color:green;'><span style='color:red;'>Please be patient as we get your articles ......</div>"),fetch("/getMyArticles",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:document.getElementById("myArticlesForm")[0].value})}).then((e=>e.json())).then((e=>{0===e.length?t("<div style='color:red;'>You don't have any Articles written. Please write some and get back. Thank you.</div>"):(e.reverse(),a(e.map((e=>{let t;return t=void 0===e.newCommentsNumb?0:e.newCommentsNumb,(0,i.jsx)("div",{class:"col-md-6",onClick:()=>{window.location.href="/pages/pubarticles/article/".concat(e.id)},children:(0,i.jsx)("div",{class:"pubArticleListItemContainer",children:(0,i.jsxs)("div",{class:"pubArticleListItemContainer2 backgroundColorHoverEffect3",children:[(0,i.jsx)("div",{class:"pubArticleListItemInstitution",children:e.institution}),(0,i.jsx)("div",{class:"pubArticleListItemHeadline",children:e.headline1}),(0,i.jsxs)("div",{class:"pubArticleListItemViewsAndVisits",children:[(0,i.jsxs)("div",{children:[e.visits," views, ",e.pubArticleOpinions.length," comments, Article ",e.id]}),(0,i.jsxs)("div",{children:["Created by ",e.author," 0",e.contact]})]})]})})})}))))})))})))},class:"form-submit-btn backgroundColorHovereffect",children:"See articles"}),(0,i.jsx)("p",{}),(0,i.jsx)("div",{class:"formInputLabel",children:"Share title"}),(0,i.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"articlesShareTitle"}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{onClick:()=>{Array.from(document.getElementById("myArticlesForm")[0].value).length<10||Array.from(document.getElementById("myArticlesForm")[0].value).length>10?t("<div style='color:red'>Please enter a correct number......</div>"):Array.from(document.getElementById("myArticlesForm")[1].value).length<5||Array.from(document.getElementById("myArticlesForm")[1].value).length>5?t("<div style='color:red;'>Please enter a PIN of 5 digits ......</div>"):(t("<div style='color:green;'>Getting your Articles, <span style='color:red;'>please wait ......</span></div>"),fetch("/verifyUser",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:document.getElementById("myArticlesForm")[0].value,pin:document.getElementById("myArticlesForm")[1].value})}).then((e=>e.json())).then((e=>{!1===e.registered?t("<div style='color:red;'>You are not registered with Kayas, please register with Kayas then begin writing articles</div>"):!0===e.registered&&!1===e.pin?t("<div style='color:green;'><span style='color:red;'>".concat(e.details.name,",</span> your <span style='color:red;'>PIN is incorrect,</span> please try again......</div>")):(t("<div style='color:green;'><span style='color:red;'>".concat(e.details.name,",</span> please be patient as we finalize with getting your articles ......</div>")),window.location.href="whatsapp://send?text=*".concat(document.getElementById("myArticlesForm").articlesShareTitle.value.trim(),"*%0A___________________________%0A%0ASee the details by tapping the link below:%0Ahttps://kayas-mak.herokuapp.com/pages/pubarticles/sharemyarticles/").concat(document.getElementById("myArticlesForm").contact.value,"%0A_______________________%0A_Powered by: \ud83c\udf39Kayas_"))})))},class:"form-submit-btn backgroundColorHovereffect",children:[(0,i.jsx)("span",{class:"fa fa-whatsapp"})," Share articles"]})]}),(0,i.jsx)("p",{}),(0,i.jsx)("p",{}),(0,i.jsx)("div",{class:"row",children:r})]})})}const l=a},9978:(e,t,r)=>{r.d(t,{dV:()=>d,tE:()=>c});var s=r(7638),i=r(8289),a=r(2546),l=(r(7890),r(5043)),n=r(6213),o=r(579);i.A.initializeApp({apiKey:"AIzaSyCf0LC-eL1pJ2Rpvh59ukbg5OUFm6IcrEA",authDomain:"kayas-42321.firebaseapp.com",projectId:"kayas-42321",storageBucket:"kayas-42321.appspot.com"});i.A.storage().ref();function c(){const[e,t]=(0,l.useState)(""),[r,i]=(0,l.useState)("");return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{padding:"5px"},children:(0,o.jsxs)("div",{class:"PubArticleSearchCompContainer1",children:[(0,o.jsx)("div",{style:{textAlign:"center"},children:e}),(0,o.jsx)("div",{children:(0,o.jsx)("input",{id:"articleSearchValue",class:"searchInputTag1",placeholder:"Search for articles",onKeyDown:e=>{"Enter"!==e.key&&"NumpadEnter"!==e.key||(t((0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontSize:"2px",height:"15px",width:"15px"},class:"spinner-border",role:"status",children:" "})," ",(0,o.jsx)("span",{children:"Searching....."})]})),n.A.post("/searchForArticles",{articleSearchValue:document.querySelector("#articleSearchValue").value}).then((e=>{console.log(e),0===e.data.length?((0,s.yd)("toastAlert2","No results",3e3),t(""),i("")):((0,s.yd)("toastAlert1","Successful",3e3),t(""),i((0,s.Ee)(e.data)))})))}})})]})}),(0,o.jsx)("div",{children:r})]})}function d(e){let t={padding:"5px"};return(0,o.jsxs)("div",{style:{paddingTop:"8px",display:"flex",flexWrap:"wrap"},children:[(0,o.jsx)("div",{style:t,children:(0,o.jsx)("div",{class:"button1",onClick:()=>{window.location.href="/pages/pubarticles/createarticle"},children:(0,o.jsxs)("span",{class:"hovereffect",children:[(0,o.jsx)("span",{class:"fa fa-plus"})," New article"]})})}),(0,o.jsxs)("div",{style:t,children:[(0,o.jsx)("div",{class:"button1",onClick:()=>{let t=window.prompt("Enter your PIN to delete this article.");(0,s.zL)(e.articleAuthorContact,t).then((t=>{if(!1===t.pin)(0,s.yd)("toastAlert2","Not allowed",3e3);else{const t=(0,a.KR)((0,a.c7)(),"pubArticleImages/pubArticleImage_".concat(e.articleId));(0,a.XR)(t).then((()=>{fetch("/deleteArticle",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({articleId:parseInt(e.articleId)})}).then((e=>e.json())).then((t=>{window.location.href="/pages/pubarticles/article/".concat(e.articleId)}))})).catch((t=>{fetch("/deleteArticle",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({articleId:parseInt(e.articleId)})}).then((e=>e.json())).then((t=>{window.location.href="/pages/pubarticles/article/".concat(e.articleId)}))}))}}))},children:(0,o.jsxs)("span",{class:"hovereffect",children:[(0,o.jsx)("span",{class:"fa fa-minus"})," Delete"]})}),"  "]}),(0,o.jsx)("div",{style:t,children:(0,o.jsx)("div",{class:"button1",onClick:()=>{window.location.href="/pages/pubarticles/assessmyarticles"},children:(0,o.jsx)("span",{class:"hovereffect",children:" Assess"})})})]})}}}]);
//# sourceMappingURL=250.0a98e8ca.chunk.js.map