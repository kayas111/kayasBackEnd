"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[7251,9093],{9093:(e,t,s)=>{s.r(t),s.d(t,{LoginPage:()=>c,default:()=>r});var n=s(65043),a=s(87638),l=s(76273),i=s(35407),o=s(70579);function c(){const[e,t,s]=(0,i.lT)(["user"]);let[c,r]=(0,n.useState)("");return(0,o.jsx)("div",{style:{padding:"3px"},children:(0,o.jsxs)("div",{class:"row",children:[(0,o.jsx)("div",{class:"col-md-3"}),(0,o.jsxs)("div",{class:"col-md-6",children:[(0,o.jsx)("div",{class:"label",children:"You need to log in"}),(0,o.jsx)("div",{class:"description",children:"Log in to proceed"}),(0,o.jsx)("p",{}),(0,o.jsxs)("form",{method:"post",id:"loginForm",children:[(0,o.jsxs)("div",{class:"mb-3",children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{class:"formInputLabel",children:"Contact"}),(0,o.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contact"}),(0,o.jsx)("br",{}),(0,o.jsx)("div",{class:"formInputLabel",children:"PIN e.g. 12345"}),(0,o.jsx)("input",{type:"password",class:"form-control",autoComplete:"off",name:"pin"})]}),(0,o.jsx)("p",{}),(0,o.jsx)("div",{class:"status",children:c}),(0,o.jsx)("div",{onClick:()=>{if(Array.from(document.getElementById("loginForm").contact.value.trim()).length<10||Array.from(document.getElementById("loginForm").contact.value.trim()).length>10)(0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3);else if(Array.from(document.getElementById("loginForm").pin.value).length<5||Array.from(document.getElementById("loginForm").pin.value).length>5)(0,a.yd)("toastAlert2","Enter PIN of 5 digits e.g. 12345",3e3);else{r("Please wait........");let e=document.getElementById("loginForm").contact.value,s=document.getElementById("loginForm").pin.value;(0,a.zL)(e.trim(),s.trim()).then((e=>{if(!1===e.registered)(0,a.yd)("toastAlert2","Not registered. Tap menu to register",3e3);else if(!1===e.pin)(0,a.yd)("toastAlert2","Incorrect PIN",3e3);else{let s={name:e.details.name,contact:e.details.contact,role:"user"};t("user",s,l.kA),r("Logging in......"),window.location.href=window.location.href}}))}},class:"button1",children:" Log in"}),(0,o.jsx)("p",{})]})]}),(0,o.jsx)("div",{class:"col-md-3"})]})})}const r=c},87251:(e,t,s)=>{s.r(t),s.d(t,{MakePayment:()=>c,default:()=>r});var n=s(65043),a=s(87638),l=s(9093),i=s(35407),o=s(70579);function c(){const[e]=(0,i.lT)(["user"]);let[t,s]=(0,n.useState)(""),[c,r]=(0,n.useState)(""),[d,m]=(0,n.useState)(""),[p,u]=(0,n.useState)(""),[x,h]=(0,n.useState)(!1),y={};return 1==(0,a.Qb)(e)?(0,o.jsx)("div",{style:{padding:"5px"},children:(0,o.jsxs)("div",{class:"row",children:[(0,o.jsx)("div",{class:"col-md-3"}),(0,o.jsxs)("div",{class:"col-md-6",children:[(0,o.jsx)("div",{class:"label",children:"Make payment"}),(0,o.jsx)("div",{class:"description",children:"Pay for a service or ticket. Enter the ID, search and pay"}),(0,o.jsx)("p",{}),(0,o.jsxs)("form",{method:"post",id:"makePaymentForm",action:"#",children:[(0,o.jsx)("div",{class:"formInputLabel",children:"Enter ticket/service ID"}),(0,o.jsx)("input",{type:"text",name:"ticketId",class:"form-control",autoComplete:"off"}),(0,o.jsx)("p",{}),(0,o.jsx)("div",{class:"status",children:d}),(0,o.jsx)("div",{class:"button1",onClick:()=>{let e=document.getElementById("makePaymentForm").ticketId.value.trim();Array.from(e).length<1?(0,a.yd)("toastAlert2","Enter a ticket Id",3e3):(m("Please wait..."),(0,a.L4)("/getTicketDetails",{ticketId:e}).then((e=>{if(0==e.length)m("Ticket/service ID does not exist");else{m("");let t=e;r(e[0]),s(t.map((e=>(0,o.jsx)("div",{children:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"20px",fontWeight:"600"},children:e.ticketId}),(0,o.jsxs)("div",{style:{fontSize:"14px"},children:["Amount: ",e.amount+" shs"]}),(0,o.jsxs)("div",{style:{fontSize:"14px"},children:["Tickets left: ",e.noOfTickets-e.payments.length]}),(0,o.jsxs)("div",{style:{fontSize:"14px"},children:["Contact: 0",e.ticketOwner]})]})})))),h(!0)}})))},children:"Search"}),(0,o.jsxs)("div",{style:{paddingTop:"10px",paddingBottom:"3px"},children:[" ",t," "]}),(0,o.jsx)("p",{}),(0,o.jsx)("div",{class:"formInputLabel",children:"Create a payment secret code (word or phrase)"}),(0,o.jsx)("input",{type:"text",name:"paymentSecretCode",class:"form-control",autoComplete:"off"}),(0,o.jsx)("p",{}),(0,o.jsx)("div",{class:"status",children:p}),(0,o.jsx)("div",{class:" button1",onClick:()=>{let t=document.getElementById("makePaymentForm").paymentSecretCode.value.trim();!1===x?(0,a.yd)("toastAlert2","Search before making a payment",3e3):(u("Please wait......"),y.ticketId=c.ticketId,y.amount=c.amount,y.name=e.user.name,y.paymentApproved=!1,y.paymentSettled=!1,y.contact=e.user.contact,Array.from(t).length<3?(0,a.yd)("toastAlert2","Create a payment secret code of atleast 3 characters",4e3):(y.paymentSecretCode=t,(0,a.ck)(e.user.contact).then((e=>{e.accBal<y.amount?u("Kayas account balance is low. Tap menu and deposit to your Kayas account"):(u("Paying........"),(0,a.L4)("/payForTicket",y).then((e=>{u(e.msg)})))}))))},children:"Pay now"}),(0,o.jsx)("p",{})]}),(0,o.jsx)("div",{style:{textAlign:"center",paddingTop:"20px"},children:(0,o.jsx)("a",{href:"/pages/payments/paymentshomepage",children:(0,o.jsx)("div",{class:"btn btn-success btn-sm",children:"Back to menu"})})})]}),(0,o.jsx)("div",{class:"col-md-3"})]})}):(0,o.jsx)("div",{children:(0,o.jsx)(l.LoginPage,{})})}const r=c}}]);
//# sourceMappingURL=7251.02233cb8.chunk.js.map