"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[6483],{749:(e,t,r)=>{r.d(t,{s:()=>n});r(65043);var s=r(62582),i=r(70579);function n(){let e={padding:"3px"};return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{style:{paddingTop:"8px",display:"flex",flexWrap:"wrap"},children:[(0,i.jsx)("div",{style:e,children:(0,i.jsxs)(s.N_,{to:"/pages/attendanceregs/myregisters",children:["  ",(0,i.jsxs)("div",{class:"button1",children:[(0,i.jsx)("span",{class:"fa fa-list"})," My registers"]})]})}),(0,i.jsx)("div",{style:e,children:(0,i.jsx)(s.N_,{to:"/pages/attendanceregs/createattendanceregister",children:(0,i.jsx)("div",{class:"button1",children:(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{class:"fa fa-plus"})," New register"]})})})})]})})}},6483:(e,t,r)=>{r.r(t),r.d(t,{EditRegister:()=>l,default:()=>a});var s=r(65043),i=r(66756),n=r(35323),o=r(749),d=r(70579);function l(){let e=(0,n.g)();const[t,r]=(0,s.useState)(""),[l,a]=(0,s.useState)(""),[c,g]=(0,s.useState)("");return(0,s.useEffect)((()=>{(0,i.yd)("toastAlert1","Please wait as we retrieve your Register ....",3e3),fetch("/attendanceregs/".concat(e.registrarContact,"/").concat(e.registerId)).then((e=>e.json())).then((e=>{0===e.presence?((0,i.yd)("toastAlert2","Does not exist",3e3),g('<div style="color:red;">This Register does not exist.</div>'),a('<div style="color:red;"> DOES NOT EXIST</div>')):(a(e.registerTitle),document.getElementById("registerEditForm").registerTitle.value=e.registerTitle,g('<div style="color:green;">Successful. <span style="color:red;">'.concat(e.name,'</span> please proceed with editing your Register. <span style="color:red;">But remember</span> that editing your register will make you lose all your registered contacts.</div>')))}))}),[]),(0,d.jsxs)("div",{children:[(0,d.jsx)(o.s,{}),(0,d.jsx)("p",{}),(0,d.jsxs)("div",{style:{padding:"20px"},children:[(0,d.jsxs)("div",{style:{color:"green",fontSize:"15px",fontWeight:""},children:["Edit/clear register: ",(0,d.jsx)("br",{}),(0,d.jsx)("div",{style:{fontSize:"15px"},dangerouslySetInnerHTML:{__html:l}})]}),(0,d.jsx)("p",{}),"   ",(0,d.jsx)("div",{style:{fontSize:"15px",paddingBottom:"10px"},dangerouslySetInnerHTML:{__html:c}}),(0,d.jsxs)("form",{method:"post",id:"registerEditForm",action:"#",children:[(0,d.jsxs)("div",{class:"mb-3",children:[(0,d.jsxs)("div",{class:"row",style:{paddingBottom:"3px"},children:[(0,d.jsx)("div",{class:"col-6",children:(0,d.jsx)("div",{style:{paddingBottom:"8px"},children:(0,d.jsx)("div",{class:"formLabel",children:"Register title"})})}),(0,d.jsx)("div",{style:{textAlign:"right"},class:"col-6",children:(0,d.jsx)("div",{class:"btn btn-danger btn-sm",onClick:()=>{document.getElementById("registerEditForm").registerTitle.value=""},children:"Clear Title"})})]}),(0,d.jsx)("textarea",{rows:"2",type:"text",class:"form-control",autoComplete:"off",name:"registerTitle",placeholder:"Type the New title here"}),(0,d.jsx)("br",{}),(0,d.jsx)("input",{type:"hidden",class:"form-control",autoComplete:"off",name:"contact",defaultValue:e.registrarContact}),(0,d.jsx)("input",{type:"password",class:"form-control",autoComplete:"off",name:"pin",placeholder:"Enter your PIN e.g. 12345 (5 digits)"})]}),(0,d.jsx)("div",{style:{fontSize:"17px",paddingBottom:"10px"},dangerouslySetInnerHTML:{__html:t}}),(0,d.jsx)("div",{style:{borderRadius:"18px"},onClick:()=>{Array.from(document.getElementById("registerEditForm").registerTitle.value).length<2||Array.from(document.getElementById("registerEditForm").registerTitle.value).length>200?(0,i.yd)("toastAlert2","Enter register title",3e3):Array.from(document.getElementById("registerEditForm").contact.value).length<9||Array.from(document.getElementById("registerEditForm").contact.value).length>10?(0,i.yd)("toastAlert2","Enter contact of 10 digits",3e3):Array.from(document.getElementById("registerEditForm").pin.value).length<5||Array.from(document.getElementById("registerEditForm").pin.value).length>5?(0,i.yd)("toastAlert2","Enter PIN",3e3):((0,i.yd)("toastAlert1","Please wait....",3e3),fetch("/verifyUser",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:document.getElementById("registerEditForm").contact.value,pin:document.getElementById("registerEditForm").pin.value})}).then((e=>e.json())).then((t=>{!1===t.registered?(0,i.yd)("toastAlert2","Not registered",3e3):!0===t.registered&&!1===t.pin?(0,i.yd)("toastAlert2","Incorrect PIN",3e3):((0,i.yd)("toastAlert1","Please wait.....",3e3),fetch("/editAttendeeRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({registerTitle:document.getElementById("registerEditForm").registerTitle.value,registrarContact:parseInt(document.getElementById("registerEditForm").contact.value),registerId:parseInt(e.registerId)})}).then((e=>e.json())).then((t=>{0===t.registerPresent?(0,i.yd)("toastAlert2","Not permitted because of mismatches",3e3):1===t.success?((0,i.yd)("toastAlert1","Successful",3e3),window.location.href="/pages/attendanceregs/".concat(document.getElementById("registerEditForm").contact.value,"/").concat(e.registerId),document.getElementById("registerEditForm").contact.value="",document.getElementById("registerEditForm").pin.value="",document.getElementById("registerEditForm").registerTitle.value=""):(0,i.yd)("toastAlert2","Error, try again",3e3)})))})))},class:"btn btn-success hovereffect",children:"Save"}),(0,d.jsx)("p",{})]})]})]})}const a=l}}]);
//# sourceMappingURL=6483.4c508284.chunk.js.map