{"version":3,"file":"static/js/7251.a87e96b4.chunk.js","mappings":"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","sources":["pages/LoginPage.js","pages/payments/MakePayment.js"],"sourcesContent":["import { useState } from \"react\"\r\nimport { ToastAlert,VerifyRegistrationAndPin } from \"./Functions\"\r\nimport { setCookieOptionsObj} from '../Variables';\r\nimport {useCookies} from 'react-cookie'\r\nexport function LoginPage(){\r\n    const [cookies,setCookie,removeCookie]=useCookies(['user'])\r\n    let [status, setStatus]=useState('')\r\n    return (<div style={{padding:\"3px\"}}>\r\n          <div class='row'>\r\n        <div class='col-md-3'></div>\r\n        <div class='col-md-6'>\r\n<div class=\"label\">You need to log in</div>\r\n<div class=\"description\">Log in to proceed</div><p></p>\r\n         \r\n    <form method=\"post\" id=\"loginForm\">\r\n    <div class=\"mb-3\">\r\n \r\n   <br></br><div class=\"formInputLabel\">Contact</div>\r\n   <input type=\"text\" class=\"form-control\" autoComplete=\"off\" name=\"contact\" ></input>\r\n\r\n  \r\n   <br></br>\r\n   <div class=\"formInputLabel\">PIN e.g. 12345</div>\r\n     <input type=\"password\" class=\"form-control\" autoComplete=\"off\" name=\"pin\" ></input>\r\n  \r\n     </div><p></p>\r\n      <div class=\"status\">{status}</div>\r\n     <div onClick={\r\n      ()=>{\r\n  if(Array.from(document.getElementById(\"loginForm\").contact.value.trim()).length<10||Array.from(document.getElementById(\"loginForm\").contact.value.trim()).length>10)\r\n        {\r\n          ToastAlert('toastAlert2','Enter contact of 10 digits',3000)\r\n        }\r\n        else if(Array.from(document.getElementById(\"loginForm\").pin.value).length<5||Array.from(document.getElementById(\"loginForm\").pin.value).length>5)\r\n        {\r\n          ToastAlert('toastAlert2','Enter PIN of 5 digits e.g. 12345',3000)\r\n        }\r\nelse{\r\n\r\nsetStatus('Please wait........')\r\n  \r\nlet contact=document.getElementById(\"loginForm\").contact.value,pin=document.getElementById(\"loginForm\").pin.value\r\n VerifyRegistrationAndPin(contact.trim(),pin.trim()).then(resp=>{\r\n    \r\n    if(resp.registered===false){\r\n     ToastAlert('toastAlert2','Not registered. Tap menu to register',3000)\r\n    }else\r\n    \r\n       if(resp.pin===false){\r\n         \r\n         ToastAlert('toastAlert2','Incorrect PIN',3000)\r\n       }else{\r\n         let user={name:resp.details.name,contact:resp.details.contact,role:'user'}\r\n         setCookie('user',user,setCookieOptionsObj)\r\n       setStatus('Logging in......')\r\n       window.location.href=window.location.href\r\n      //  document.getElementById(\"loginForm\").pin.value=\"\"\r\n      //  document.getElementById(\"loginForm\").contact.value=\"\"\r\n       \r\n       }\r\n     })\r\n    \r\n\r\n\r\n \r\n}\r\n      } \r\n\r\n     } class=\"button1\"> Log in</div><p></p>\r\n    \r\n     </form>\r\n\r\n\r\n        </div>\r\n        <div class='col-md-3'></div>\r\n      </div>\r\n     \r\n    \r\n    </div>)\r\n}\r\n\r\nexport default LoginPage","\r\nimport React, {useEffect,useState} from 'react'\r\nimport { ToastAlert,IsLoggedIn, Post, GetTradingDetails } from '../Functions';\r\nimport {LoginPage} from '../LoginPage'\r\nimport {useCookies} from 'react-cookie'\r\n\r\nexport function MakePayment(){\r\n    const [cookies]=useCookies(['user'])\r\n    let [ticket,setTicket]=useState('')\r\n    let [ticketDetails,setTicketDetails]=useState('')\r\n    let [searchStatus,setSearchStatus]=useState('')\r\n    let [payStatus,setPayStatus]=useState('')\r\n    let [searchSuccessful,setSearchSuccessful]=useState(false)\r\n    let paymentDetails={}\r\n  \r\n\r\n if(IsLoggedIn(cookies)==true){\r\n\r\n        return(\r\n        \r\n        <div style={{padding:\"5px\"}}>\r\n    <div class=\"row\">\r\n        <div class=\"col-md-3\"></div>\r\n        <div class=\"col-md-6\">\r\n            <div class=\"label\">Make payment</div>\r\n            <div class=\"description\">Pay for a service or ticket. Enter the ID, search and pay</div><p></p>\r\n    \r\n            <form  method=\"post\" id=\"makePaymentForm\" action=\"#\">\r\n          \r\n            <div class=\"formInputLabel\">Enter ticket/service ID (name of ticket) and search for it</div>\r\n          <input type=\"text\" name='ticketId' class=\"form-control\" autoComplete=\"off\" /><p></p>\r\n          \r\n          \r\n          \r\n    \r\n    \r\n    <div class=\"status\">{searchStatus}</div>\r\n    \r\n          <div  class=\"button1\"\r\n          \r\n          onClick={()=>{\r\n            let form=document.getElementById('makePaymentForm'),ticketId=form.ticketId.value.trim()\r\n            \r\n            if(Array.from(ticketId).length<1){\r\n    \r\n        \r\n                ToastAlert('toastAlert2','Enter a ticket Id',3000)\r\n            } else{\r\n                setSearchStatus('Please wait...')\r\n            Post('/getTicketDetails',{ticketId:ticketId}).then(resp=>{\r\n                \r\n                if(resp.length==0){\r\n                    setSearchStatus('Ticket/service ID does not exist')\r\n                }else{\r\n                    setSearchStatus('')\r\n    let ticketDetails=resp\r\n    setTicketDetails(resp[0])\r\n    setTicket(ticketDetails.map((ticket)=>(\r\n    <div>\r\n    \r\n    <div>\r\n    <div style={{fontSize:\"20px\",fontWeight:\"600\"}}>{ticket.ticketId}</div>\r\n    <div style={{fontSize:\"14px\"}}>Amount: {ticket.amount +' shs'}</div>\r\n    <div style={{fontSize:\"14px\"}}>Tickets left: {ticket.noOfTickets - ticket.payments.length}</div>\r\n    <div style={{fontSize:\"14px\"}}>Contact: 0{ticket.ticketOwner}</div>\r\n    </div>\r\n    \r\n    </div>\r\n    )))\r\n    setSearchSuccessful(true)\r\n    \r\n                }\r\n    \r\n    \r\n            })\r\n            }\r\n            \r\n           \r\n    \r\n    \r\n    \r\n          }}\r\n          >Search</div>\r\n                            \r\n                 <div style={{paddingTop:\"10px\",paddingBottom:\"3px\"}}> {ticket} </div>\r\n    <p></p>\r\n    <div class=\"formInputLabel\">Create a payment secret code or word (You will be asked for this secret to confirm your payment)</div>\r\n                 <input type=\"text\" name='paymentSecretCode' class=\"form-control\" autoComplete=\"off\" /><p></p>\r\n    <div class=\"status\">{payStatus}</div>\r\n           <div   class=\" button1\"\r\n           onClick={()=>{\r\n         \r\n                \r\n            let form=document.getElementById('makePaymentForm'),paymentSecretCode=form.paymentSecretCode.value.trim()\r\n            if(searchSuccessful===false){\r\n                ToastAlert('toastAlert2','Search before making a payment',3000)\r\n            }else{\r\n    setPayStatus('Please wait......')\r\n    paymentDetails.ticketId=ticketDetails.ticketId\r\n    paymentDetails.amount=ticketDetails.amount\r\n    paymentDetails.name=cookies.user.name\r\n    paymentDetails.paymentApproved=false\r\n    paymentDetails.paymentSettled=false\r\n    paymentDetails.contact=cookies.user.contact\r\n    if(Array.from(paymentSecretCode).length<3){\r\n        ToastAlert('toastAlert2','Create a payment secret code of atleast 3 characters',4000)\r\n    }else{\r\n        paymentDetails.paymentSecretCode=paymentSecretCode\r\n        \r\n        GetTradingDetails(cookies.user.contact).then(traderDetails=>{\r\n            \r\n            // if(traderDetails.accBal<paymentDetails.amount){\r\n    \r\n            //     setPayStatus('Kayas account balance is low. Tap menu and deposit to your Kayas account')\r\n            // }else{\r\n    \r\n            //     setPayStatus('Paying........')\r\n            //     Post('/payForTicket',paymentDetails).then(resp=>{\r\n            //         setPayStatus(resp.msg)\r\n            //     })\r\n    \r\n            // }\r\n            setPayStatus('Paying........')\r\n            Post('/payForTicket',paymentDetails).then(resp=>{\r\n                setPayStatus(resp.msg)\r\n            })\r\n\r\n\r\n        })\r\n    }\r\n            }\r\n           \r\n            \r\n           }}\r\n           \r\n           >Pay now</div><p></p>\r\n          \r\n           </form>\r\n    \r\n           <div style={{textAlign:\"center\",paddingTop:\"20px\"}}><a href=\"/pages/payments/paymentshomepage\">\r\n                    <div class=\"btn btn-success btn-sm\">Back to menu</div></a></div>\r\n    \r\n    \r\n        </div>\r\n        <div class=\"col-md-3\"></div>\r\n    </div>\r\n        </div>)\r\n\r\n }else{\r\nreturn (\r\n    <div>\r\n        <LoginPage/>\r\n    </div>\r\n)\r\n }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport default MakePayment"],"names":["LoginPage","cookies","setCookie","removeCookie","useCookies","status","setStatus","useState","_jsx","style","padding","children","_jsxs","class","method","id","type","autoComplete","name","onClick","Array","from","document","getElementById","contact","value","trim","length","ToastAlert","pin","VerifyRegistrationAndPin","then","resp","registered","user","details","role","setCookieOptionsObj","window","location","href","MakePayment","ticket","setTicket","ticketDetails","setTicketDetails","searchStatus","setSearchStatus","payStatus","setPayStatus","searchSuccessful","setSearchSuccessful","paymentDetails","IsLoggedIn","action","ticketId","Post","map","fontSize","fontWeight","amount","noOfTickets","payments","ticketOwner","paddingTop","paddingBottom","paymentSecretCode","paymentApproved","paymentSettled","GetTradingDetails","traderDetails","msg","textAlign"],"sourceRoot":""}