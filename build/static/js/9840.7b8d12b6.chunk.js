"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[9840],{79840:(e,t,s)=>{s.r(t),s.d(t,{AttendanceRegister:()=>g,default:()=>h});var n=s(65043),a=s(66756),o=s(35407),c=s(35323),r=s(749),i=s(76273),d=s(62582),l=s(70579);function g(){let e=(0,c.g)();const[t,s]=(0,n.useState)(""),[g,h,m]=(0,o.lT)(["user"]),[p,u]=(0,n.useState)(""),[x,y]=(0,n.useState)(""),[f,j]=(0,n.useState)("");const[v,S]=(0,n.useState)(""),[I,A]=(0,n.useState)(""),[C,b]=(0,n.useState)(""),[E,B]=(0,n.useState)([]),[T,w]=(0,n.useState)(""),[R,F]=(0,n.useState)(""),[k,D]=(0,n.useState)("10000"),[P,L]=(0,n.useState)("10000"),[N,O]=(0,n.useState)("100"),[_,J]=(0,n.useState)(""),[M,z]=(0,n.useState)(""),[W,G]=(0,n.useState)(""),[H,K]=(0,n.useState)("Please wait......"),[Y,Q]=(0,n.useState)("Caltulating......"),[V,q]=(0,n.useState)(""),[U,X]=(0,n.useState)(""),[Z,$]=(0,n.useState)(""),[ee,te]=(0,n.useState)("caltulating....."),[se,ne]=(0,n.useState)(""),[ae,oe]=(0,n.useState)("");let ce=0;const[re,ie]=(0,n.useState)(1);let de="whatsapp://send?text=*".concat(H,"*%0A%0ATap link below to register:%0A").concat(i.J_,"/pages/attendanceregs/").concat(e.registrar,"/").concat(e.id,"%0A%0A*Thank you.*");function le(e){!0===(0,a.Qb)(g)&&(s("Getting contacts, please wait......"),fetch("/attendeesMessage/".concat(e.registrar,"/").concat(e.id)).then((e=>e.json())).then((t=>{fetch("/attendees/".concat(e.registrar,"/").concat(e.id)).then((e=>e.json())).then((t=>{let n=t,o=1,c=n.registerDoc;ce=1,A(n.registerDoc.attendees.length);!0===n.closed?(0,a.yd)("toastAlert2","Register closed. Contact Kayas",3e3):(c.attendees.forEach((e=>{e.position=o,o++})),J(c.attendees.map((t=>(0,l.jsx)("div",{style:{padding:"0px"},children:(0,l.jsx)("div",{class:"contactsRegisterContactRecordContainer",children:(0,l.jsxs)("div",{class:"row ",children:[(0,l.jsxs)("div",{class:"col-6",children:[t.position,". ",t.name]}),(0,l.jsx)("div",{class:"col-5",style:{textAlign:"right"},children:(0,l.jsx)("a",{onClick:()=>{window.location.href="tel:0".concat(t.contact)},children:(0,l.jsxs)("span",{class:"hovereffect",children:[(0,l.jsx)("span",{class:"fa fa-phone"})," Call: 0",t.contact]})})}),(0,l.jsx)("div",{class:"col-1",style:{textAlign:"center"},children:(0,l.jsx)("a",{onClick:()=>{1==window.confirm('Select "OK" to delete 0'.concat(t.contact))&&((0,a.yd)("toastAlert1","Deleting 0".concat(t.contact,", wait for confirmation message....."),3e3),fetch("/removeFromAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(t.contact),registrarContact:M,registerId:parseInt(e.id)})}).then((e=>e.json())).then((t=>{0===t.registerPresent?(0,a.yd)("toastAlert1","You can not proceed with the action because the Regsiter is not present",2e3):0===t.attendeeInList?(0,a.yd)("toastAlert2","Contact is not in the list",3e3):1===t.success?((0,a.yd)("toastAlert1","Deleted Successfully",3e3),A(I-1),le(e)):(0,a.yd)("toastAlert1","Error occured, try again",3e3)})))},children:(0,l.jsx)("span",{class:"hovereffect",children:(0,l.jsx)("span",{class:"fa fa-trash"})})})})]})})})))),b("".concat(c.attendees.length," contacts")),s("Successful. Scroll to see"))}))})))}return(0,n.useEffect)((()=>{window.location.href="#",fetch("/attendanceregs/".concat(e.registrar,"/").concat(e.id)).then((e=>e.json())).then((e=>{0===e.presence?(K("This Register does not exist. Please try another or create your own register too for free"),S("Kayas 0703852178-WhatsApp")):(S(e.name),G(e.institution),K(e.registerTitle),z(e.contact))})),fetch("/attendees/".concat(e.registrar,"/").concat(e.id)).then((e=>e.json())).then((e=>{A(e.registerDoc.attendees.length),B(e.registerDoc.attendees)})),fetch("/getTradingDetails/".concat(e.registrar)).then((e=>e.json())).then((e=>{Q(e[0].accBal),y(e[0].permissionTokensObj.sendSmsTokens)}))}),[]),(0,l.jsxs)("div",{style:{padding:"3px"},children:[(0,l.jsx)("div",{style:{padding:"5px"},children:(0,l.jsxs)("div",{class:"row",children:[(0,l.jsx)("div",{class:"col-md-3"}),(0,l.jsxs)("div",{class:"col-md-6",children:[(0,l.jsx)(r.s,{}),(0,l.jsx)("p",{}),(0,l.jsxs)("div",{class:"pageLabel",children:[I," Contacts ",(0,l.jsxs)("span",{style:{paddingLeft:"10px"},children:["ID: ",e.id]})]}),(0,l.jsx)("div",{style:{fontSize:"15px"},children:H}),(0,l.jsxs)("div",{style:{paddingTop:"20px"},children:[(0,l.jsxs)("form",{id:"messengingForm",children:[(0,l.jsx)("div",{class:"bold",children:"Save your contact"}),(0,l.jsx)("div",{class:"light",children:"Enter your name (optional) and contact then save."}),(0,l.jsx)("p",{}),(0,l.jsxs)("div",{class:"mb-3",children:[(0,l.jsx)("div",{class:"formInputLabel",children:"Name (optional)"}),(0,l.jsx)("textarea",{row:"2",type:"text",class:"form-control",autoComplete:"off",name:"name"}),(0,l.jsx)("br",{}),(0,l.jsx)("div",{class:"formInputLabel",children:"Contact"}),(0,l.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contact"})]}),(0,l.jsx)("div",{class:"row",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{class:"status",children:t}),(0,l.jsx)("div",{style:{padding:"3px"},children:(0,l.jsxs)("div",{style:{width:"100%"},onClick:()=>{let t;Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10?((0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value=""):(t=Array.from(document.getElementById("messengingForm").name.value).length<2?"":document.getElementById("messengingForm").name.value.trim(),s("Saving......."),fetch("/getTradingDetails/".concat(M)).then((e=>e.json())).then((n=>{n[0];fetch("/addToAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:t,contact:parseInt(document.getElementById("messengingForm").contact.value.trim()),registrarContact:M,registerId:parseInt(e.id)})}).then((e=>e.json())).then((e=>{0===e.registerPresent?(0,a.yd)("toastAlert2","Register does not exist",3e3):1===e.success?((0,a.yd)("toastAlert1","Successful, save another",3e3),s("Saved"),document.getElementById("messengingForm").contact.value="",document.getElementById("messengingForm").name.value="",A(e.attendees.length)):"memberPresent"===e.success?((0,a.yd)("toastAlert2","Contact already exists",3e3),document.getElementById("messengingForm").contact.value="",document.getElementById("messengingForm").name.value=""):(0,a.yd)("toastAlert2","Error occured, try again",3e3)}))})))},type:"text",class:"btn btn-success",children:[(0,l.jsx)("span",{class:"fa fa-save"})," Save"]})}),(0,l.jsx)("div",{style:{paddingTop:"8px"},class:"light",children:"Other options"}),(0,l.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,l.jsx)("div",{style:{padding:"3px"},children:(0,l.jsxs)("div",{onClick:()=>{le(e)},type:"text",class:"button1",children:[(0,l.jsx)("span",{class:"fa fa-eye"})," Display contacts"]})}),(0,l.jsx)("div",{style:{padding:"3px"},children:(0,l.jsx)(d.N_,{to:"/pages/sendsmsattendanceregs/".concat(e.registrar,"/").concat(e.id),children:(0,l.jsxs)("div",{class:"button1",children:[(0,l.jsx)("span",{class:"fa fa-envelope"})," Send SMS"]})})}),(0,l.jsx)("div",{style:{padding:"3px"},children:(0,l.jsxs)("div",{onClick:()=>{Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10?((0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value=""):((0,a.yd)("toastAlert1","Deleting.....",2e3),fetch("/removeFromAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(document.getElementById("messengingForm").contact.value.trim()),registrarContact:M,registerId:parseInt(e.id)})}).then((e=>e.json())).then((e=>{0===e.registerPresent?u("<div style='color:red;'>You can not proceed with the action because the Regsiter is not present</div>"):((0,a.yd)("toastAlert1","Deleting.......",2e3),0===e.attendeeInList?(0,a.yd)("toastAlert2","not in the list",3e3):1===e.success?((0,a.yd)("toastAlert1","Successful",2e3),document.getElementById("messengingForm").contact.value="",A(I-1)):((0,a.yd)("toastAlert1","Error occured, try again",3e3),document.getElementById("messengingForm").contact.value=""))})))},type:"text",class:"button1",children:[(0,l.jsx)("span",{class:"fa fa-trash"})," Delete contact"]})}),(0,l.jsx)("div",{style:{padding:"3px"},children:(0,l.jsx)("div",{onClick:()=>{if(Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10)(0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value="";else if(0===E.length)(0,a.yd)("toastAlert2","Register not ready, try again",3e3);else{let e,t,s=0,n=parseInt(document.getElementById("messengingForm").contact.value);E.forEach((a=>{a.contact===n&&(e=s+1,t=a),s++})),void 0===e?(0,a.yd)("toastAlert2","Not in the list",3e3):(0,a.yd)("toastAlert1","".concat(t.name," at position ").concat(e," in the list"),4e3)}},type:"text",class:"button1",children:" Get details"})})]})]})})]}),(0,l.jsxs)("div",{style:{background:"#e9e8e8",paddingTop:"5px"},children:[(0,l.jsx)("div",{style:{fontSize:"17px",textAlign:"center",color:"black",fontWeight:"600",background:"white"},dangerouslySetInnerHTML:{__html:C}}),(0,l.jsx)("div",{children:_})]})]})]}),(0,l.jsx)("div",{class:"col-md-3"}),(0,l.jsx)("div",{class:"col-md-3"}),(0,l.jsxs)("div",{class:"col-md-6",children:[(0,l.jsx)("div",{style:{padding:"10px"},children:(0,l.jsx)("div",{style:{color:"red",fontSize:"20px",textAlign:"center",paddingTop:"20px",borderBottom:"1px solid red"},children:"Below is for only the Admin"})}),(0,l.jsx)("div",{class:"pageLabel",children:"Share a contact to another register"}),(0,l.jsx)("div",{class:"pageDescription",children:"Send a contact from this register to another register. To send, enter the ID of the register to send to and enter the position that contact holds in this register"}),(0,l.jsx)("p",{}),(0,l.jsxs)("form",{id:"sendContactToRegister",children:[(0,l.jsx)("div",{style:{paddingBottom:"8px"},children:(0,l.jsx)("div",{class:"formLabel",children:"Share a contact to another register"})}),(0,l.jsxs)("div",{style:{paddingBottom:"5px"},children:["Only for the Register Admin, ",v," "]}),(0,l.jsxs)("div",{style:{paddingTop:"5px"},children:["Sending to: ",(0,l.jsx)("span",{style:{padding:"5px"},dangerouslySetInnerHTML:{__html:R}})," "]}),(0,l.jsxs)("div",{class:"mb-3",children:[(0,l.jsx)("input",{type:"hidden",class:"form-control",autoComplete:"off",name:"registrarContact",defaultValue:M}),(0,l.jsx)("div",{class:"formInputLabel",children:"Enter the ID of the register to send to:"}),(0,l.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"registerId",onChange:()=>{F("Searching for register........."),fetch("/getAttendanceRegDetails",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({registrarContact:M,registerId:parseInt(document.getElementById("sendContactToRegister").registerId.value)})}).then((e=>e.json())).then((e=>{0===e.length?(0,a.yd)("toastAlert2","You have no register with that ID",3e3):(F("".concat(e[0].registerTitle)),(0,a.yd)("toastAlert1","Sending to ".concat(e[0].registerTitle," "),4e3))}))}})," ",(0,l.jsx)("br",{}),(0,l.jsx)("div",{class:"formInputLabel",children:"Position of the contact in this register (e.g. 1,2,3,...)"}),(0,l.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contactPosition"})]}),(0,l.jsx)("div",{style:{padding:"5px",fontSize:"15px"},dangerouslySetInnerHTML:{__html:T}}),(0,l.jsx)("div",{onClick:()=>{if(!0===(0,a.Qb)(g))if("NaN"===parseInt(document.getElementById("sendContactToRegister").contactPosition.value))(0,a.yd)("toastAlert2","Enter a position corresponding to a contact e.g 1,2,3,....",3e3);else{let e=parseInt(document.getElementById("sendContactToRegister").contactPosition.value);if(e<1)(0,a.yd)("toastAlert2","Position can not be less than 1",3e3);else{let t=E[e-1];void 0===t?(0,a.yd)("toastAlert2","Refresh the page to update OR position ".concat(document.getElementById("sendContactToRegister").contactPosition.value," does not exist in this register"),7e3):fetch("/addToAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:t.name,contact:t.contact,registrarContact:M,registerId:parseInt(document.getElementById("sendContactToRegister").registerId.value)})}).then((e=>e.json())).then((e=>{1===e.success?((0,a.yd)("toastAlert1","Successful",3e3),document.getElementById("sendContactToRegister").contactPosition.value=""):"memberPresent"===e.success?((0,a.yd)("toastAlert2","Contact is already in the register you are sending to",4e3),document.getElementById("sendContactToRegister").contactPosition.value=""):0===e.registerPresent&&((0,a.yd)("toastAlert2","Register does not exist",3e3),document.getElementById("sendContactToRegister").contactPosition.value="")}))}}},type:"text",style:{width:"100%"},class:"btn btn-success",children:"Send"})]})]}),(0,l.jsx)("div",{class:"col-md-3"})]})}),(0,l.jsx)("p",{}),(0,l.jsxs)("div",{class:"row",style:{textAlign:"center",padding:"20px",fontSize:"15px"},children:[(0,l.jsx)("div",{class:"col-md-3"}),(0,l.jsx)("div",{class:"col-md-6",children:(0,l.jsxs)("div",{style:{padding:"3px"},children:["Share to WhatsApp friends or Groups ",(0,l.jsx)("br",{})," ",(0,l.jsx)("a",{style:{color:"green"},href:de,children:(0,l.jsxs)("span",{class:"button1",children:[(0,l.jsx)("span",{class:"fa fa-whatsapp"})," Share this Register"]})})]})}),(0,l.jsx)("div",{class:"col-md-3"})]})]})}const h=g},749:(e,t,s)=>{s.d(t,{s:()=>o});s(65043);var n=s(62582),a=s(70579);function o(){let e={padding:"3px"};return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{style:{paddingTop:"8px",display:"flex",flexWrap:"wrap"},children:[(0,a.jsx)("div",{style:e,children:(0,a.jsxs)(n.N_,{to:"/pages/attendanceregs/myregisters",children:["  ",(0,a.jsxs)("div",{class:"button1",children:[(0,a.jsx)("span",{class:"fa fa-list"})," My registers"]})]})}),(0,a.jsx)("div",{style:e,children:(0,a.jsx)(n.N_,{to:"/pages/attendanceregs/createattendanceregister",children:(0,a.jsx)("div",{class:"button1",children:(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{class:"fa fa-plus"})," New register"]})})})})]})})}}}]);
//# sourceMappingURL=9840.7b8d12b6.chunk.js.map