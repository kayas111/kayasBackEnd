"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[556],{7556:(e,t,s)=>{s.r(t),s.d(t,{FoodDeliveryRequests:()=>l,default:()=>d});var n=s(5043),o=s(7638),i=s(579);function l(){const[e,t]=(0,n.useState)(""),[s,l]=(0,n.useState)("Loading requests......");let d=0,r=0;async function c(){await fetch("/fooddeliveryrequests").then((e=>e.json())).then((async e=>{if(r=e.length,r>d&&((0,o.yd)("toastAlert1","New deliveries available",1e4),d=r),0===e.length)l("No requests yet."),(0,o.yd)("toastAlert2","No requests yet",4e3);else{e.reverse();let t=e.length;l(e.map((e=>(t--,(0,i.jsx)("div",{style:{padding:"5px"},children:(0,i.jsxs)("div",{style:{border:"1px solid orange",padding:"5px"},children:[(0,i.jsxs)("div",{style:{fontWeight:"600",fontSize:"17px",borderBottom:"1px solid grey"},children:[t+1,". ",e.name," - 0",e.contact]}),(0,i.jsxs)("div",{children:["Location: ",e.location]}),(0,i.jsxs)("div",{children:["Room: ",e.room]}),(0,i.jsxs)("div",{children:["Description: ",e.desc]})]})}))))),setInterval((()=>{c()}),5e4)}}))}return(0,n.useEffect)((()=>{c()}),[]),(0,i.jsxs)("div",{style:{padding:"5px"},class:"row",children:[(0,i.jsx)("div",{class:"col-md-3"}),(0,i.jsxs)("div",{class:"col-md-6",children:[(0,i.jsx)("div",{class:"pageLabel",children:"Delivery requests"}),(0,i.jsx)("p",{}),(0,i.jsxs)("form",{method:"post",id:"turnOnFoodDeliveryForm",children:[(0,i.jsxs)("div",{class:"mb-3",children:[(0,i.jsx)("div",{class:"formInputLabel",children:"Response message if service is off"}),(0,i.jsx)("textarea",{rows:3,type:"text",class:"form-control",autoComplete:"off",name:"notice"})]}),(0,i.jsx)("div",{style:{padding:"3px",color:"orange",fontWeight:"600"},children:e}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,i.jsx)("div",{style:{padding:"5px"},children:(0,i.jsx)("div",{class:"button1",onClick:()=>{let e={task:"turnFoodDeliveryServiceOnOff"};fetch("/getControls").then((e=>e.json())).then((s=>{!0===s[0].foodDeliveryControls.deliveryServiceIsOn?t("Turning off....."):t("Turning on....."),fetch("/updateControls",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{t(e.msg)}))}))},children:"Turn food delivery service on/off"})}),(0,i.jsx)("div",{style:{padding:"5px"},children:(0,i.jsxs)("div",{onClick:()=>{if(Array.from(document.getElementById("turnOnFoodDeliveryForm").notice.value.trim()).length<2)(0,o.yd)("toastAlert2","Type a comment",4e3);else{let e={task:"updateFoodDeliveryServiceNotice",notice:document.getElementById("turnOnFoodDeliveryForm").notice.value.trim()};t("Setting new notice....."),fetch("/updateControls",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{t(e.msg)}))}},class:"button1",children:[(0,i.jsx)("span",{class:"fa fa-save"})," Set message"]})})]}),(0,i.jsx)("p",{})]}),(0,i.jsx)("p",{}),(0,i.jsx)("div",{style:{fontSize:"20px",padding:"8px",textAlign:"center",fontWeight:"600"},children:"Delivery requests"}),(0,i.jsx)("div",{children:s})]}),(0,i.jsx)("div",{class:"col-md-3"})]})}const d=l}}]);
//# sourceMappingURL=556.07cf80f8.chunk.js.map