"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[9840],{79840:(e,t,s)=>{s.r(t),s.d(t,{AttendanceRegister:()=>l,default:()=>g});var n=s(65043),a=s(87638),o=s(35407),r=s(35323),i=s(749),c=s(76273),d=s(70579);function l(){let e=(0,r.g)();const[t,s]=(0,n.useState)(""),[l,g,h]=(0,o.lT)(["user"]),[p,m]=(0,n.useState)(""),[x,u]=(0,n.useState)(""),[y,f]=(0,n.useState)("");const[j,v]=(0,n.useState)(""),[S,I]=(0,n.useState)(""),[A,b]=(0,n.useState)(""),[C,E]=(0,n.useState)([]),[B,T]=(0,n.useState)(""),[w,R]=(0,n.useState)(""),[F,k]=(0,n.useState)("10000"),[D,P]=(0,n.useState)("10000"),[L,N]=(0,n.useState)("100"),[_,z]=(0,n.useState)(""),[M,O]=(0,n.useState)(""),[W,J]=(0,n.useState)(""),[G,H]=(0,n.useState)("Please wait......"),[K,Q]=(0,n.useState)("Caltulating......"),[Y,U]=(0,n.useState)(""),[V,Z]=(0,n.useState)(""),[q,X]=(0,n.useState)(""),[$,ee]=(0,n.useState)("caltulating....."),[te,se]=(0,n.useState)(""),[ne,ae]=(0,n.useState)("");let oe=0;const[re,ie]=(0,n.useState)(1);let ce="whatsapp://send?text=*".concat(G,"*%0A%0ATap link below to register:%0A").concat(c.J_,"/pages/attendanceregs/").concat(e.registrar,"/").concat(e.id,"%0A%0A*Thank you.*");return(0,n.useEffect)((()=>{fetch("/attendanceregs/".concat(e.registrar,"/").concat(e.id)).then((e=>e.json())).then((e=>{0===e.presence?(H("This Register does not exist. Please try another or create your own register too for free"),v("Kayas 0703852178-WhatsApp")):(v(e.name),J(e.institution),H(e.registerTitle),O(e.contact))})),fetch("/attendees/".concat(e.registrar,"/").concat(e.id)).then((e=>e.json())).then((e=>{I(e.registerDoc.attendees.length),E(e.registerDoc.attendees)})),fetch("/getTradingDetails/".concat(e.registrar)).then((e=>e.json())).then((e=>{Q(e[0].accBal),u(e[0].permissionTokensObj.sendSmsTokens)}))}),[]),(0,d.jsxs)("div",{style:{padding:"3px"},children:[(0,d.jsx)("div",{style:{padding:"5px"},children:(0,d.jsxs)("div",{class:"row",children:[(0,d.jsx)("div",{class:"col-md-3"}),(0,d.jsxs)("div",{class:"col-md-6",children:[(0,d.jsx)("div",{class:"pageLabel",children:G}),(0,d.jsxs)("div",{class:"pageDescription",children:[(0,d.jsx)("span",{children:S})," contacts | Register ",e.id]}),(0,d.jsx)(i.s,{}),(0,d.jsxs)("div",{style:{paddingTop:"15px"},children:[(0,d.jsxs)("form",{id:"messengingForm",children:[(0,d.jsx)("div",{style:{paddingBottom:"8px"},children:(0,d.jsx)("div",{class:"formLabel",children:"Add a contact to this register"})}),(0,d.jsxs)("div",{class:"mb-3",children:[(0,d.jsx)("div",{class:"formInputLabel",children:"Name (optional)"}),(0,d.jsx)("textarea",{row:"2",type:"text",class:"form-control",autoComplete:"off",name:"name"}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{class:"formInputLabel",children:"Contact"}),(0,d.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contact"})]}),(0,d.jsx)("div",{class:"row",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{padding:"5px",fontSize:"15px",color:"green"},dangerouslySetInnerHTML:{__html:t}}),(0,d.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsxs)("div",{onClick:()=>{let t;Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10?((0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value=""):(t=Array.from(document.getElementById("messengingForm").name.value).length<2?"":document.getElementById("messengingForm").name.value.trim(),s("Saving......."),fetch("/getTradingDetails/".concat(M)).then((e=>e.json())).then((n=>{n[0];fetch("/addToAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:t,contact:parseInt(document.getElementById("messengingForm").contact.value.trim()),registrarContact:M,registerId:parseInt(e.id)})}).then((e=>e.json())).then((e=>{0===e.registerPresent?(0,a.yd)("toastAlert2","Register does not exist",3e3):1===e.success?((0,a.yd)("toastAlert1","Successful, save another",3e3),s("Saved"),document.getElementById("messengingForm").contact.value="",document.getElementById("messengingForm").name.value="",I(e.attendees.length)):"memberPresent"===e.success?((0,a.yd)("toastAlert2","Contact already exists",3e3),document.getElementById("messengingForm").contact.value="",document.getElementById("messengingForm").name.value=""):(0,a.yd)("toastAlert2","Error occured, try again",3e3)}))})))},type:"text",class:"button1",children:[(0,d.jsx)("span",{class:"fa fa-user-circle"})," Add contact"]})}),(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsxs)("div",{onClick:()=>{!0===(0,a.Qb)(l)&&(setTimeout((()=>{0===oe&&(0,a.yd)("toastAlert1","Gaining network, please wait......",8e3)}),11500),s("Getting contacts, please wait......"),fetch("/attendeesMessage/".concat(e.registrar,"/").concat(e.id)).then((e=>e.json())).then((t=>{t.message;fetch("/attendees/".concat(e.registrar,"/").concat(e.id)).then((e=>e.json())).then((e=>{let t=e,n=1,o=t.registerDoc;oe=1,I(t.registerDoc.attendees.length);!0===t.closed?(0,a.yd)("toastAlert2","Register closed. Contact Kayas",3e3):(o.attendees.forEach((e=>{e.position=n,n++})),z(o.attendees.map((e=>(0,d.jsx)("div",{style:{padding:"0px"},children:(0,d.jsx)("div",{class:"contactsRegisterContactRecordContainer",children:(0,d.jsxs)("div",{class:"row ",children:[(0,d.jsxs)("div",{class:"col-6",children:[e.position,". ",e.name]}),(0,d.jsx)("div",{class:"col-6",style:{textAlign:"right"},children:(0,d.jsx)("a",{onClick:()=>{window.location.href="tel:0".concat(e.contact)},children:(0,d.jsxs)("span",{class:"hovereffect",children:[(0,d.jsx)("span",{class:"fa fa-phone"})," Call: 0",e.contact]})})})]})})})))),b("".concat(o.attendees.length," contacts")),s("Successful. Scroll to see"))}))})))},type:"text",class:"button1",children:[(0,d.jsx)("span",{class:"fa fa-eye"})," Display contacts"]})}),(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsx)("a",{href:"/pages/sendsmsattendanceregs/".concat(e.registrar,"/").concat(e.id),children:(0,d.jsxs)("div",{class:"button1",children:[(0,d.jsx)("span",{class:"fa fa-envelope"})," Send SMS"]})})}),(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsxs)("div",{onClick:()=>{Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10?((0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value=""):((0,a.yd)("toastAlert1","Deleting.....",2e3),fetch("/removeFromAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(document.getElementById("messengingForm").contact.value.trim()),registrarContact:M,registerId:parseInt(e.id)})}).then((e=>e.json())).then((e=>{0===e.registerPresent?m("<div style='color:red;'>You can not proceed with the action because the Regsiter is not present</div>"):((0,a.yd)("toastAlert1","Deleting.......",2e3),0===e.attendeeInList?(0,a.yd)("toastAlert2","not in the list",3e3):1===e.success?((0,a.yd)("toastAlert1","Successful",2e3),document.getElementById("messengingForm").contact.value="",I(S-1)):((0,a.yd)("toastAlert1","Error occured, try again",3e3),document.getElementById("messengingForm").contact.value=""))})))},type:"text",class:"button1",children:[(0,d.jsx)("span",{class:"fa fa-trash"})," Delete contact"]})}),(0,d.jsx)("div",{style:{padding:"3px"},children:(0,d.jsx)("div",{onClick:()=>{if(Array.from(document.getElementById("messengingForm").contact.value.trim()).length<10||Array.from(document.getElementById("messengingForm").contact.value.trim()).length>10)(0,a.yd)("toastAlert2","Enter contact of 10 digits",3e3),document.getElementById("messengingForm").contact.value="";else if(0===C.length)(0,a.yd)("toastAlert2","Register not ready, try again",3e3);else{let e,t,s=0,n=parseInt(document.getElementById("messengingForm").contact.value);C.forEach((a=>{a.contact===n&&(e=s+1,t=a),s++})),void 0===e?(0,a.yd)("toastAlert2","Not in the list",3e3):(0,a.yd)("toastAlert1","".concat(t.name," at position ").concat(e," in the list"),4e3)}},type:"text",class:"button1",children:" Get details"})})]})]})})]}),(0,d.jsxs)("div",{style:{background:"#e9e8e8",paddingTop:"5px"},children:[(0,d.jsx)("div",{style:{fontSize:"17px",textAlign:"center",color:"black",fontWeight:"600",background:"white"},dangerouslySetInnerHTML:{__html:A}}),(0,d.jsx)("div",{children:_})]})]})]}),(0,d.jsx)("div",{class:"col-md-3"}),(0,d.jsx)("div",{class:"col-md-3"}),(0,d.jsxs)("div",{class:"col-md-6",children:[(0,d.jsx)("div",{style:{padding:"30px"},children:(0,d.jsx)("div",{style:{color:"red",fontSize:"20px",textAlign:"center",paddingTop:"20px",borderBottom:"1px solid red"},children:"Below is for only the Admin"})}),(0,d.jsx)("div",{class:"pageLabel",children:"Share a contact to another register"}),(0,d.jsx)("div",{class:"pageDescription",children:"Send a contact from this register to another register. To send, enter the ID of the register to send to and enter the position that contact holds in this register"}),(0,d.jsx)("p",{}),(0,d.jsxs)("form",{id:"sendContactToRegister",children:[(0,d.jsx)("div",{style:{paddingBottom:"8px"},children:(0,d.jsx)("div",{class:"formLabel",children:"Share a contact to another register"})}),(0,d.jsxs)("div",{style:{paddingBottom:"5px"},children:["Only for the Register Admin, ",j," "]}),(0,d.jsxs)("div",{style:{paddingTop:"5px"},children:["Sending to: ",(0,d.jsx)("span",{style:{padding:"5px"},dangerouslySetInnerHTML:{__html:w}})," "]}),(0,d.jsxs)("div",{class:"mb-3",children:[(0,d.jsx)("input",{type:"hidden",class:"form-control",autoComplete:"off",name:"registrarContact",defaultValue:M}),(0,d.jsx)("div",{class:"formInputLabel",children:"Enter the ID of the register to send to:"}),(0,d.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"registerId",onChange:()=>{R("Searching for register........."),fetch("/getAttendanceRegDetails",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({registrarContact:M,registerId:parseInt(document.getElementById("sendContactToRegister").registerId.value)})}).then((e=>e.json())).then((e=>{0===e.length?(0,a.yd)("toastAlert2","You have no register with that ID",3e3):(R("".concat(e[0].registerTitle)),(0,a.yd)("toastAlert1","Sending to ".concat(e[0].registerTitle," "),4e3))}))}})," ",(0,d.jsx)("br",{}),(0,d.jsx)("div",{class:"formInputLabel",children:"Position of the contact in this register (e.g. 1,2,3,...)"}),(0,d.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contactPosition"})]}),(0,d.jsx)("div",{style:{padding:"5px",fontSize:"15px"},dangerouslySetInnerHTML:{__html:B}}),(0,d.jsx)("div",{onClick:()=>{if(!0===(0,a.Qb)(l))if("NaN"===parseInt(document.getElementById("sendContactToRegister").contactPosition.value))(0,a.yd)("toastAlert2","Enter a position corresponding to a contact e.g 1,2,3,....",3e3);else{let e=parseInt(document.getElementById("sendContactToRegister").contactPosition.value);if(e<1)(0,a.yd)("toastAlert2","Position can not be less than 1",3e3);else{let t=C[e-1];void 0===t?(0,a.yd)("toastAlert2","Refresh the page to update OR position ".concat(document.getElementById("sendContactToRegister").contactPosition.value," does not exist in this register"),7e3):fetch("/addToAttendeesRegister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:t.name,contact:t.contact,registrarContact:M,registerId:parseInt(document.getElementById("sendContactToRegister").registerId.value)})}).then((e=>e.json())).then((e=>{1===e.success?((0,a.yd)("toastAlert1","Successful",3e3),document.getElementById("sendContactToRegister").contactPosition.value=""):"memberPresent"===e.success?((0,a.yd)("toastAlert2","Contact is already in the register you are sending to",4e3),document.getElementById("sendContactToRegister").contactPosition.value=""):0===e.registerPresent&&((0,a.yd)("toastAlert2","Register does not exist",3e3),document.getElementById("sendContactToRegister").contactPosition.value="")}))}}},type:"text",class:"button1",children:"Send"})]})]}),(0,d.jsx)("div",{class:"col-md-3"})]})}),(0,d.jsx)("p",{}),(0,d.jsxs)("div",{class:"row",style:{textAlign:"center",padding:"20px",fontSize:"15px"},children:[(0,d.jsx)("div",{class:"col-md-3"}),(0,d.jsxs)("div",{class:"col-md-6",children:[(0,d.jsxs)("div",{style:{borderRadius:"40px",border:"1px solid green",padding:"5px"},children:[(0,d.jsxs)("a",{style:{color:"green",fontSize:""},href:"/pages/brocode",children:[(0,d.jsx)("span",{class:"hovereffect",children:"Get to know Kayas "})," "]}),(0,d.jsx)("br",{}),(0,d.jsxs)("a",{style:{color:"green",fontSize:""},href:"https://twitter.com/isaacopiokayas",children:[(0,d.jsxs)("span",{class:"hovereffect",children:["Follow Kayas on Twitter, tap here ",(0,d.jsx)("span",{class:"fa fa-twitter"})]})," "]}),(0,d.jsx)("br",{}),(0,d.jsxs)("a",{style:{color:"green",fontSize:""},href:"https://chat.whatsapp.com/BU6aMsNR6jL5x11rcWc9HZ",children:[(0,d.jsxs)("span",{class:"hovereffect",children:["Join Kayas WhatsApp group, tap here ",(0,d.jsx)("span",{class:"fa fa-whatsapp"})]})," "]}),(0,d.jsx)("br",{})]}),(0,d.jsxs)("div",{style:{padding:"10px"},children:["Share to WhatsApp friends or Groups ",(0,d.jsx)("br",{})," ",(0,d.jsx)("a",{style:{color:"green"},href:ce,children:(0,d.jsxs)("span",{class:"btn btn-warning hovereffect",children:[(0,d.jsx)("span",{class:"fa fa-whatsapp"})," Share this Register"]})})]})]}),(0,d.jsx)("div",{class:"col-md-3"})]})]})}const g=l},749:(e,t,s)=>{s.d(t,{s:()=>a});s(65043);var n=s(70579);function a(){let e={padding:"3px"};return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{style:{paddingTop:"8px",display:"flex",flexWrap:"wrap"},children:[(0,n.jsx)("div",{style:e,children:(0,n.jsx)("a",{href:"/pages/attendanceregs/createattendanceregister",children:(0,n.jsx)("div",{class:"button1",children:(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{class:"fa fa-plus"})," Create register"]})})})}),(0,n.jsx)("div",{style:e,children:(0,n.jsx)("a",{href:"/pages/attendanceregs/myregisters",children:(0,n.jsxs)("div",{class:"button1",children:[(0,n.jsx)("span",{class:"fa fa-list"})," My registers"]})})})]})})}}}]);
//# sourceMappingURL=9840.916c393e.chunk.js.map