{"version":3,"file":"static/js/423.ea65c1a3.chunk.js","mappings":"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","sources":["pages/deliveryservice/DeliveryServiceHome.js"],"sourcesContent":["import { useState,useEffect } from 'react';\r\nimport { DebitTraderAccountBalance, GetTradingDetails, IsLoggedIn, Post, ToastAlert } from '../Functions';\r\nimport {useCookies} from 'react-cookie'\r\nexport function DeliveryServiceHome(){\r\n    const [cookies]=useCookies(['user'])\r\n    const [selection, setSelection] = useState('');\r\n    const [status, setStatus] = useState('');\r\n    const [options, setOptions] = useState([]);\r\n    const [deliveryAgents, setDeliveryAgents] = useState('');\r\n    let initialMessage=\"Select your choice here\"\r\n// let options=[{description:`${initialMessage}`,contact:703852178},{description:\"Kayas restaurant @ 4,000/=\",contact:755643774}]\r\n    useEffect(()=>{\r\nfetch('/getDeliveryAgents').then(res=>res.json()).then(resp=>{\r\n    if(resp.length==0){\r\n        options=[{description:`${initialMessage}`}]\r\n    }else{\r\nresp.forEach(option=>{\r\n    options.push(option)\r\n})\r\noptions.push({description:`${initialMessage}`})\r\noptions.reverse()\r\n\r\n    }\r\n})\r\n\r\n\r\n\r\n    },[])\r\n   \r\n\r\n    return (\r\n        <div style={{padding:\"3px\"}}>\r\n            <div class=\"row\">\r\n                <div class=\"col-md-3\"></div>\r\n                <div class=\"col-md-6\">\r\n                    <div class=\"pageLabel\">Initiate an order</div>\r\n                    <div>Initiate an order, you will be called in less than 10 minutes and your order will be delivered.</div>\r\n                    <div style={{textAlign:\"center\",paddingTop:\"30px\"}}>\r\n                \r\n                    <select id=\"selectTag\" value={selection} onChange={(event) => {\r\n    setSelection(event.target.value);\r\n  }}>\r\n    {\r\n        options.map(option=>{\r\n            return(\r\n                <option value={option.description}>{option.description}</option>\r\n            )\r\n        })\r\n    }\r\n      \r\n      </select>\r\n      <p></p>\r\n      <div style={{padding:\"3px\"}}>\r\n<div style={{border:\"1px solid orange\",padding:\"3px\"}}>\r\n    <div style={{fontSize:\"18px\"}}><p>{selection}</p></div>\r\n    <div>\r\n        <div>Inititing an order costs 50/= from your Kayas account. Deposit if your balance is low </div>\r\n        <p></p><div class=\"status\">{status}</div>\r\n        <div class=\"button1\"\r\n    onClick={()=>{\r\n        \r\n\r\nif(IsLoggedIn(cookies)==true){\r\n\r\n    \r\n     if(selection==initialMessage || selection==''){\r\n                \r\n        setStatus('Make a selection first')\r\n    }else{\r\n        let serviceCost=50\r\n        setStatus('Initiating.....')\r\n    GetTradingDetails(cookies.user.contact).then(resp=>{\r\n        let trader=resp\r\n        if(trader.accBal<serviceCost){\r\n          //  ToastAlert('toastAlert2','Low account balance, deposit to your Kayas account atleast 500/=',7000) \r\n            setStatus('Low account balance, deposit to your Kayas account atleast 500/=')\r\n        }else{\r\n            let payLoad=options.find((option)=>option.description===selection)\r\n            payLoad.client=cookies.user.contact\r\n\r\n          GetTradingDetails(payLoad.contact).then(resp=>{\r\n            \r\n                if(resp.deliveryService.isDeliveryAgent==false){\r\n                    setStatus('Not allowed, select another delivery agent/order')\r\n                }\r\n                 else if(resp.deliveryService.isAvailable==false){\r\n                    setStatus('Not available, try again in 15 minutess or select another delivery agent/order')\r\n                }\r\n                \r\n                else{\r\n                    Post('/initiateDelivery',payLoad).then(resp=>{\r\n                \r\n                        if(resp.success==true){\r\n        DebitTraderAccountBalance(cookies.user.contact,serviceCost)\r\n        setStatus(resp.msg)\r\n                        }else{\r\n                            setStatus('Error must have occured, contact Kayas 0703852178')\r\n                        }\r\n        \r\n                    })\r\n                }\r\n            })\r\n        }\r\n    })\r\n        \r\n   \r\n    }\r\n\r\n\r\n   \r\n}else{;}\r\n\r\n\r\n    }}\r\n    >Initiate order</div></div>\r\n    \r\n    \r\n    </div>\r\n\r\n      </div>\r\n      \r\n      </div>\r\n\r\n                <p></p>\r\n                <a href='/pages/deposit'><div class=\"button1\">Deposit to Kayas account</div></a>\r\n                \r\n                </div>\r\n                <div class=\"col-md-3\"></div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DeliveryServiceHome"],"names":["DeliveryServiceHome","cookies","useCookies","selection","setSelection","useState","status","setStatus","options","setOptions","deliveryAgents","setDeliveryAgents","initialMessage","useEffect","fetch","then","res","json","resp","length","description","concat","forEach","option","push","reverse","_jsx","style","padding","children","_jsxs","class","textAlign","paddingTop","id","value","onChange","event","target","map","border","fontSize","onClick","IsLoggedIn","serviceCost","GetTradingDetails","user","contact","accBal","payLoad","find","client","deliveryService","isDeliveryAgent","isAvailable","Post","success","DebitTraderAccountBalance","msg","href"],"sourceRoot":""}