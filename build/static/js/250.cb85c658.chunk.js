"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[250,604,551],{8604:(e,t,r)=>{r.r(t),r.d(t,{AllArticles:()=>i,default:()=>o});r(7890);var s=r(5043),a=r(579);function i(){const[e,t]=(0,s.useState)((0,a.jsx)("div",{style:{padding:"40px",fontSize:"15px",color:"green",textAlign:"center"},children:"More stories loading......."}));return(0,s.useEffect)((()=>{fetch("/getAllArticles").then((e=>e.json())).then((e=>{t(e.map((e=>(0,a.jsx)("div",{class:"col-md-4",onClick:()=>{window.location.href="/pages/pubarticles/article/".concat(e.id)},children:(0,a.jsx)("div",{class:"pubArticleListItemContainer",children:(0,a.jsx)("div",{style:{border:"1px solid #d4d4d4",padding:"3px"},children:(0,a.jsxs)("div",{class:"backgroundColorHoverEffect3",children:[(0,a.jsx)("div",{class:"pubArticleListItemInstitution",children:e.institution}),(0,a.jsx)("div",{class:"pubArticleListItemHeadline",children:e.headline1}),(0,a.jsxs)("div",{class:"pubArticleListItemViewsAndVisits",children:[(0,a.jsxs)("div",{children:[e.visits," views, ",e.pubArticleOpinions.length," comments, Article ",e.id]}),(0,a.jsxs)("div",{children:["Created by ",e.author," 0",e.contact]})]})]})})})}))))}))}),[]),(0,a.jsx)("div",{children:(0,a.jsx)("div",{class:"row",children:e})})}const o=i},4250:(e,t,r)=>{r.r(t),r.d(t,{CreateArticle:()=>y,default:()=>u});var s=r(7638),a=r(8289),i=r(9978),o=r(2551),n=(r(8604),r(7890),r(5043)),l=r(7977),c=r(8345),d=r.n(c),p=r(579);a.A.initializeApp({apiKey:"AIzaSyCf0LC-eL1pJ2Rpvh59ukbg5OUFm6IcrEA",authDomain:"kayas-42321.firebaseapp.com",projectId:"kayas-42321",storageBucket:"kayas-42321.appspot.com"});const m=a.A.storage().ref();function y(){const[e,t]=(0,n.useState)(""),[r,a]=(0,n.useState)(""),[c,y]=(0,n.useState)(0),[u,h]=(0,n.useState)("Image appears here");return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{class:"col-md-3"}),(0,p.jsxs)("div",{class:"col-md-6",children:[(0,p.jsx)(i.d,{}),(0,p.jsx)("div",{style:{padding:"8px"},children:(0,p.jsxs)("form",{method:"post",id:"articleCreateForm",action:"#",children:[(0,p.jsx)("div",{style:{paddingBottom:"8px"},children:(0,p.jsx)("div",{class:"formLabel",children:"Create article."})}),(0,p.jsxs)("div",{class:"mb-3",children:[(0,p.jsx)("div",{class:"formInputLabel",children:"Create headline"}),(0,p.jsx)("textarea",{rows:"3",type:"text",class:"form-control",autoComplete:"off",name:"articleHeadline1"}),(0,p.jsx)("br",{}),(0,p.jsxs)("div",{class:"formInputLabel",children:["Add photo ",(0,p.jsxs)("span",{style:{fontSize:"12px"},children:[" ",(0,p.jsx)("input",{type:"file",id:"pubArticleImageInputElement",name:"file",onChange:e=>{let t=document.querySelector("#pubArticleImageInputElement").files[0];"image/png"===t.type||"image/jpg"===t.type||"image/jpeg"===t.type||"image/gif"===t.type||"image/webp"===t.type||"image/avif"===t.type?h(URL.createObjectURL(t)):(window.location.href="/pages/pubarticles/createarticle",(0,s.yd)("toastAlert2","Image type not supported. Change image",3e3))}})]})]}),(0,p.jsx)("div",{style:{paddingTop:"4px"},children:(0,p.jsx)("img",{src:u,class:" d-block w-100",alt:""})}),(0,p.jsx)("br",{}),(0,p.jsx)("div",{class:"formInputLabel",children:"Paste your message below:"}),(0,p.jsx)(l.CKEditor,{config:{toolbar:["Bold","Italic","Link","NumberedList","BulletedList"]},editor:d(),onChange:(e,t)=>{const r=t.getData();a(r)}}),(0,p.jsx)("br",{}),(0,p.jsx)("div",{class:"formInputLabel",children:"Contact"}),(0,p.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contact"}),(0,p.jsx)("br",{}),(0,p.jsx)("div",{class:"formInputLabel",children:"PIN"}),(0,p.jsx)("input",{type:"password",class:"form-control",autoComplete:"off",name:"pin"})]}),(0,p.jsx)("div",{style:{fontSize:"12px",paddingTop:"10px"},dangerouslySetInnerHTML:{__html:e}}),(0,p.jsx)("progress",{value:c,max:"100",style:{width:"100%",color:"red"}}),(0,p.jsx)("div",{style:{borderRadius:"5px"},onClick:()=>{Array.from(document.getElementById("articleCreateForm").articleHeadline1.value.trim()).length<2?(0,s.yd)("toastAlert2","Enter a headline",3e3):Array.from(r).length<8?(0,s.yd)("toastAlert2","Type some information in the body section",3e3):Array.from(document.getElementById("articleCreateForm").contact.value.trim()).length<10||Array.from(document.getElementById("articleCreateForm")[2].value.trim()).length>10?(0,s.yd)("toastAlert2","Enter correct contact format e.g. 0703852178",3e3):Array.from(document.getElementById("articleCreateForm").pin.value.trim()).length<5||Array.from(document.getElementById("articleCreateForm")[3].value.trim()).length>5?(0,s.yd)("toastAlert2","Enter your PIN",3e3):(t("<div style='color:green;'>Creating please wait ......</div>"),fetch("/verifyUser",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:document.getElementById("articleCreateForm").contact.value,pin:document.getElementById("articleCreateForm").pin.value})}).then((e=>e.json())).then((e=>{!1===e.registered?window.alert("Visit menu and register with Kayas"):!0===e.registered&&!1===e.pin?(0,s.yd)("toastAlert2","Incorrect PIN. Try again",3e3):fetch("/getTradingDetails/".concat(parseInt(document.getElementById("articleCreateForm").contact.value))).then((e=>e.json())).then((e=>{let a=e[0];a.permissionTokensObj.createPubArticleTokens<1||a.permissionTokensObj.createPubArticleTokens>1?fetch("/createArticle",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({headline1:document.getElementById("articleCreateForm")[0].value.trim(),institution:a.institution.trim(),author:a.name.trim(),contact:parseInt(document.getElementById("articleCreateForm").contact.value.trim()),body:r.trim()})}).then((e=>e.json())).then((e=>{let r=e;if(1===e.limitReached)t("<div style='color:red;'>Maximum limit reached. Delete some articles to create space.</div>"),(0,s.yd)("toastAlert2","Maximum number of articles reached. Delete some",5e3);else{let a=document.querySelector("#pubArticleImageInputElement").files[0];if(t("<div style='color:green;'>Creating, please wait.....</div>"),document.getElementById("articleCreateForm").articleHeadline1.value="",document.getElementById("articleCreateForm").contact.value="",document.getElementById("articleCreateForm").pin.value="",void 0===a)window.location.href="/pages/pubarticles/article/".concat(e.id),(0,s.yd)("toastAlert1","Successful. Please wait....",3e3);else{let i=0;setInterval((()=>{94!==i&&(i+=1,y(i))}),400),t("<div style='color:green;'>Saving image.......</div>");let o="pubArticleImage_".concat(r.id),n=m.child("pubArticleImages/".concat(o));n.put(a).then((a=>{n.getDownloadURL({orderBy:"generation",limitTo:1}).then((a=>{let i=a;fetch("/addPubArticleImageUrlToArticle",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:parseInt(r.contact),articleId:r.id,imageDownLoadUrl:i})}).then((r=>{t("<div style='color:green;'>Image saved</div>"),window.location.href="/pages/pubarticles/article/".concat(e.id),(0,s.yd)("toastAlert1","Successful. Please wait....",3e3)}))}))}))}}})):0===a.permissionTokensObj.createPubArticleTokens?t("<div style='color:red;'>".concat(a.name,', please whatsapp Kayas on 0703852178 to renew your tokens in order to be able to create more articles. <br></br><span style="color:green;">You can instead edit your already existing Articles to come up with a new Article. Go and see your Articles <span style="color:red;">and click the edit button</span> to edit one of your Articles. Thank you for keeping it Kayas.</span></div>')):t("<div style='color:green;'><span style='color:red;'>".concat(a.name,",</span> an error must have occured, please try again.</div>"))}))})))},class:"form-submit-btn backgroundColorHovereffect",children:"Create Article"}),(0,p.jsx)("p",{})]})}),(0,p.jsx)("div",{style:{paddingTop:"30px"}}),(0,p.jsx)(o.default,{})]}),(0,p.jsx)("div",{class:"col-md-3"})]})})}const u=y},2551:(e,t,r)=>{r.r(t),r.d(t,{MyArticles:()=>i,default:()=>o});r(7890);var s=r(5043),a=r(579);function i(){const[e,t]=(0,s.useState)("");let r="";const[i,o]=(0,s.useState)("");return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{style:{padding:"10px"},children:[(0,a.jsxs)("form",{method:"post",id:"myArticlesForm",action:"#",children:[(0,a.jsx)("div",{style:{paddingBottom:"8px"},children:(0,a.jsx)("div",{class:"formLabel",children:"See/share your Articles"})}),(0,a.jsxs)("div",{class:"mb-3",children:[(0,a.jsx)("div",{class:"formInputLabel",children:"Contact"}),(0,a.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"contact"}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{class:"formInputLabel",children:"PIN"}),(0,a.jsx)("input",{type:"password",class:"form-control",autoComplete:"off",name:"pin"})]}),(0,a.jsx)("div",{style:{fontSize:"17px",paddingBottom:"10px"},dangerouslySetInnerHTML:{__html:e}}),(0,a.jsx)("div",{onClick:()=>{Array.from(document.getElementById("myArticlesForm")[0].value).length<10||Array.from(document.getElementById("myArticlesForm")[0].value).length>10?t("<div style='color:red'>Please enter a correct number......</div>"):Array.from(document.getElementById("myArticlesForm")[1].value).length<5||Array.from(document.getElementById("myArticlesForm")[1].value).length>5?t("<div style='color:red;'>Please enter a PIN of 5 digits ......</div>"):(t("<div style='color:green;'>Getting your Articles, <span style='color:red;'>please wait ......</span></div>"),fetch("/verifyUser",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:document.getElementById("myArticlesForm")[0].value,pin:document.getElementById("myArticlesForm")[1].value})}).then((e=>e.json())).then((e=>{!1===e.registered?t("<div style='color:red;'>You are not registered with Kayas, please register with Kayas then begin writing articles</div>"):!0===e.registered&&!1===e.pin?t("<div style='color:green;'><span style='color:red;'>".concat(e.details.name,",</span> your <span style='color:red;'>PIN is incorrect,</span> please try again......</div>")):(t("<div style='color:green;'><span style='color:red;'>Please be patient as we get your articles ......</div>"),fetch("/getMyArticles",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:document.getElementById("myArticlesForm")[0].value})}).then((e=>(t("<div style='color:green;'>Your Articles have been received, please wait we share with you ......</div>"),e.json()))).then((e=>{0===e.length?t("<div style='color:red;'>You don't have any Articles written. Please write some and get back. Thank you.</div>"):(e.reverse(),e.forEach((e=>{let t;t=void 0===e.newCommentsNumb?0:e.newCommentsNumb,r+="<div class='col-sm-6 col-md-4' style='background:#E3E3E3;border:4px solid white;border-radius:20px;padding:10px;' onclick=fetch('/resetPubArticlesNewCommentsNumb',{method:\"post\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify({id:".concat(e.id,"})}) ><div><a  style='color:black;' href='/pages/pubarticles/article/").concat(e.id,"'><span class=\"hoverEffectUnderline\"><div  style='padding-bottom:10px;'><div style='color:black;font-size:18px;'>").concat(e.headline1,"</div><div style='font-size:12px;color:grey;'>Article ").concat(e.id,"</div><div style='color:grey;padding-top:5px;'><span style='color:red;'>").concat(t,"</span> new comments | <span style='color:red;'>").concat(e.visits,"</span> views | <span style='color:red;'>").concat(e.pubArticleOpinions.length,"</span> comments</div></div> </span></a></div></div>")})),o('<div style="text-align:center;font-size:20px;color:red;">Your Articles below:</div>'+r),t("<div style='color:green;'>Done, scroll down to see your Articles. <span class='fa fa-check'></span></div>"))})))})))},class:"form-submit-btn backgroundColorHovereffect",children:"See articles"}),(0,a.jsx)("p",{}),(0,a.jsx)("div",{class:"formInputLabel",children:"Share title"}),(0,a.jsx)("input",{type:"text",class:"form-control",autoComplete:"off",name:"articlesShareTitle"}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{onClick:()=>{Array.from(document.getElementById("myArticlesForm")[0].value).length<10||Array.from(document.getElementById("myArticlesForm")[0].value).length>10?t("<div style='color:red'>Please enter a correct number......</div>"):Array.from(document.getElementById("myArticlesForm")[1].value).length<5||Array.from(document.getElementById("myArticlesForm")[1].value).length>5?t("<div style='color:red;'>Please enter a PIN of 5 digits ......</div>"):(t("<div style='color:green;'>Getting your Articles, <span style='color:red;'>please wait ......</span></div>"),fetch("/verifyUser",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({contact:document.getElementById("myArticlesForm")[0].value,pin:document.getElementById("myArticlesForm")[1].value})}).then((e=>e.json())).then((e=>{!1===e.registered?t("<div style='color:red;'>You are not registered with Kayas, please register with Kayas then begin writing articles</div>"):!0===e.registered&&!1===e.pin?t("<div style='color:green;'><span style='color:red;'>".concat(e.details.name,",</span> your <span style='color:red;'>PIN is incorrect,</span> please try again......</div>")):(t("<div style='color:green;'><span style='color:red;'>".concat(e.details.name,",</span> please be patient as we finalize with getting your articles ......</div>")),window.location.href="whatsapp://send?text=*".concat(document.getElementById("myArticlesForm").articlesShareTitle.value.trim(),"*%0A___________________________%0A%0ASee the details by tapping the link below:%0Ahttps://kayas-mak.herokuapp.com/pages/pubarticles/sharemyarticles/").concat(document.getElementById("myArticlesForm").contact.value,"%0A_______________________%0A_Powered by: \ud83c\udf39Kayas_"))})))},class:"form-submit-btn backgroundColorHovereffect",children:[(0,a.jsx)("span",{class:"fa fa-whatsapp"})," Share articles"]})]}),(0,a.jsx)("p",{}),(0,a.jsx)("p",{}),(0,a.jsx)("div",{style:{padding:"3px"},class:"row",dangerouslySetInnerHTML:{__html:i}}),(0,a.jsx)("hr",{})]})})}const o=i},9978:(e,t,r)=>{r.d(t,{d:()=>n});var s=r(7638),a=r(8289),i=r(2546),o=(r(7890),r(5043),r(6273),r(579));a.A.initializeApp({apiKey:"AIzaSyCf0LC-eL1pJ2Rpvh59ukbg5OUFm6IcrEA",authDomain:"kayas-42321.firebaseapp.com",projectId:"kayas-42321",storageBucket:"kayas-42321.appspot.com"});a.A.storage().ref();function n(e){let t={padding:"5px"};return(0,o.jsxs)("div",{style:{paddingTop:"8px",display:"flex",flexWrap:"wrap"},children:[(0,o.jsx)("div",{style:t,children:(0,o.jsx)("div",{class:"button1",onClick:()=>{window.location.href="/pages/pubarticles/createarticle"},children:(0,o.jsxs)("span",{class:"hovereffect",children:[(0,o.jsx)("span",{class:"fa fa-plus"})," New article"]})})}),(0,o.jsxs)("div",{style:t,children:[(0,o.jsx)("div",{class:"button1",onClick:()=>{let t=window.prompt("Enter your PIN to delete this article.");(0,s.zL)(e.articleAuthorContact,t).then((t=>{if(!1===t.pin)(0,s.yd)("toastAlert2","Not allowed",3e3);else{const t=(0,i.KR)((0,i.c7)(),"pubArticleImages/pubArticleImage_".concat(e.articleId));(0,i.XR)(t).then((()=>{fetch("/deleteArticle",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({articleId:parseInt(e.articleId)})}).then((e=>e.json())).then((t=>{window.location.href="/pages/pubarticles/article/".concat(e.articleId)}))})).catch((t=>{fetch("/deleteArticle",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({articleId:parseInt(e.articleId)})}).then((e=>e.json())).then((t=>{window.location.href="/pages/pubarticles/article/".concat(e.articleId)}))}))}}))},children:(0,o.jsxs)("span",{class:"hovereffect",children:[(0,o.jsx)("span",{class:"fa fa-minus"})," Delete"]})}),"  "]}),(0,o.jsx)("div",{style:t,children:(0,o.jsx)("div",{class:"button1",onClick:()=>{window.location.href="/pages/pubarticles/assessmyarticles"},children:(0,o.jsx)("span",{class:"hovereffect",children:" Assess"})})})]})}}}]);
//# sourceMappingURL=250.cb85c658.chunk.js.map