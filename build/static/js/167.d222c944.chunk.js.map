{"version":3,"file":"static/js/167.d222c944.chunk.js","mappings":"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","sources":["pages/attendanceregs/AttendanceRegsHome.js","pages/attendanceregs/SendSms.js"],"sourcesContent":["\nimport React, {useEffect,useState} from 'react'\nimport { Link } from \"react-router-dom\"\n\nexport function AttendenceRegisterNav(){\n  let style2={padding:\"3px\"}\n    return(\n  <div>\n      <div style={{paddingTop:\"8px\",display:\"flex\",flexWrap:\"wrap\"}}>\n       \n      <div style={style2}>\n        <Link to='/pages/attendanceregs/myregisters'>  <div class=\"button1\">\n     \n     <span class=\"fa fa-list\"></span> My registers\n</div></Link>\n     \n\n\n</div>\n      <div style={style2}>\n      <Link to='/pages/attendanceregs/createattendanceregister'>\n      <div class=\"button1\" ><span ><span class=\"fa fa-plus\"></span> New register</span></div>\n      </Link>\n       \n       \n       </div>\n\n\n  \n\n          \n\n            \n            \n            \n            \n            \n            </div>\n\n\n\n  </div>\n    )\n  }\nexport function RegistrationHome(){\n    return(\n        <div>\n            <div style={{color:\"red\",fontSize:\"25px\",textAlign:\"center\"}}>Kayas Attendance Registers</div>\n            \n            <AttendenceRegisterNav/>\n   \n        </div>\n        )\n}\n\n\n\n\n\n     ","import React, {useEffect,useState} from 'react'\r\nimport { ToastAlert,IsLoggedIn } from '../Functions';\r\nimport {useCookies} from 'react-cookie'\r\nimport { useParams } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport { AttendenceRegisterNav } from './AttendanceRegsHome';\r\nimport { kayasDomainUrl } from '../../Variables';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport function SendSms(){\r\n\r\n    let registerParams=useParams(),charactersPerSms=150\r\n    \r\n     const[status,setStatus]=useState('')\r\n     const [cookies]=useCookies(['user'])\r\n     const[status2,setStatus2]=useState('')\r\n     const[sendSmsTokens,setSendSmsTokens]=useState('')\r\n   \r\n     const[retrieveStatus,setRetrieveStatus]=useState('')\r\n       let formActionUrl=`/pages/attendanceregs/article/`\r\n       const[registrarName,setRegistrarName]=useState('')\r\n       const[messageesNumb,setMessageesNumb]=useState('')\r\n       const[arrayOfAttendees,setArrayOfAttendees]=useState([])\r\n       const[sendToContactRegisterStatus,setSendToContactRegisterStatus]=useState('')\r\n       const[sendToContactRegisterName,setSendToContactRegisterName]=useState('')\r\n       const[clickCharge,setClickCharge]=useState('10000')\r\n       const[clickNumb,setClickNumb]=useState('10000')\r\n       const[clickRate,setClickRate]=useState('100')\r\n       const[messagees,setMessagees]=useState('')\r\n       const[registrarContact,setRegistrarContact]=useState('')\r\n       const[institution,setInstitution]=useState('')\r\n       const[registerTitle,setRegisterTitle]=useState('')\r\n       const[accBal,setAccBal]=useState('calculating......')\r\n       const[charLength,setCharLength]=useState('')\r\n       const[noOfSms,setNoOfSms]=useState('')\r\n       const[smsUnitCost,setSmsUnitCost]=useState('')\r\n       const[smsCost,setSmsCost]=useState('')\r\n       const[baseCost,setBaseCost]=useState('')\r\n       const[smsTagAlert,setSmsTagAlert]=useState('')\r\n     \r\n       const [attendeeRegisterMessageStatus,setAttendeeRegisterMessageStatus]=useState('')\r\n       \r\n       let contactsReceivedFlag=0\r\n    \r\n    \r\n      const[registerPresentFlag,setregisterPresentFlag]=useState(1)\r\n       \r\n   function NoOfSmsCalculator(charLength){\r\n \r\n \r\n     let smsArrayCategory=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],numbOfSms=1\r\n     smsArrayCategory.reverse()\r\n     smsArrayCategory.forEach(category=>{\r\n       if(charLength<(category*charactersPerSms)+1){\r\n         numbOfSms=category\r\n       }else{\r\n ;\r\n       }\r\n     })\r\n \r\n return numbOfSms\r\n \r\n   }\r\n       \r\n       let data=\"\",whatsappAttendanceRegisterShareLink=`whatsapp://send?text=*${registerTitle}*%0A%0ATap link below to register:%0A${kayasDomainUrl}/pages/attendanceregs/${registerParams.registrar}/${registerParams.id}%0A%0A*Thank you.*`,\r\n       kayasWhatsappGroupLink='https://chat.whatsapp.com/BU6aMsNR6jL5x11rcWc9HZ'\r\n      useEffect(()=>{\r\n        window.location.href=\"#\"\r\n         fetch(`/attendanceregs/${registerParams.registrarContact}/${registerParams.registerId}`).then(res=>res.json()).then(registerDataDoc=>{\r\n                \r\n           if(registerDataDoc.presence===0){\r\n          \r\n             setRegisterTitle(\"This Register does not exist. Please try another or create your own register too for free\")\r\n             setRegistrarName(\"Kayas 0703852178-WhatsApp\")\r\n           }else{\r\n            \r\n             setRegistrarName(registerDataDoc.name)\r\n             setInstitution(registerDataDoc.institution)\r\n             setRegisterTitle(`${registerDataDoc.registerTitle}`)\r\n             setRegistrarContact(registerDataDoc.contact)\r\n         \r\n\r\n  /*\r\n             fetch(`/attendeesMessage/${registerParams.registrar}/${registerParams.id}`).then(res=>res.json()).then(res=>{\r\n         \r\n               setSmsUnitCost(res.smsUnitCost)\r\n               let noDelaySmsUnitCost=res.smsUnitCost\r\n               setNoOfSms(NoOfSmsCalculator(Array.from(res.smsmessage).length))\r\n               setCharLength(Array.from(res.smsmessage).length)\r\n             //  document.getElementById(\"setAttendeeRegisterMessageForm\").message.value=res.message\r\n            document.getElementById(\"setAttendeeRegisterSmsForm\").smsmessage.value=res.smsmessage\r\n          \r\n            setSmsCost(NoOfSmsCalculator(Array.from(document.getElementById(\"setAttendeeRegisterSmsForm\").smsmessage.value).length)*noDelaySmsUnitCost*res.attendees.length)\r\n \r\n         \r\n                \r\n         }) \r\n           */\r\n\r\n\r\n             fetch(`/attendeesMessage/${registerParams.registrarContact}/${registerParams.registerId}`).then(res=>res.json()).then(res=>{\r\n         \r\n               setSmsUnitCost(res.smsUnitCost)\r\n               let noDelaySmsUnitCost=res.smsUnitCost\r\n               setNoOfSms(NoOfSmsCalculator(Array.from(res.smsmessage).length))\r\n               setCharLength(Array.from(res.smsmessage).length)\r\n             \r\n            document.getElementById(\"setAttendeeRegisterSmsForm\").smsmessage.value=res.smsmessage\r\n          \r\n            setSmsCost(NoOfSmsCalculator(Array.from(document.getElementById(\"setAttendeeRegisterSmsForm\").smsmessage.value).length)*noDelaySmsUnitCost*res.attendees.length)\r\n \r\n         \r\n                \r\n         }) \r\n           \r\n          \r\n         \r\n           }\r\n          \r\n           \r\n         })\r\n \r\n \r\n         fetch(`/attendees/${registerParams.registrarContact}/${registerParams.registerId}`).then(res=>res.json()).then(res=>{\r\n            \r\n           setMessageesNumb(res.registerDoc.attendees.length)\r\n           setArrayOfAttendees(res.registerDoc.attendees)\r\n setBaseCost(res.registerDoc.attendees.length*30)\r\n            \r\n         })\r\n\r\n \r\n fetch(`/getTradingDetails/${registerParams.registrarContact}`).then(res=>res.json()).then((resp)=>{\r\n setAccBal(resp[0].accBal)\r\n setSendSmsTokens(resp[0].permissionTokensObj.sendSmsTokens)\r\n \r\n resp[0].permissionTokensObj.sendSmsWithoutTag==false? setSmsTagAlert('The tag \"#KayasSMS\" will automatically be appended at the end of the SMS'): setSmsTagAlert('')\r\n \r\n         })\r\n \r\n \r\n         },[])\r\n  \r\n \r\n\r\n\r\n\r\n    return (<div style={{padding:\"3px\"}}>\r\n<div class=\"row\">\r\n<div class=\"col-md-3\"></div>\r\n<div class='col-md-6'style={{padding:\"15px\"}}>  \r\n\r\n<div class=\"pageLabel\">Send SMS to: {registerTitle}</div>\r\n  <div style={{paddingBottom:\"8px\"}}>Contacts: {messageesNumb}</div>\r\n \r\n\r\n  <form id=\"setAttendeeRegisterSmsForm\" >\r\n   \r\n     <div class=\"mb-3\">\r\n <input type=\"hidden\" class=\"form-control\" autoComplete=\"off\" name=\"contact\" defaultValue={registrarContact} ></input>\r\n \r\n <div style={{fontSize:\"\"}}>\r\n  <div>Between 0 - 150 message characters: {(()=>{\r\n  return(`${baseCost} shs`)\r\n })()}</div>\r\n  <div>Between 151 - 300 message characters: {(()=>{\r\n  return(`${baseCost*2} shs`)\r\n })()}.</div>\r\n <div>Between 301 - 450 message characters: {(()=>{\r\n  return(`${baseCost*3} shs`)\r\n })()}</div>\r\n <div>Between 451 - 600 message characters: {(()=>{\r\n  return(`${baseCost*4} shs`)\r\n })()}</div>\r\n  </div>\r\n  <p></p>\r\n <div class=\"bold\">Type message:</div>\r\n\r\n <div class=\"row\">\r\n  \r\n <div class=\"col-8\" > Number of typed message characters: <span style={{color:\"red\"}}>{charLength}</span></div>\r\n <div class=\"col-4\"><div class=\"btn btn-danger btn-sm\"\r\n       onClick={()=>{document.getElementById(\"setAttendeeRegisterSmsForm\").smsmessage.value=''}}>Clear message</div></div>\r\n </div><p></p>\r\n\r\n <div style={{textAlign:\"left\",fontSize:\"20px\"}} >Cost: <span style={{color:\"red\"}}>{smsCost} Shs</span> </div>\r\n\r\n <textarea rows=\"10\" type=\"text\" class=\"form-control\" autoComplete=\"off\" name=\"smsmessage\" onChange={()=>{\r\n   setCharLength(Array.from(document.getElementById(\"setAttendeeRegisterSmsForm\").smsmessage.value.trim()).length)\r\n   setNoOfSms(NoOfSmsCalculator(Array.from(document.getElementById(\"setAttendeeRegisterSmsForm\").smsmessage.value.trim()).length))\r\n   setSmsCost(NoOfSmsCalculator(Array.from(document.getElementById(\"setAttendeeRegisterSmsForm\").smsmessage.value.trim()).length)*smsUnitCost*messageesNumb)\r\n }} ></textarea>\r\n<div style={{paddingTop:\"10px\"}} class=\"bold\">{smsTagAlert}</div>\r\n      </div>\r\n      <div style={{fontSize:\"12px\"}}>\r\n    </div>\r\n    <div style={{padding:\"5px\"}}>\r\n     <div onClick={()=>{\r\n      \r\nif(IsLoggedIn(cookies)==true){\r\n  if(parseInt(accBal)<parseInt(smsCost)){\r\n    ToastAlert('toastAlert2','Low account balance. Contact Kayas 0703852178',6000)\r\n  }else{\r\n    if(window.confirm(\"Press OK to confirm\")===true){\r\n      \r\n    \r\n    ToastAlert('toastAlert1','Sending. Wait for confirmation message.....',5000)\r\n      \r\n            \r\n   \r\n\r\n\r\n  fetch(`/getTradingDetails/${registerParams.registrarContact}`).then(res=>res.json()).then((resp)=>{\r\nlet traderDetails=resp[0],smsMessage=document.getElementById(\"setAttendeeRegisterSmsForm\").smsmessage.value\r\nif(traderDetails.permissionTokensObj.sendSmsWithoutTag==false){\r\n  smsMessage=smsMessage+' #KayasSMS'\r\n}else{\r\n;\r\n}\r\n\r\nfetch('/sendAttendeeRegisterSms',{\r\n  method:\"post\",\r\n  headers:{'Content-type':'application/json'},\r\n  body:JSON.stringify({\r\n    registrarContact:parseInt(cookies.user.contact),\r\nsmsmessage:smsMessage,\r\nregisterId:parseInt(registerParams.registerId),\r\nsmsCost:smsCost\r\n\r\n  }) \r\n\r\n \r\n}).then(res=>res.json()).then(resp=>{\r\n\r\nToastAlert('toastAlert1',`${resp[0]}`,4000)\r\nfetch(`/getTradingDetails/${registerParams.registrarContact}`).then(res=>res.json()).then((resp)=>{\r\n\r\n\r\n  setAccBal(resp[0].accBal)\r\n  setSendSmsTokens(resp[0].permissionTokensObj.sendSmsTokens)\r\n          })\r\n\r\n\r\n})\r\n\r\n\r\n\r\n            })\r\n\r\n\r\n\r\n  \r\n    }else{\r\n;\r\n    }\r\n  }\r\n\r\n}else{}\r\n\r\n     }}type=\"text\" style={{width:\"100%\"}} class=\"btn btn-success\">Send <span class=\"fa fa-paper-plane\"></span></div>\r\n </div>\r\n    \r\n     <div style={{display:\"flex\",flexWrap:\"wrap\"}}>\r\n       <div style={{padding:\"5px\"}}>\r\n     <div onClick={()=>{\r\n     if(IsLoggedIn(cookies)==true){\r\n      if(parseInt(cookies.user.contact)!=parseInt(registerParams.registrarContact)){\r\n        ToastAlert('toastAlert2',`Not allowed. You do not own this contacts register`,3000)\r\n      }else{  ToastAlert('toastAlert1','Setting, please wait......',3000)\r\n      fetch('/setAttendeeRegisterSms',{\r\n        method:\"post\",\r\n        headers:{'Content-type':'application/json'},\r\n        body:JSON.stringify({\r\n          registrarContact:parseInt(cookies.user.contact),\r\n   smsmessage:document.getElementById(\"setAttendeeRegisterSmsForm\").smsmessage.value,\r\n   registerId:parseInt(registerParams.registerId)\r\n  \r\n        }) \r\n    }).then(res=>res.json()).then(resp=>{\r\n      \r\n      ToastAlert('toastAlert1',`${resp[0]}`,3000)\r\n\r\n    })\r\n}\r\n    \r\n\r\n     }else{\r\n\r\n     }\r\n\r\n     }}type=\"text\" class=\"button1\">Save message</div>\r\n </div>\r\n \r\n <div style={{padding:\"5px\"}}>\r\n     \r\n\r\n     <Link to={`/pages/attendanceregs/${parseInt(registerParams.registrarContact)}/${registerParams.registerId}`\r\n           }><div type=\"text\" class=\"button1\">Back to register</div></Link>\r\n </div>\r\n </div>\r\n \r\n \r\n     </form>\r\n     \r\n     </div>\r\n\r\n\r\n\r\n<div class=\"col-md-3\"></div>\r\n\r\n</div>\r\n\r\n\r\n\r\n    </div>)\r\n}\r\n\r\nexport default SendSms"],"names":["AttendenceRegisterNav","style2","padding","_jsx","children","_jsxs","style","paddingTop","display","flexWrap","Link","to","class","SendSms","registerParams","useParams","status","setStatus","useState","cookies","useCookies","status2","setStatus2","sendSmsTokens","setSendSmsTokens","retrieveStatus","setRetrieveStatus","registrarName","setRegistrarName","messageesNumb","setMessageesNumb","arrayOfAttendees","setArrayOfAttendees","sendToContactRegisterStatus","setSendToContactRegisterStatus","sendToContactRegisterName","setSendToContactRegisterName","clickCharge","setClickCharge","clickNumb","setClickNumb","clickRate","setClickRate","messagees","setMessagees","registrarContact","setRegistrarContact","institution","setInstitution","registerTitle","setRegisterTitle","accBal","setAccBal","charLength","setCharLength","noOfSms","setNoOfSms","smsUnitCost","setSmsUnitCost","smsCost","setSmsCost","baseCost","setBaseCost","smsTagAlert","setSmsTagAlert","attendeeRegisterMessageStatus","setAttendeeRegisterMessageStatus","registerPresentFlag","setregisterPresentFlag","NoOfSmsCalculator","smsArrayCategory","numbOfSms","reverse","forEach","category","concat","kayasDomainUrl","registrar","id","useEffect","window","location","href","fetch","registerId","then","res","json","registerDataDoc","presence","name","contact","noDelaySmsUnitCost","Array","from","smsmessage","length","document","getElementById","value","attendees","registerDoc","resp","permissionTokensObj","sendSmsWithoutTag","paddingBottom","type","autoComplete","defaultValue","fontSize","color","onClick","textAlign","rows","onChange","trim","IsLoggedIn","parseInt","ToastAlert","confirm","traderDetails","smsMessage","method","headers","body","JSON","stringify","user","width"],"sourceRoot":""}