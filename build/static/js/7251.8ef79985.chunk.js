"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[7251],{87251:(e,t,s)=>{s.r(t),s.d(t,{MakePayment:()=>r,default:()=>o});var a=s(65043),n=s(56024),c=s(9093),i=s(35407),l=s(88651),d=s(70579);function r(){const[e]=(0,i.lT)(["user"]);let[t,s]=(0,a.useState)(""),[r,o]=(0,a.useState)(""),[p,m]=(0,a.useState)(""),[y,x]=(0,a.useState)(""),[h,j]=(0,a.useState)(!1),u={};return 1==(0,n.Qb)(e)?(0,d.jsx)("div",{style:{padding:"5px"},children:(0,d.jsxs)("div",{class:"row",children:[(0,d.jsx)("div",{class:"col-md-3"}),(0,d.jsxs)("div",{class:"col-md-6",children:[(0,d.jsx)("div",{class:"pageLabel",children:"Make payment"}),(0,d.jsx)("div",{class:"pageDescription",children:"Pay for a service or ticket. Enter the ID, search and pay"}),(0,d.jsx)(l.R,{}),(0,d.jsx)("p",{}),(0,d.jsxs)("form",{method:"post",id:"makePaymentForm",action:"#",children:[(0,d.jsx)("div",{class:"formInputLabel",children:"Search for ticket/service ID (name of ticket) then pay"}),(0,d.jsx)("input",{type:"text",name:"ticketId",class:"form-control",placeholder:"Enter ticket ID or name and search",autoComplete:"off"}),(0,d.jsx)("p",{}),(0,d.jsx)("div",{class:"status",children:p}),(0,d.jsx)("div",{style:{width:"100%"},class:"btn btn-success",onClick:()=>{let e=document.getElementById("makePaymentForm").ticketId.value.trim();Array.from(e).length<1?(0,n.yd)("toastAlert2","Enter a ticket Id",3e3):(m("Please wait..."),(0,n.L4)("/getTicketDetails",{ticketId:e}).then(e=>{if(0==e.length)m("Ticket/service ID does not exist");else{m("");let t=e;o(e[0]),s(t.map(e=>(0,d.jsx)("div",{children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{fontSize:"20px",fontWeight:"600"},children:e.ticketId}),(0,d.jsxs)("div",{style:{fontSize:"14px"},children:["Amount: ",e.amount+" shs"]}),(0,d.jsxs)("div",{style:{fontSize:"14px"},children:["Tickets left: ",e.noOfTickets-e.payments.length]}),(0,d.jsxs)("div",{style:{fontSize:"14px"},children:["Contact: 0",e.ticketOwner]})]})}))),j(!0)}}))},children:"Search"}),(0,d.jsxs)("div",{style:{paddingTop:"10px",paddingBottom:"3px"},children:[" ",t," "]}),(0,d.jsx)("p",{}),(0,d.jsx)("div",{class:"formInputLabel",children:"Create a payment secret code/word and then pay."}),(0,d.jsx)("div",{class:"light",children:"Don't forget the payment secret code, you will be asked for it to confirm your payment."}),(0,d.jsx)("input",{type:"text",name:"paymentSecretCode",class:"form-control",autoComplete:"off"}),(0,d.jsx)("p",{}),(0,d.jsx)("div",{class:"status",children:y}),(0,d.jsx)("div",{style:{width:"100%"},class:"btn btn-success",onClick:()=>{let t=document.getElementById("makePaymentForm").paymentSecretCode.value.trim();!1===h?(0,n.yd)("toastAlert2","Search before making a payment",3e3):(u.ticketId=r.ticketId,u.amount=r.amount,u.name=e.user.name,u.paymentApproved=!1,u.paymentSettled=!1,u.contact=e.user.contact,Array.from(t).length<3?(0,n.yd)("toastAlert2","Create a payment secret code of atleast 3 characters",4e3):(x("Please wait......"),u.paymentSecretCode=t,(0,n.ck)(e.user.contact).then(e=>{e.accBal<u.amount?x("Tap menu and select deposit to your Kayas account because your account balance is low."):(x("Paying........"),(0,n.L4)("/payForTicket",u).then(e=>{x(e.msg)}))})))},children:"Pay now"}),(0,d.jsx)("p",{})]})]}),(0,d.jsx)("div",{class:"col-md-3"})]})}):(0,d.jsx)("div",{children:(0,d.jsx)(c.LoginPage,{})})}const o=r},88651:(e,t,s)=>{s.d(t,{R:()=>c});var a=s(62582),n=s(70579);function c(){let e={padding:"2px"};return(0,n.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",paddingTop:"10px"},children:[(0,n.jsx)("div",{style:e,children:(0,n.jsx)(a.N_,{to:"/pages/payments/createticket",children:(0,n.jsxs)("div",{class:"button1",children:[(0,n.jsx)("span",{class:"fa fa-plus"}),"  Create tickets/services"]})})}),(0,n.jsx)("div",{style:e,children:(0,n.jsx)(a.N_,{to:"/pages/payments/mytickets",children:(0,n.jsxs)("div",{class:"button1",children:[(0,n.jsx)("span",{class:"fa fa-user"}),"  My tickets/services"]})})}),(0,n.jsx)("div",{style:e,children:(0,n.jsx)(a.N_,{to:"/pages/payments/makepayment",children:(0,n.jsxs)("div",{class:"button1",children:[(0,n.jsx)("span",{class:"fa fa-money"})," Pay for ticket/service"]})})}),(0,n.jsx)("div",{style:e,children:(0,n.jsx)(a.N_,{to:"/pages/payments/mypayments",children:(0,n.jsxs)("div",{class:"button1",children:[(0,n.jsx)("span",{class:"fa fa-list"})," My payments"]})})}),(0,n.jsx)("div",{style:e,children:(0,n.jsx)(a.N_,{to:"/pages/payments/mytickets",children:(0,n.jsxs)("div",{class:"button1",children:[(0,n.jsx)("span",{class:"fa fa-check"}),"  Approve a payment"]})})})]})}}}]);
//# sourceMappingURL=7251.8ef79985.chunk.js.map