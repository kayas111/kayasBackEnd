{"version":3,"file":"static/js/9519.dc201c6d.chunk.js","mappings":"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","sources":["pages/audience/AudienceComp.jsx"],"sourcesContent":["\r\nimport { useParams } from \"react-router-dom/cjs/react-router-dom.min\"\r\nimport { useState, useEffect } from \"react\"\r\n\r\n    import {useCookies} from 'react-cookie'\r\nimport { Post, TrimExtraSpaces, MessageComponent, ToastAlert } from \"../Functions\"\r\nimport { audienceSmsCost } from \"../../Variables\"\r\nexport function AudienceComp(){\r\n  const [cookies]=useCookies(['user'])\r\n  let Params=useParams()\r\n  Params.audienceName=TrimExtraSpaces(Params.audienceName)\r\n  let [viewFactors,setViewFactors]=useState({})\r\n    let {contact,categoryId}=useParams(),payLoad={contact:parseInt(contact),categoryId:parseInt(categoryId)}\r\n  let [audienceName,setAudienceName]=useState(''),[followerDoc,setFollowersDoc]=useState({}),\r\n  [noOfFollowers,setNoOfFollowers]=useState(''),[updateFollowersStatus,setUpdateFollowersStatus]=useState('')\r\n  const[charLength,setCharLength]=useState('0'),maxCharLength=150\r\n  const [audience,setAudience]=useState('')\r\n  const [refresh,setRefresh]=useState(0)\r\n  const [status,setStatus]=useState('')\r\n  \r\n  \r\n  \r\nuseEffect(()=>{\r\n  \r\n   \r\n    let payLoad={method:'getAudience',args:{audienceName:Params.audienceName}}\r\n    \r\n  Post('/AudiencePostRequest',payLoad).then(resp=>{\r\n    if(resp.length==0){\r\n      viewFactors.audiencePresent=false\r\n      setViewFactors(viewFactors)\r\n\r\n    }else{\r\n      let audience=resp[0]\r\n      \r\n      setAudience(audience)\r\n      \r\n      viewFactors.audiencePresent=true\r\n\r\nsetAudienceName(Params.audienceName)\r\nsetNoOfFollowers(`${audience.followers.length} followers`)\r\n\r\n\r\n   \r\n    }\r\n  })\r\n  \r\n \r\n  \r\n  },[refresh])\r\n\r\n\r\n  return(\r\n \r\n<div class=\"row\">\r\n  <div class=\"col-md-3\"></div>\r\n  <div class=\"col-md-6\"> <div class=\"componentPadding\">\r\n    {\r\n       (()=>{\r\n        if(viewFactors.audiencePresent==true){\r\n         return(<div>\r\n <div class=\"pageLabel\">{audienceName}</div>\r\n \r\n\r\n{(()=>{\r\n if(cookies.user!==undefined && parseInt(cookies.user.contact)==parseInt(audience.contact)){\r\n  \r\n  return(<div>\r\n    <div class=\"light\" style={{paddingTop:\"3px\"}}><span class=\"btn hoverEffect1\" style={{padding:\"3px\",fontSize:\"12px\",color:\"white\",background:\"black\",borderRadius:\"2px\"}}>{noOfFollowers}</span></div>\r\n        <p></p>\r\n        \r\n         <form id=\"audiencePostMessageForm\" method=\"post\">\r\n         <div style={{paddingBottom:\"5px\"}}><div class=\"bold\">Send message</div></div>\r\n         \r\n         <div class=\"mb-3\">\r\n         <div style={{fontSize:\"12px\",paddingTop:\"5px\",paddingBottom:\"5px\"}}>Maximum message length = <span style={{color:\"red\",fontSize:\"15px\"}}>{maxCharLength}</span> characters.<br></br><span style={{color:\"red\",fontSize:\"15px\"}}>{charLength}</span> characters typed.</div>\r\n        <p></p> <textarea type=\"text\" class=\"form-control\" autoComplete=\"off\" name=\"msg\" required rows=\"6\" placeholder='Type message' onChange={()=>{\r\n    setCharLength(Array.from(document.getElementById(\"audiencePostMessageForm\").msg.value.trim()).length)\r\n  }}></textarea>\r\n          </div>\r\n         <div class=\"status\">{status}</div>\r\n         <div  class=\"btn btn-success fullButtonWidth\" onClick={()=>{\r\nlet form=document.getElementById('audiencePostMessageForm'), message=TrimExtraSpaces(form.msg.value)\r\n\r\nif(Array.from(message).length<1){\r\n  ToastAlert('toastAlert2','Type a message',3000)\r\n}else if(Array.from(message).length>maxCharLength){\r\n  ToastAlert('toastAlert2',`Message is longer than ${maxCharLength} characters`,3000)\r\n}else{\r\n  \r\n  if(window.confirm(\"Select 'OK' to confirm and send the message\")==true){\r\n    ToastAlert('toastAlert1','Please wait for confirmation message......',6000)\r\nlet payLoad={method:'sendMessageToAudience',args:{message:message+' #KayasSMS',audienceName:Params.audienceName,audienceSmsCost:audienceSmsCost}}\r\n\r\nPost('/AudiencePostRequest',payLoad).then(resp=>{\r\n  if(resp.NoEligibleReceipients==true){\r\n    ToastAlert('toastAlert2','No follower has enough credit on their account to receive an SMS message.',7000)\r\n    setStatus('')\r\n  } else\r\n\r\n  if(resp.NoFollowers==true){\r\n    ToastAlert('toastAlert2',`Audience has no followers. First attain followers then try again`,6000)\r\n    setStatus('')\r\n  \r\n  }\r\n  \r\n  \r\n  else\r\n\r\nif(resp.success==1){\r\n  ToastAlert('toastAlert1',`Message sent to ${resp.NoOfReceipients} receipient(s)`,6000)\r\n  setStatus('')\r\n\r\n}else{\r\n  ToastAlert('toastAlert2','Not sent. Try again or contact Kayas 0703852178',6000)\r\n  setStatus('')\r\n}\r\n})\r\n  }else{;}\r\n\r\n\r\n}\r\n\r\n         }}>Send</div>\r\n         \r\n         </form>\r\n         <p></p>\r\n         <div    class=\"btn btn-danger fullButtonWidth\">Delete audience</div>\r\n         \r\n        \r\n \r\n  \r\n  \r\n  \r\n  \r\n  \r\n    </div>)\r\n}else{\r\n  \r\nreturn(<div>\r\n\r\n\r\n\r\n \r\n  {(()=>{\r\n    \r\n    if(cookies.user==undefined){return (\r\n<div>\r\n  <p></p>\r\n  <MessageComponent message=\"You need to be logged in\"/>\r\n</div>\r\n\r\n    )}\r\n    else {\r\n\r\n\r\n  return(<div>\r\n    <div style={{paddingTop:\"12px\"}}>\r\n      <div style={{border:\"1px solid red\",padding:\"3px\",color:\"red\"}}>Free trial ends on 31st October. After the free trial, only followers who have atleast 60/= on their Kayas accounts will continue to receive SMS messages on their phone numbers.</div>\r\n    </div>\r\n<div style={{paddingTop:\"15px\"}} class=\"light\">Tap \"Follow\" to receive SMS messages from this audience to your phone number.\r\nEach time an SMS reaches your phone number, {audienceSmsCost}/= will  be deducted automatically from your Kayas account. You won't receive any SMS message from any audience that you follow if your Kayas account balance is less than {audienceSmsCost}/=. Tap menu to deposit to your account if necessary.\r\n\r\n</div>\r\n <p></p>\r\n\r\n{\r\n  (()=>{\r\n    \r\nreturn(<div>\r\n\r\n  {\r\n    (()=>{\r\n      if(audience.followers.find(follower=>follower.contact==cookies.user.contact)==undefined){\r\n          \r\n          \r\n        return(<div class=\"btn btn-success fullButtonWidth\" onClick={()=>{\r\n          ToastAlert('toastAlert1','Following......',2000)\r\n          let {name,contact}=cookies.user\r\n          Post('/AudiencePostRequest',{method:\"followAnAudience\",args:{audienceName:Params.audienceName,name:name,contact:contact}}).then(resp=>{\r\n        if(resp.modifiedCount==1){\r\n          \r\n        setRefresh(prev=>prev+1)\r\n        \r\n        \r\n        }else{;}\r\n          })\r\n          \r\n        }}>Follow</div>)\r\n        \r\n              }else{\r\n                \r\n                return(<div class=\"btn btn-danger fullButtonWidth\" onClick={()=>{\r\n                  ToastAlert('toastAlert2','Unfollowing......',2000)\r\n                  let {name,contact}=cookies.user\r\n                  Post('/AudiencePostRequest',{method:\"unfollowAnAudience\",args:{audienceName:Params.audienceName,name:name,contact:contact}}).then(resp=>{\r\n                if(resp.modifiedCount==1){\r\n                  \r\n                setRefresh(prev=>prev+1)\r\n                \r\n                }else{;}\r\n                  })\r\n                \r\n                }}>Unfollow</div>)\r\n                \r\n              }\r\n    })()\r\n  }\r\n  \r\n  <div style={{paddingTop:\"30px\"}}>\r\n  <MessageComponent message=\"Advise more friends of similar interests to follow this audience too\"/>\r\n  </div>\r\n  </div>)\r\n  })()\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n  </div>)  \r\n\r\n\r\n    }\r\n    \r\n  })()}\r\n\r\n<p></p>\r\n\r\n\r\n\r\n\r\n\r\n</div>)\r\n}\r\n})()}\r\n          \r\n\r\n         </div>)\r\n          \r\n        \r\n         }\r\n      \r\n         if(viewFactors.audiencePresent==false){\r\n      return(\r\n        <div><MessageComponent message=\"Audience does not exists\"/></div>\r\n      )\r\n         }\r\n\r\n         \r\n       })()\r\n    }\r\n  </div></div>\r\n  <div class=\"col-md-3\"></div>\r\n</div>\r\n\r\n  )\r\n\r\n\r\n}\r\n  \r\n\r\n  export default AudienceComp"],"names":["AudienceComp","cookies","useCookies","Params","useParams","audienceName","TrimExtraSpaces","viewFactors","setViewFactors","useState","contact","categoryId","setAudienceName","parseInt","followerDoc","setFollowersDoc","noOfFollowers","setNoOfFollowers","updateFollowersStatus","setUpdateFollowersStatus","charLength","setCharLength","audience","setAudience","refresh","setRefresh","status","setStatus","useEffect","payLoad","method","args","Post","then","resp","length","audiencePresent","concat","followers","_jsxs","class","children","_jsx","undefined","user","style","paddingTop","padding","fontSize","color","background","borderRadius","id","paddingBottom","type","autoComplete","name","required","rows","placeholder","onChange","Array","from","document","getElementById","msg","value","trim","onClick","form","message","ToastAlert","window","confirm","audienceSmsCost","NoEligibleReceipients","NoFollowers","success","NoOfReceipients","MessageComponent","border","find","follower","modifiedCount","prev"],"sourceRoot":""}